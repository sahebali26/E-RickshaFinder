(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var o1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ov={exports:{}},yh={},Dv={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl=Symbol.for("react.element"),a1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),u1=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),h1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),p1=Symbol.for("react.suspense"),m1=Symbol.for("react.memo"),g1=Symbol.for("react.lazy"),qg=Symbol.iterator;function _1(t){return t===null||typeof t!="object"?null:(t=qg&&t[qg]||t["@@iterator"],typeof t=="function"?t:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zv=Object.assign,Fv={};function Ko(t,e,n){this.props=t,this.context=e,this.refs=Fv,this.updater=n||Vv}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jv(){}jv.prototype=Ko.prototype;function Rp(t,e,n){this.props=t,this.context=e,this.refs=Fv,this.updater=n||Vv}var Lp=Rp.prototype=new jv;Lp.constructor=Rp;zv(Lp,Ko.prototype);Lp.isPureReactComponent=!0;var $g=Array.isArray,Bv=Object.prototype.hasOwnProperty,bp={current:null},Uv={key:!0,ref:!0,__self:!0,__source:!0};function Hv(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Bv.call(e,i)&&!Uv.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];s.children=f}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Bl,type:t,key:o,ref:l,props:s,_owner:bp.current}}function y1(t,e){return{$$typeof:Bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Np(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bl}function v1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zg=/\/+/g;function yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v1(""+t.key):e.toString(36)}function lc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Bl:case a1:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+yd(l,0):i,$g(s)?(n="",t!=null&&(n=t.replace(Zg,"$&/")+"/"),lc(s,e,n,"",function(m){return m})):s!=null&&(Np(s)&&(s=y1(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Zg,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",$g(t))for(var h=0;h<t.length;h++){o=t[h];var f=i+yd(o,h);l+=lc(o,e,n,f,s)}else if(f=_1(t),typeof f=="function")for(t=f.call(t),h=0;!(o=t.next()).done;)o=o.value,f=i+yd(o,h++),l+=lc(o,e,n,f,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function zu(t,e,n){if(t==null)return t;var i=[],s=0;return lc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function w1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},uc={transition:null},E1={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:uc,ReactCurrentOwner:bp};function Wv(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:zu,forEach:function(t,e,n){zu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zu(t,function(){e++}),e},toArray:function(t){return zu(t,function(e){return e})||[]},only:function(t){if(!Np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Ko;Ee.Fragment=l1;Ee.Profiler=c1;Ee.PureComponent=Rp;Ee.StrictMode=u1;Ee.Suspense=p1;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E1;Ee.act=Wv;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=zv({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=bp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)Bv.call(e,f)&&!Uv.hasOwnProperty(f)&&(i[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){h=Array(f);for(var m=0;m<f;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Bl,type:t.type,key:s,ref:o,props:i,_owner:l}};Ee.createContext=function(t){return t={$$typeof:d1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:h1,_context:t},t.Consumer=t};Ee.createElement=Hv;Ee.createFactory=function(t){var e=Hv.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:f1,render:t}};Ee.isValidElement=Np;Ee.lazy=function(t){return{$$typeof:g1,_payload:{_status:-1,_result:t},_init:w1}};Ee.memo=function(t,e){return{$$typeof:m1,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=uc.transition;uc.transition={};try{t()}finally{uc.transition=e}};Ee.unstable_act=Wv;Ee.useCallback=function(t,e){return Ut.current.useCallback(t,e)};Ee.useContext=function(t){return Ut.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Ut.current.useEffect(t,e)};Ee.useId=function(){return Ut.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Ut.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};Ee.useRef=function(t){return Ut.current.useRef(t)};Ee.useState=function(t){return Ut.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Ut.current.useTransition()};Ee.version="18.3.1";Dv.exports=Ee;var oe=Dv.exports;const fl=Mv(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=oe,I1=Symbol.for("react.element"),x1=Symbol.for("react.fragment"),S1=Object.prototype.hasOwnProperty,P1=T1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C1={key:!0,ref:!0,__self:!0,__source:!0};function qv(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)S1.call(e,i)&&!C1.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:I1,type:t,key:o,ref:l,props:s,_owner:P1.current}}yh.Fragment=x1;yh.jsx=qv;yh.jsxs=qv;Ov.exports=yh;var x=Ov.exports,af={},$v={exports:{}},hn={},Zv={exports:{}},Gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,le){var X=U.length;U.push(le);e:for(;0<X;){var he=X-1>>>1,Te=U[he];if(0<s(Te,le))U[he]=le,U[X]=Te,X=he;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var le=U[0],X=U.pop();if(X!==le){U[0]=X;e:for(var he=0,Te=U.length,Ye=Te>>>1;he<Ye;){var ke=2*(he+1)-1,Ie=U[ke],fe=ke+1,ft=U[fe];if(0>s(Ie,X))fe<Te&&0>s(ft,Ie)?(U[he]=ft,U[fe]=X,he=fe):(U[he]=Ie,U[ke]=X,he=ke);else if(fe<Te&&0>s(ft,X))U[he]=ft,U[fe]=X,he=fe;else break e}}return le}function s(U,le){var X=U.sortIndex-le.sortIndex;return X!==0?X:U.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var f=[],m=[],y=1,w=null,E=3,R=!1,z=!1,D=!1,W=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(U){for(var le=n(m);le!==null;){if(le.callback===null)i(m);else if(le.startTime<=U)i(m),le.sortIndex=le.expirationTime,e(f,le);else break;le=n(m)}}function q(U){if(D=!1,O(U),!z)if(n(f)!==null)z=!0,Qe(Q);else{var le=n(m);le!==null&&we(q,le.startTime-U)}}function Q(U,le){z=!1,D&&(D=!1,b(I),I=-1),R=!0;var X=E;try{for(O(le),w=n(f);w!==null&&(!(w.expirationTime>le)||U&&!M());){var he=w.callback;if(typeof he=="function"){w.callback=null,E=w.priorityLevel;var Te=he(w.expirationTime<=le);le=t.unstable_now(),typeof Te=="function"?w.callback=Te:w===n(f)&&i(f),O(le)}else i(f);w=n(f)}if(w!==null)var Ye=!0;else{var ke=n(m);ke!==null&&we(q,ke.startTime-le),Ye=!1}return Ye}finally{w=null,E=X,R=!1}}var Y=!1,P=null,I=-1,C=5,N=-1;function M(){return!(t.unstable_now()-N<C)}function V(){if(P!==null){var U=t.unstable_now();N=U;var le=!0;try{le=P(!0,U)}finally{le?A():(Y=!1,P=null)}}else Y=!1}var A;if(typeof S=="function")A=function(){S(V)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,nn=De.port2;De.port1.onmessage=V,A=function(){nn.postMessage(null)}}else A=function(){W(V,0)};function Qe(U){P=U,Y||(Y=!0,A())}function we(U,le){I=W(function(){U(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){z||R||(z=!0,Qe(Q))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(U){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var X=E;E=le;try{return U()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,le){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=E;E=U;try{return le()}finally{E=X}},t.unstable_scheduleCallback=function(U,le,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,U){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=X+Te,U={id:y++,callback:le,priorityLevel:U,startTime:X,expirationTime:Te,sortIndex:-1},X>he?(U.sortIndex=X,e(m,U),n(f)===null&&U===n(m)&&(D?(b(I),I=-1):D=!0,we(q,X-he))):(U.sortIndex=Te,e(f,U),z||R||(z=!0,Qe(Q))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var le=E;return function(){var X=E;E=le;try{return U.apply(this,arguments)}finally{E=X}}}})(Gv);Zv.exports=Gv;var A1=Zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=oe,cn=A1;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kv=new Set,pl={};function Ss(t,e){Mo(t,e),Mo(t+"Capture",e)}function Mo(t,e){for(pl[t]=e,t=0;t<e.length;t++)Kv.add(e[t])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lf=Object.prototype.hasOwnProperty,R1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Kg={};function L1(t){return lf.call(Kg,t)?!0:lf.call(Gg,t)?!1:R1.test(t)?Kg[t]=!0:(Gg[t]=!0,!1)}function b1(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N1(t,e,n,i){if(e===null||typeof e>"u"||b1(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mp=/[\-:]([a-z])/g;function Op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mp,Op);Pt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mp,Op);Pt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mp,Op);Pt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dp(t,e,n,i){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(N1(e,n,s,i)&&(n=null),i||s===null?L1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ui=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fu=Symbol.for("react.element"),co=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),Vp=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),Qv=Symbol.for("react.provider"),Yv=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),hf=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Xv=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,vd;function Wa(t){if(vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vd=e&&e[1]||""}return`
`+vd+t}var wd=!1;function Ed(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var f=`
`+s[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=h);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wa(t):""}function M1(t){switch(t.tag){case 5:return Wa(t.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return t=Ed(t.type,!1),t;case 11:return t=Ed(t.type.render,!1),t;case 1:return t=Ed(t.type,!0),t;default:return""}}function df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case co:return"Portal";case uf:return"Profiler";case Vp:return"StrictMode";case cf:return"Suspense";case hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yv:return(t.displayName||"Context")+".Consumer";case Qv:return(t._context.displayName||"Context")+".Provider";case zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fp:return e=t.displayName||null,e!==null?e:df(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return df(t(e))}catch{}}return null}function O1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(e);case 8:return e===Vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function D1(t){var e=Jv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ju(t){t._valueTracker||(t._valueTracker=D1(t))}function ew(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Jv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ff(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tw(t,e){e=e.checked,e!=null&&Dp(t,"checked",e,!1)}function pf(t,e){tw(t,e);var n=Cr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&mf(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mf(t,e,n){(e!=="number"||Rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qa=Array.isArray;function Io(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(qa(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function nw(t,e){var n=Cr(e.value),i=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function e_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bu,rw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V1=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(t){V1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xa[e]=Xa[t]})});function sw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xa.hasOwnProperty(t)&&Xa[t]?(""+e).trim():e+"px"}function ow(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=sw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var z1=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yf(t,e){if(e){if(z1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=null;function jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ef=null,xo=null,So=null;function t_(t){if(t=Wl(t)){if(typeof Ef!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Ih(e),Ef(t.stateNode,t.type,e))}}function aw(t){xo?So?So.push(t):So=[t]:xo=t}function lw(){if(xo){var t=xo,e=So;if(So=xo=null,t_(t),e)for(t=0;t<e.length;t++)t_(e[t])}}function uw(t,e){return t(e)}function cw(){}var Td=!1;function hw(t,e,n){if(Td)return t(e,n);Td=!0;try{return uw(t,e,n)}finally{Td=!1,(xo!==null||So!==null)&&(cw(),lw())}}function gl(t,e){var n=t.stateNode;if(n===null)return null;var i=Ih(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Tf=!1;if(Ni)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Tf=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{Tf=!1}function F1(t,e,n,i,s,o,l,h,f){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(y){this.onError(y)}}var Ja=!1,Lc=null,bc=!1,If=null,j1={onError:function(t){Ja=!0,Lc=t}};function B1(t,e,n,i,s,o,l,h,f){Ja=!1,Lc=null,F1.apply(j1,arguments)}function U1(t,e,n,i,s,o,l,h,f){if(B1.apply(this,arguments),Ja){if(Ja){var m=Lc;Ja=!1,Lc=null}else throw Error(K(198));bc||(bc=!0,If=m)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n_(t){if(Ps(t)!==t)throw Error(K(188))}function H1(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return n_(s),t;if(o===i)return n_(s),e;o=o.sibling}throw Error(K(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(K(189))}}if(n.alternate!==i)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function fw(t){return t=H1(t),t!==null?pw(t):null}function pw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pw(t);if(e!==null)return e;t=t.sibling}return null}var mw=cn.unstable_scheduleCallback,i_=cn.unstable_cancelCallback,W1=cn.unstable_shouldYield,q1=cn.unstable_requestPaint,it=cn.unstable_now,$1=cn.unstable_getCurrentPriorityLevel,Bp=cn.unstable_ImmediatePriority,gw=cn.unstable_UserBlockingPriority,Nc=cn.unstable_NormalPriority,Z1=cn.unstable_LowPriority,_w=cn.unstable_IdlePriority,vh=null,ri=null;function G1(t){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:Y1,K1=Math.log,Q1=Math.LN2;function Y1(t){return t>>>=0,t===0?32:31-(K1(t)/Q1|0)|0}var Uu=64,Hu=4194304;function $a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=$a(h):(o&=l,o!==0&&(i=$a(o)))}else l=n&~s,l!==0?i=$a(l):o!==0&&(i=$a(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Fn(e),s=1<<n,i|=t[n],e&=~s;return i}function X1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Fn(o),h=1<<l,f=s[l];f===-1?(!(h&n)||h&i)&&(s[l]=X1(h,e)):f<=e&&(t.expiredLanes|=h),o&=~h}}function xf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yw(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function Id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ul(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function ex(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Fn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Up(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Fn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ze=0;function vw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ww,Hp,Ew,Tw,Iw,Sf=!1,Wu=[],fr=null,pr=null,mr=null,_l=new Map,yl=new Map,sr=[],tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r_(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(e.pointerId)}}function za(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Wl(e),e!==null&&Hp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nx(t,e,n,i,s){switch(e){case"focusin":return fr=za(fr,t,e,n,i,s),!0;case"dragenter":return pr=za(pr,t,e,n,i,s),!0;case"mouseover":return mr=za(mr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return _l.set(o,za(_l.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,yl.set(o,za(yl.get(o)||null,t,e,n,i,s)),!0}return!1}function xw(t){var e=ss(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=dw(n),e!==null){t.blockedOn=e,Iw(t.priority,function(){Ew(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);wf=i,n.target.dispatchEvent(i),wf=null}else return e=Wl(n),e!==null&&Hp(e),t.blockedOn=n,!1;e.shift()}return!0}function s_(t,e,n){cc(t)&&n.delete(e)}function ix(){Sf=!1,fr!==null&&cc(fr)&&(fr=null),pr!==null&&cc(pr)&&(pr=null),mr!==null&&cc(mr)&&(mr=null),_l.forEach(s_),yl.forEach(s_)}function Fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Sf||(Sf=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,ix)))}function vl(t){function e(s){return Fa(s,t)}if(0<Wu.length){Fa(Wu[0],t);for(var n=1;n<Wu.length;n++){var i=Wu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(fr!==null&&Fa(fr,t),pr!==null&&Fa(pr,t),mr!==null&&Fa(mr,t),_l.forEach(e),yl.forEach(e),n=0;n<sr.length;n++)i=sr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)xw(n),n.blockedOn===null&&sr.shift()}var Po=Ui.ReactCurrentBatchConfig,Oc=!0;function rx(t,e,n,i){var s=ze,o=Po.transition;Po.transition=null;try{ze=1,Wp(t,e,n,i)}finally{ze=s,Po.transition=o}}function sx(t,e,n,i){var s=ze,o=Po.transition;Po.transition=null;try{ze=4,Wp(t,e,n,i)}finally{ze=s,Po.transition=o}}function Wp(t,e,n,i){if(Oc){var s=Pf(t,e,n,i);if(s===null)Nd(t,e,i,Dc,n),r_(t,i);else if(nx(s,t,e,n,i))i.stopPropagation();else if(r_(t,i),e&4&&-1<tx.indexOf(t)){for(;s!==null;){var o=Wl(s);if(o!==null&&ww(o),o=Pf(t,e,n,i),o===null&&Nd(t,e,i,Dc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Nd(t,e,i,null,n)}}var Dc=null;function Pf(t,e,n,i){if(Dc=null,t=jp(i),t=ss(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dc=t,null}function Sw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($1()){case Bp:return 1;case gw:return 4;case Nc:case Z1:return 16;case _w:return 536870912;default:return 16}default:return 16}}var cr=null,qp=null,hc=null;function Pw(){if(hc)return hc;var t,e=qp,n=e.length,i,s="value"in cr?cr.value:cr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return hc=s.slice(t,1<i?1-i:void 0)}function dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qu(){return!0}function o_(){return!1}function dn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qu:o_,this.isPropagationStopped=o_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qu)},persist:function(){},isPersistent:qu}),e}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=dn(Qo),Hl=Ge({},Qo,{view:0,detail:0}),ox=dn(Hl),xd,Sd,ja,wh=Ge({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ja&&(ja&&t.type==="mousemove"?(xd=t.screenX-ja.screenX,Sd=t.screenY-ja.screenY):Sd=xd=0,ja=t),xd)},movementY:function(t){return"movementY"in t?t.movementY:Sd}}),a_=dn(wh),ax=Ge({},wh,{dataTransfer:0}),lx=dn(ax),ux=Ge({},Hl,{relatedTarget:0}),Pd=dn(ux),cx=Ge({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=dn(cx),dx=Ge({},Qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fx=dn(dx),px=Ge({},Qo,{data:0}),l_=dn(px),mx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_x[t])?!!e[t]:!1}function Zp(){return yx}var vx=Ge({},Hl,{key:function(t){if(t.key){var e=mx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(t){return t.type==="keypress"?dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wx=dn(vx),Ex=Ge({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u_=dn(Ex),Tx=Ge({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),Ix=dn(Tx),xx=Ge({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sx=dn(xx),Px=Ge({},wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cx=dn(Px),Ax=[9,13,27,32],Gp=Ni&&"CompositionEvent"in window,el=null;Ni&&"documentMode"in document&&(el=document.documentMode);var kx=Ni&&"TextEvent"in window&&!el,Cw=Ni&&(!Gp||el&&8<el&&11>=el),c_=" ",h_=!1;function Aw(t,e){switch(t){case"keyup":return Ax.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fo=!1;function Rx(t,e){switch(t){case"compositionend":return kw(e);case"keypress":return e.which!==32?null:(h_=!0,c_);case"textInput":return t=e.data,t===c_&&h_?null:t;default:return null}}function Lx(t,e){if(fo)return t==="compositionend"||!Gp&&Aw(t,e)?(t=Pw(),hc=qp=cr=null,fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cw&&e.locale!=="ko"?null:e.data;default:return null}}var bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bx[t.type]:e==="textarea"}function Rw(t,e,n,i){aw(i),e=Vc(e,"onChange"),0<e.length&&(n=new $p("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tl=null,wl=null;function Nx(t){Bw(t,0)}function Eh(t){var e=go(t);if(ew(e))return t}function Mx(t,e){if(t==="change")return e}var Lw=!1;if(Ni){var Cd;if(Ni){var Ad="oninput"in document;if(!Ad){var f_=document.createElement("div");f_.setAttribute("oninput","return;"),Ad=typeof f_.oninput=="function"}Cd=Ad}else Cd=!1;Lw=Cd&&(!document.documentMode||9<document.documentMode)}function p_(){tl&&(tl.detachEvent("onpropertychange",bw),wl=tl=null)}function bw(t){if(t.propertyName==="value"&&Eh(wl)){var e=[];Rw(e,wl,t,jp(t)),hw(Nx,e)}}function Ox(t,e,n){t==="focusin"?(p_(),tl=e,wl=n,tl.attachEvent("onpropertychange",bw)):t==="focusout"&&p_()}function Dx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eh(wl)}function Vx(t,e){if(t==="click")return Eh(e)}function zx(t,e){if(t==="input"||t==="change")return Eh(e)}function Fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:Fx;function El(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!lf.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function m_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g_(t,e){var n=m_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m_(n)}}function Nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mw(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rc(t.document)}return e}function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jx(t){var e=Mw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nw(n.ownerDocument.documentElement,n)){if(i!==null&&Kp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=g_(n,o);var l=g_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bx=Ni&&"documentMode"in document&&11>=document.documentMode,po=null,Cf=null,nl=null,Af=!1;function __(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||po==null||po!==Rc(i)||(i=po,"selectionStart"in i&&Kp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nl&&El(nl,i)||(nl=i,i=Vc(Cf,"onSelect"),0<i.length&&(e=new $p("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=po)))}function $u(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mo={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},kd={},Ow={};Ni&&(Ow=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Th(t){if(kd[t])return kd[t];if(!mo[t])return t;var e=mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ow)return kd[t]=e[n];return t}var Dw=Th("animationend"),Vw=Th("animationiteration"),zw=Th("animationstart"),Fw=Th("transitionend"),jw=new Map,y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){jw.set(t,e),Ss(e,[t])}for(var Rd=0;Rd<y_.length;Rd++){var Ld=y_[Rd],Ux=Ld.toLowerCase(),Hx=Ld[0].toUpperCase()+Ld.slice(1);Or(Ux,"on"+Hx)}Or(Dw,"onAnimationEnd");Or(Vw,"onAnimationIteration");Or(zw,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(Fw,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Za));function v_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,U1(i,e,void 0,t),t.currentTarget=null}function Bw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],f=h.instance,m=h.currentTarget;if(h=h.listener,f!==o&&s.isPropagationStopped())break e;v_(s,h,m),o=f}else for(l=0;l<i.length;l++){if(h=i[l],f=h.instance,m=h.currentTarget,h=h.listener,f!==o&&s.isPropagationStopped())break e;v_(s,h,m),o=f}}}if(bc)throw t=If,bc=!1,If=null,t}function Ue(t,e){var n=e[Nf];n===void 0&&(n=e[Nf]=new Set);var i=t+"__bubble";n.has(i)||(Uw(e,t,2,!1),n.add(i))}function bd(t,e,n){var i=0;e&&(i|=4),Uw(n,t,i,e)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Tl(t){if(!t[Zu]){t[Zu]=!0,Kv.forEach(function(n){n!=="selectionchange"&&(Wx.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zu]||(e[Zu]=!0,bd("selectionchange",!1,e))}}function Uw(t,e,n,i){switch(Sw(e)){case 1:var s=rx;break;case 4:s=sx;break;default:s=Wp}n=s.bind(null,e,n,t),s=void 0,!Tf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;h!==null;){if(l=ss(h),l===null)return;if(f=l.tag,f===5||f===6){i=o=l;continue e}h=h.parentNode}}i=i.return}hw(function(){var m=o,y=jp(n),w=[];e:{var E=jw.get(t);if(E!==void 0){var R=$p,z=t;switch(t){case"keypress":if(dc(n)===0)break e;case"keydown":case"keyup":R=wx;break;case"focusin":z="focus",R=Pd;break;case"focusout":z="blur",R=Pd;break;case"beforeblur":case"afterblur":R=Pd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Ix;break;case Dw:case Vw:case zw:R=hx;break;case Fw:R=Sx;break;case"scroll":R=ox;break;case"wheel":R=Cx;break;case"copy":case"cut":case"paste":R=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=u_}var D=(e&4)!==0,W=!D&&t==="scroll",b=D?E!==null?E+"Capture":null:E;D=[];for(var S=m,O;S!==null;){O=S;var q=O.stateNode;if(O.tag===5&&q!==null&&(O=q,b!==null&&(q=gl(S,b),q!=null&&D.push(Il(S,q,O)))),W)break;S=S.return}0<D.length&&(E=new R(E,z,null,n,y),w.push({event:E,listeners:D}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",E&&n!==wf&&(z=n.relatedTarget||n.fromElement)&&(ss(z)||z[Mi]))break e;if((R||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,R?(z=n.relatedTarget||n.toElement,R=m,z=z?ss(z):null,z!==null&&(W=Ps(z),z!==W||z.tag!==5&&z.tag!==6)&&(z=null)):(R=null,z=m),R!==z)){if(D=a_,q="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(D=u_,q="onPointerLeave",b="onPointerEnter",S="pointer"),W=R==null?E:go(R),O=z==null?E:go(z),E=new D(q,S+"leave",R,n,y),E.target=W,E.relatedTarget=O,q=null,ss(y)===m&&(D=new D(b,S+"enter",z,n,y),D.target=O,D.relatedTarget=W,q=D),W=q,R&&z)t:{for(D=R,b=z,S=0,O=D;O;O=ro(O))S++;for(O=0,q=b;q;q=ro(q))O++;for(;0<S-O;)D=ro(D),S--;for(;0<O-S;)b=ro(b),O--;for(;S--;){if(D===b||b!==null&&D===b.alternate)break t;D=ro(D),b=ro(b)}D=null}else D=null;R!==null&&w_(w,E,R,D,!1),z!==null&&W!==null&&w_(w,W,z,D,!0)}}e:{if(E=m?go(m):window,R=E.nodeName&&E.nodeName.toLowerCase(),R==="select"||R==="input"&&E.type==="file")var Q=Mx;else if(d_(E))if(Lw)Q=zx;else{Q=Dx;var Y=Ox}else(R=E.nodeName)&&R.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Q=Vx);if(Q&&(Q=Q(t,m))){Rw(w,Q,n,y);break e}Y&&Y(t,E,m),t==="focusout"&&(Y=E._wrapperState)&&Y.controlled&&E.type==="number"&&mf(E,"number",E.value)}switch(Y=m?go(m):window,t){case"focusin":(d_(Y)||Y.contentEditable==="true")&&(po=Y,Cf=m,nl=null);break;case"focusout":nl=Cf=po=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,__(w,n,y);break;case"selectionchange":if(Bx)break;case"keydown":case"keyup":__(w,n,y)}var P;if(Gp)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else fo?Aw(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Cw&&n.locale!=="ko"&&(fo||I!=="onCompositionStart"?I==="onCompositionEnd"&&fo&&(P=Pw()):(cr=y,qp="value"in cr?cr.value:cr.textContent,fo=!0)),Y=Vc(m,I),0<Y.length&&(I=new l_(I,t,null,n,y),w.push({event:I,listeners:Y}),P?I.data=P:(P=kw(n),P!==null&&(I.data=P)))),(P=kx?Rx(t,n):Lx(t,n))&&(m=Vc(m,"onBeforeInput"),0<m.length&&(y=new l_("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:m}),y.data=P))}Bw(w,e)})}function Il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=gl(t,n),o!=null&&i.unshift(Il(t,o,s)),o=gl(t,e),o!=null&&i.push(Il(t,o,s))),t=t.return}return i}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,f=h.alternate,m=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&m!==null&&(h=m,s?(f=gl(n,o),f!=null&&l.unshift(Il(n,f,h))):s||(f=gl(n,o),f!=null&&l.push(Il(n,f,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var qx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(qx,`
`).replace($x,"")}function Gu(t,e,n){if(e=E_(e),E_(t)!==e&&n)throw Error(K(425))}function zc(){}var kf=null,Rf=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bf=typeof setTimeout=="function"?setTimeout:void 0,Zx=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(t){return T_.resolve(null).then(t).catch(Kx)}:bf;function Kx(t){setTimeout(function(){throw t})}function Md(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),vl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);vl(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),ii="__reactFiber$"+Yo,xl="__reactProps$"+Yo,Mi="__reactContainer$"+Yo,Nf="__reactEvents$"+Yo,Qx="__reactListeners$"+Yo,Yx="__reactHandles$"+Yo;function ss(t){var e=t[ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mi]||n[ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I_(t);t!==null;){if(n=t[ii])return n;t=I_(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[ii]||t[Mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function go(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ih(t){return t[xl]||null}var Mf=[],_o=-1;function Dr(t){return{current:t}}function We(t){0>_o||(t.current=Mf[_o],Mf[_o]=null,_o--)}function Be(t,e){_o++,Mf[_o]=t.current,t.current=e}var Ar={},Ot=Dr(Ar),Xt=Dr(!1),ps=Ar;function Oo(t,e){var n=t.type.contextTypes;if(!n)return Ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(t){return t=t.childContextTypes,t!=null}function Fc(){We(Xt),We(Ot)}function x_(t,e,n){if(Ot.current!==Ar)throw Error(K(168));Be(Ot,e),Be(Xt,n)}function Hw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(K(108,O1(t)||"Unknown",s));return Ge({},n,i)}function jc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,ps=Ot.current,Be(Ot,t),Be(Xt,Xt.current),!0}function S_(t,e,n){var i=t.stateNode;if(!i)throw Error(K(169));n?(t=Hw(t,e,ps),i.__reactInternalMemoizedMergedChildContext=t,We(Xt),We(Ot),Be(Ot,t)):We(Xt),Be(Xt,n)}var Pi=null,xh=!1,Od=!1;function Ww(t){Pi===null?Pi=[t]:Pi.push(t)}function Xx(t){xh=!0,Ww(t)}function Vr(){if(!Od&&Pi!==null){Od=!0;var t=0,e=ze;try{var n=Pi;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Pi=null,xh=!1}catch(s){throw Pi!==null&&(Pi=Pi.slice(t+1)),mw(Bp,Vr),s}finally{ze=e,Od=!1}}return null}var yo=[],vo=0,Bc=null,Uc=0,En=[],Tn=0,ms=null,Ai=1,ki="";function ns(t,e){yo[vo++]=Uc,yo[vo++]=Bc,Bc=t,Uc=e}function qw(t,e,n){En[Tn++]=Ai,En[Tn++]=ki,En[Tn++]=ms,ms=t;var i=Ai;t=ki;var s=32-Fn(i)-1;i&=~(1<<s),n+=1;var o=32-Fn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Ai=1<<32-Fn(e)+s|n<<s|i,ki=o+t}else Ai=1<<o|n<<s|i,ki=t}function Qp(t){t.return!==null&&(ns(t,1),qw(t,1,0))}function Yp(t){for(;t===Bc;)Bc=yo[--vo],yo[vo]=null,Uc=yo[--vo],yo[vo]=null;for(;t===ms;)ms=En[--Tn],En[Tn]=null,ki=En[--Tn],En[Tn]=null,Ai=En[--Tn],En[Tn]=null}var un=null,an=null,qe=!1,Dn=null;function $w(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function P_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Ai,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function Of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Df(t){if(qe){var e=an;if(e){var n=e;if(!P_(t,e)){if(Of(t))throw Error(K(418));e=gr(n.nextSibling);var i=un;e&&P_(t,e)?$w(i,n):(t.flags=t.flags&-4097|2,qe=!1,un=t)}}else{if(Of(t))throw Error(K(418));t.flags=t.flags&-4097|2,qe=!1,un=t}}}function C_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Ku(t){if(t!==un)return!1;if(!qe)return C_(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=an)){if(Of(t))throw Zw(),Error(K(418));for(;e;)$w(t,e),e=gr(e.nextSibling)}if(C_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?gr(t.stateNode.nextSibling):null;return!0}function Zw(){for(var t=an;t;)t=gr(t.nextSibling)}function Do(){an=un=null,qe=!1}function Xp(t){Dn===null?Dn=[t]:Dn.push(t)}var Jx=Ui.ReactCurrentBatchConfig;function Ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var i=n.stateNode}if(!i)throw Error(K(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Qu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A_(t){var e=t._init;return e(t._payload)}function Gw(t){function e(b,S){if(t){var O=b.deletions;O===null?(b.deletions=[S],b.flags|=16):O.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function i(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function s(b,S){return b=wr(b,S),b.index=0,b.sibling=null,b}function o(b,S,O){return b.index=O,t?(O=b.alternate,O!==null?(O=O.index,O<S?(b.flags|=2,S):O):(b.flags|=2,S)):(b.flags|=1048576,S)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function h(b,S,O,q){return S===null||S.tag!==6?(S=Ud(O,b.mode,q),S.return=b,S):(S=s(S,O),S.return=b,S)}function f(b,S,O,q){var Q=O.type;return Q===ho?y(b,S,O.props.children,q,O.key):S!==null&&(S.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ir&&A_(Q)===S.type)?(q=s(S,O.props),q.ref=Ba(b,S,O),q.return=b,q):(q=vc(O.type,O.key,O.props,null,b.mode,q),q.ref=Ba(b,S,O),q.return=b,q)}function m(b,S,O,q){return S===null||S.tag!==4||S.stateNode.containerInfo!==O.containerInfo||S.stateNode.implementation!==O.implementation?(S=Hd(O,b.mode,q),S.return=b,S):(S=s(S,O.children||[]),S.return=b,S)}function y(b,S,O,q,Q){return S===null||S.tag!==7?(S=hs(O,b.mode,q,Q),S.return=b,S):(S=s(S,O),S.return=b,S)}function w(b,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ud(""+S,b.mode,O),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fu:return O=vc(S.type,S.key,S.props,null,b.mode,O),O.ref=Ba(b,null,S),O.return=b,O;case co:return S=Hd(S,b.mode,O),S.return=b,S;case ir:var q=S._init;return w(b,q(S._payload),O)}if(qa(S)||Da(S))return S=hs(S,b.mode,O,null),S.return=b,S;Qu(b,S)}return null}function E(b,S,O,q){var Q=S!==null?S.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Q!==null?null:h(b,S,""+O,q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Fu:return O.key===Q?f(b,S,O,q):null;case co:return O.key===Q?m(b,S,O,q):null;case ir:return Q=O._init,E(b,S,Q(O._payload),q)}if(qa(O)||Da(O))return Q!==null?null:y(b,S,O,q,null);Qu(b,O)}return null}function R(b,S,O,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number")return b=b.get(O)||null,h(S,b,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Fu:return b=b.get(q.key===null?O:q.key)||null,f(S,b,q,Q);case co:return b=b.get(q.key===null?O:q.key)||null,m(S,b,q,Q);case ir:var Y=q._init;return R(b,S,O,Y(q._payload),Q)}if(qa(q)||Da(q))return b=b.get(O)||null,y(S,b,q,Q,null);Qu(S,q)}return null}function z(b,S,O,q){for(var Q=null,Y=null,P=S,I=S=0,C=null;P!==null&&I<O.length;I++){P.index>I?(C=P,P=null):C=P.sibling;var N=E(b,P,O[I],q);if(N===null){P===null&&(P=C);break}t&&P&&N.alternate===null&&e(b,P),S=o(N,S,I),Y===null?Q=N:Y.sibling=N,Y=N,P=C}if(I===O.length)return n(b,P),qe&&ns(b,I),Q;if(P===null){for(;I<O.length;I++)P=w(b,O[I],q),P!==null&&(S=o(P,S,I),Y===null?Q=P:Y.sibling=P,Y=P);return qe&&ns(b,I),Q}for(P=i(b,P);I<O.length;I++)C=R(P,b,I,O[I],q),C!==null&&(t&&C.alternate!==null&&P.delete(C.key===null?I:C.key),S=o(C,S,I),Y===null?Q=C:Y.sibling=C,Y=C);return t&&P.forEach(function(M){return e(b,M)}),qe&&ns(b,I),Q}function D(b,S,O,q){var Q=Da(O);if(typeof Q!="function")throw Error(K(150));if(O=Q.call(O),O==null)throw Error(K(151));for(var Y=Q=null,P=S,I=S=0,C=null,N=O.next();P!==null&&!N.done;I++,N=O.next()){P.index>I?(C=P,P=null):C=P.sibling;var M=E(b,P,N.value,q);if(M===null){P===null&&(P=C);break}t&&P&&M.alternate===null&&e(b,P),S=o(M,S,I),Y===null?Q=M:Y.sibling=M,Y=M,P=C}if(N.done)return n(b,P),qe&&ns(b,I),Q;if(P===null){for(;!N.done;I++,N=O.next())N=w(b,N.value,q),N!==null&&(S=o(N,S,I),Y===null?Q=N:Y.sibling=N,Y=N);return qe&&ns(b,I),Q}for(P=i(b,P);!N.done;I++,N=O.next())N=R(P,b,I,N.value,q),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?I:N.key),S=o(N,S,I),Y===null?Q=N:Y.sibling=N,Y=N);return t&&P.forEach(function(V){return e(b,V)}),qe&&ns(b,I),Q}function W(b,S,O,q){if(typeof O=="object"&&O!==null&&O.type===ho&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Fu:e:{for(var Q=O.key,Y=S;Y!==null;){if(Y.key===Q){if(Q=O.type,Q===ho){if(Y.tag===7){n(b,Y.sibling),S=s(Y,O.props.children),S.return=b,b=S;break e}}else if(Y.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ir&&A_(Q)===Y.type){n(b,Y.sibling),S=s(Y,O.props),S.ref=Ba(b,Y,O),S.return=b,b=S;break e}n(b,Y);break}else e(b,Y);Y=Y.sibling}O.type===ho?(S=hs(O.props.children,b.mode,q,O.key),S.return=b,b=S):(q=vc(O.type,O.key,O.props,null,b.mode,q),q.ref=Ba(b,S,O),q.return=b,b=q)}return l(b);case co:e:{for(Y=O.key;S!==null;){if(S.key===Y)if(S.tag===4&&S.stateNode.containerInfo===O.containerInfo&&S.stateNode.implementation===O.implementation){n(b,S.sibling),S=s(S,O.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=Hd(O,b.mode,q),S.return=b,b=S}return l(b);case ir:return Y=O._init,W(b,S,Y(O._payload),q)}if(qa(O))return z(b,S,O,q);if(Da(O))return D(b,S,O,q);Qu(b,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,S!==null&&S.tag===6?(n(b,S.sibling),S=s(S,O),S.return=b,b=S):(n(b,S),S=Ud(O,b.mode,q),S.return=b,b=S),l(b)):n(b,S)}return W}var Vo=Gw(!0),Kw=Gw(!1),Hc=Dr(null),Wc=null,wo=null,Jp=null;function em(){Jp=wo=Wc=null}function tm(t){var e=Hc.current;We(Hc),t._currentValue=e}function Vf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){Wc=t,Jp=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(Jp!==t)if(t={context:t,memoizedValue:e,next:null},wo===null){if(Wc===null)throw Error(K(308));wo=t,Wc.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return e}var os=null;function nm(t){os===null?os=[t]:os.push(t)}function Qw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,nm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Oi(t,i)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Oi(t,n)}return s=i.interleaved,s===null?(e.next=e,nm(i)):(e.next=s.next,s.next=e),i.interleaved=e,Oi(t,n)}function fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Up(t,n)}}function k_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qc(t,e,n,i){var s=t.updateQueue;rr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,m=f.next;f.next=null,l===null?o=m:l.next=m,l=f;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=m:h.next=m,y.lastBaseUpdate=f))}if(o!==null){var w=s.baseState;l=0,y=m=f=null,h=o;do{var E=h.lane,R=h.eventTime;if((i&E)===E){y!==null&&(y=y.next={eventTime:R,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var z=t,D=h;switch(E=e,R=n,D.tag){case 1:if(z=D.payload,typeof z=="function"){w=z.call(R,w,E);break e}w=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=D.payload,E=typeof z=="function"?z.call(R,w,E):z,E==null)break e;w=Ge({},w,E);break e;case 2:rr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else R={eventTime:R,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(m=y=R,f=w):y=y.next=R,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(y===null&&(f=w),s.baseState=f,s.firstBaseUpdate=m,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);_s|=l,t.lanes=l,t.memoizedState=w}}function R_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(K(191,s));s.call(i)}}}var ql={},si=Dr(ql),Sl=Dr(ql),Pl=Dr(ql);function as(t){if(t===ql)throw Error(K(174));return t}function rm(t,e){switch(Be(Pl,e),Be(Sl,t),Be(si,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_f(e,t)}We(si),Be(si,e)}function zo(){We(si),We(Sl),We(Pl)}function Xw(t){as(Pl.current);var e=as(si.current),n=_f(e,t.type);e!==n&&(Be(Sl,t),Be(si,n))}function sm(t){Sl.current===t&&(We(si),We(Sl))}var $e=Dr(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function om(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var pc=Ui.ReactCurrentDispatcher,Vd=Ui.ReactCurrentBatchConfig,gs=0,Ze=null,ct=null,vt=null,Zc=!1,il=!1,Cl=0,eS=0;function kt(){throw Error(K(321))}function am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function lm(t,e,n,i,s,o){if(gs=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pc.current=t===null||t.memoizedState===null?rS:sS,t=n(i,s),il){o=0;do{if(il=!1,Cl=0,25<=o)throw Error(K(301));o+=1,vt=ct=null,e.updateQueue=null,pc.current=oS,t=n(i,s)}while(il)}if(pc.current=Gc,e=ct!==null&&ct.next!==null,gs=0,vt=ct=Ze=null,Zc=!1,e)throw Error(K(300));return t}function um(){var t=Cl!==0;return Cl=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=t:vt=vt.next=t,vt}function Cn(){if(ct===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=vt===null?Ze.memoizedState:vt.next;if(e!==null)vt=e,ct=t;else{if(t===null)throw Error(K(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},vt===null?Ze.memoizedState=vt=t:vt=vt.next=t}return vt}function Al(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=Cn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=ct,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,f=null,m=o;do{var y=m.lane;if((gs&y)===y)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var w={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(h=f=w,l=i):f=f.next=w,Ze.lanes|=y,_s|=y}m=m.next}while(m!==null&&m!==o);f===null?l=i:f.next=h,Wn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=f,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ze.lanes|=o,_s|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fd(t){var e=Cn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Wn(o,e.memoizedState)||(Yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Jw(){}function e0(t,e){var n=Ze,i=Cn(),s=e(),o=!Wn(i.memoizedState,s);if(o&&(i.memoizedState=s,Yt=!0),i=i.queue,cm(i0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,kl(9,n0.bind(null,n,i,s,e),void 0,null),wt===null)throw Error(K(349));gs&30||t0(n,e,s)}return s}function t0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n0(t,e,n,i){e.value=n,e.getSnapshot=i,r0(e)&&s0(t)}function i0(t,e,n){return n(function(){r0(e)&&s0(t)})}function r0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function s0(t){var e=Oi(t,1);e!==null&&jn(e,t,1,-1)}function L_(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=iS.bind(null,Ze,t),[e.memoizedState,t]}function kl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function o0(){return Cn().memoizedState}function mc(t,e,n,i){var s=ti();Ze.flags|=t,s.memoizedState=kl(1|e,n,void 0,i===void 0?null:i)}function Sh(t,e,n,i){var s=Cn();i=i===void 0?null:i;var o=void 0;if(ct!==null){var l=ct.memoizedState;if(o=l.destroy,i!==null&&am(i,l.deps)){s.memoizedState=kl(e,n,o,i);return}}Ze.flags|=t,s.memoizedState=kl(1|e,n,o,i)}function b_(t,e){return mc(8390656,8,t,e)}function cm(t,e){return Sh(2048,8,t,e)}function a0(t,e){return Sh(4,2,t,e)}function l0(t,e){return Sh(4,4,t,e)}function u0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c0(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4,4,u0.bind(null,e,t),n)}function hm(){}function h0(t,e){var n=Cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&am(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function d0(t,e){var n=Cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&am(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function f0(t,e,n){return gs&21?(Wn(n,e)||(n=yw(),Ze.lanes|=n,_s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function tS(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=Vd.transition;Vd.transition={};try{t(!1),e()}finally{ze=n,Vd.transition=i}}function p0(){return Cn().memoizedState}function nS(t,e,n){var i=vr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},m0(t))g0(e,n);else if(n=Qw(t,e,n,i),n!==null){var s=Bt();jn(n,t,i,s),_0(n,e,i)}}function iS(t,e,n){var i=vr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(m0(t))g0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Wn(h,l)){var f=e.interleaved;f===null?(s.next=s,nm(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}n=Qw(t,e,s,i),n!==null&&(s=Bt(),jn(n,t,i,s),_0(n,e,i))}}function m0(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function g0(t,e){il=Zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Up(t,n)}}var Gc={readContext:Pn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},rS={readContext:Pn,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:b_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mc(4194308,4,u0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mc(4194308,4,t,e)},useInsertionEffect:function(t,e){return mc(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ti();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=nS.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:L_,useDebugValue:hm,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=L_(!1),e=t[0];return t=tS.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,s=ti();if(qe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),wt===null)throw Error(K(349));gs&30||t0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,b_(i0.bind(null,i,o,t),[t]),i.flags|=2048,kl(9,n0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ti(),e=wt.identifierPrefix;if(qe){var n=ki,i=Ai;n=(i&~(1<<32-Fn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sS={readContext:Pn,useCallback:h0,useContext:Pn,useEffect:cm,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:d0,useReducer:zd,useRef:o0,useState:function(){return zd(Al)},useDebugValue:hm,useDeferredValue:function(t){var e=Cn();return f0(e,ct.memoizedState,t)},useTransition:function(){var t=zd(Al)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:Jw,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1},oS={readContext:Pn,useCallback:h0,useContext:Pn,useEffect:cm,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:d0,useReducer:Fd,useRef:o0,useState:function(){return Fd(Al)},useDebugValue:hm,useDeferredValue:function(t){var e=Cn();return ct===null?e.memoizedState=t:f0(e,ct.memoizedState,t)},useTransition:function(){var t=Fd(Al)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:Jw,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ph={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=vr(t),o=bi(i,s);o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,s),e!==null&&(jn(e,t,s,i),fc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=vr(t),o=bi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,s),e!==null&&(jn(e,t,s,i),fc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),i=vr(t),s=bi(n,i);s.tag=2,e!=null&&(s.callback=e),e=_r(t,s,i),e!==null&&(jn(e,t,i,n),fc(e,t,i))}};function N_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!El(n,i)||!El(s,o):!0}function y0(t,e,n){var i=!1,s=Ar,o=e.contextType;return typeof o=="object"&&o!==null?o=Pn(o):(s=Jt(e)?ps:Ot.current,i=e.contextTypes,o=(i=i!=null)?Oo(t,s):Ar),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ph,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function M_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ph.enqueueReplaceState(e,e.state,null)}function Ff(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},im(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Pn(o):(o=Jt(e)?ps:Ot.current,s.context=Oo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(zf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ph.enqueueReplaceState(s,s.state,null),qc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fo(t,e){try{var n="",i=e;do n+=M1(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aS=typeof WeakMap=="function"?WeakMap:Map;function v0(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qc||(Qc=!0,Qf=i),jf(t,e)},n}function w0(t,e,n){n=bi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){jf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jf(t,e),typeof i!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function O_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ES.bind(null,t,e,n),e.then(t,t))}function D_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var lS=Ui.ReactCurrentOwner,Yt=!1;function jt(t,e,n,i){e.child=t===null?Kw(e,null,n,i):Vo(e,t.child,n,i)}function z_(t,e,n,i,s){n=n.render;var o=e.ref;return Co(e,s),i=lm(t,e,n,i,o,s),n=um(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(qe&&n&&Qp(e),e.flags|=1,jt(t,e,i,s),e.child)}function F_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!vm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,E0(t,e,o,i,s)):(t=vc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(l,i)&&t.ref===e.ref)return Di(t,e,s)}return e.flags|=1,t=wr(o,i),t.ref=e.ref,t.return=e,e.child=t}function E0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(El(o,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Di(t,e,s)}return Bf(t,e,n,i,s)}function T0(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(To,on),on|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(To,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Be(To,on),on|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Be(To,on),on|=i;return jt(t,e,s,n),e.child}function I0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bf(t,e,n,i,s){var o=Jt(n)?ps:Ot.current;return o=Oo(e,o),Co(e,s),n=lm(t,e,n,i,o,s),i=um(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(qe&&i&&Qp(e),e.flags|=1,jt(t,e,n,s),e.child)}function j_(t,e,n,i,s){if(Jt(n)){var o=!0;jc(e)}else o=!1;if(Co(e,s),e.stateNode===null)gc(t,e),y0(e,n,i),Ff(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var f=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Pn(m):(m=Jt(n)?ps:Ot.current,m=Oo(e,m));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||f!==m)&&M_(e,l,i,m),rr=!1;var E=e.memoizedState;l.state=E,qc(e,i,l,s),f=e.memoizedState,h!==i||E!==f||Xt.current||rr?(typeof y=="function"&&(zf(e,n,y,i),f=e.memoizedState),(h=rr||N_(e,n,h,i,E,f,m))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),l.props=i,l.state=f,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Yw(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:Mn(e.type,h),l.props=m,w=e.pendingProps,E=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=Pn(f):(f=Jt(n)?ps:Ot.current,f=Oo(e,f));var R=n.getDerivedStateFromProps;(y=typeof R=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||E!==f)&&M_(e,l,i,f),rr=!1,E=e.memoizedState,l.state=E,qc(e,i,l,s);var z=e.memoizedState;h!==w||E!==z||Xt.current||rr?(typeof R=="function"&&(zf(e,n,R,i),z=e.memoizedState),(m=rr||N_(e,n,m,i,E,z,f)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,z,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,z,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=z),l.props=i,l.state=z,l.context=f,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return Uf(t,e,n,i,o,s)}function Uf(t,e,n,i,s,o){I0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&S_(e,n,!1),Di(t,e,o);i=e.stateNode,lS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Vo(e,t.child,null,o),e.child=Vo(e,null,h,o)):jt(t,e,h,o),e.memoizedState=i.state,s&&S_(e,n,!0),e.child}function x0(t){var e=t.stateNode;e.pendingContext?x_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&x_(t,e.context,!1),rm(t,e.containerInfo)}function B_(t,e,n,i,s){return Do(),Xp(s),e.flags|=256,jt(t,e,n,i),e.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Wf(t){return{baseLanes:t,cachePool:null,transitions:null}}function S0(t,e,n){var i=e.pendingProps,s=$e.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be($e,s&1),t===null)return Df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=kh(l,i,0,null),t=hs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Wf(n),e.memoizedState=Hf,t):dm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return uS(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var f={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=f,e.deletions=null):(i=wr(s,f),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=wr(h,o):(o=hs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Wf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Hf,i}return o=t.child,t=o.sibling,i=wr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function dm(t,e){return e=kh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yu(t,e,n,i){return i!==null&&Xp(i),Vo(e,t.child,null,n),t=dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uS(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=jd(Error(K(422))),Yu(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=kh({mode:"visible",children:i.children},s,0,null),o=hs(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Vo(e,t.child,null,l),e.child.memoizedState=Wf(l),e.memoizedState=Hf,o);if(!(e.mode&1))return Yu(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(K(419)),i=jd(o,i,void 0),Yu(t,e,l,i)}if(h=(l&t.childLanes)!==0,Yt||h){if(i=wt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Oi(t,s),jn(i,t,s,-1))}return ym(),i=jd(Error(K(421))),Yu(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=TS.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,an=gr(s.nextSibling),un=e,qe=!0,Dn=null,t!==null&&(En[Tn++]=Ai,En[Tn++]=ki,En[Tn++]=ms,Ai=t.id,ki=t.overflow,ms=e),e=dm(e,i.children),e.flags|=4096,e)}function U_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Vf(t.return,e,n)}function Bd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function P0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(jt(t,e,i.children,n),i=$e.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,n,e);else if(t.tag===19)U_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Be($e,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bd(e,!0,n,null,o);break;case"together":Bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cS(t,e,n){switch(e.tag){case 3:x0(e),Do();break;case 5:Xw(e);break;case 1:Jt(e.type)&&jc(e);break;case 4:rm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Be(Hc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Be($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?S0(t,e,n):(Be($e,$e.current&1),t=Di(t,e,n),t!==null?t.sibling:null);Be($e,$e.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return P0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be($e,$e.current),i)break;return null;case 22:case 23:return e.lanes=0,T0(t,e,n)}return Di(t,e,n)}var C0,qf,A0,k0;C0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qf=function(){};A0=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,as(si.current);var o=null;switch(n){case"input":s=ff(t,s),i=ff(t,i),o=[];break;case"select":s=Ge({},s,{value:void 0}),i=Ge({},i,{value:void 0}),o=[];break;case"textarea":s=gf(t,s),i=gf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=zc)}yf(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(pl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var f=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&f!==h&&(f!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&h[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(o||(o=[]),o.push(m,n)),n=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(o=o||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(pl.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&Ue("scroll",t),o||h===f||(o=[])):(o=o||[]).push(m,f))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};k0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ua(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function hS(t,e,n){var i=e.pendingProps;switch(Yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Jt(e.type)&&Fc(),Rt(e),null;case 3:return i=e.stateNode,zo(),We(Xt),We(Ot),om(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Jf(Dn),Dn=null))),qf(t,e),Rt(e),null;case 5:sm(e);var s=as(Pl.current);if(n=e.type,t!==null&&e.stateNode!=null)A0(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(K(166));return Rt(e),null}if(t=as(si.current),Ku(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ii]=e,i[xl]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(s=0;s<Za.length;s++)Ue(Za[s],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Yg(i,o),Ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",i);break;case"textarea":Jg(i,o),Ue("invalid",i)}yf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&Gu(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Gu(i.textContent,h,t),s=["children",""+h]):pl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Ue("scroll",i)}switch(n){case"input":ju(i),Xg(i,o,!0);break;case"textarea":ju(i),e_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=zc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ii]=e,t[xl]=i,C0(t,e,!1,!1),e.stateNode=t;e:{switch(l=vf(n,i),n){case"dialog":Ue("cancel",t),Ue("close",t),s=i;break;case"iframe":case"object":case"embed":Ue("load",t),s=i;break;case"video":case"audio":for(s=0;s<Za.length;s++)Ue(Za[s],t);s=i;break;case"source":Ue("error",t),s=i;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=i;break;case"details":Ue("toggle",t),s=i;break;case"input":Yg(t,i),s=ff(t,i),Ue("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ge({},i,{value:void 0}),Ue("invalid",t);break;case"textarea":Jg(t,i),s=gf(t,i),Ue("invalid",t);break;default:s=i}yf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var f=h[o];o==="style"?ow(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&rw(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ml(t,f):typeof f=="number"&&ml(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(pl.hasOwnProperty(o)?f!=null&&o==="onScroll"&&Ue("scroll",t):f!=null&&Dp(t,o,f,l))}switch(n){case"input":ju(t),Xg(t,i,!1);break;case"textarea":ju(t),e_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Cr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Io(t,!!i.multiple,o,!1):i.defaultValue!=null&&Io(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)k0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(K(166));if(n=as(Pl.current),as(si.current),Ku(e)){if(i=e.stateNode,n=e.memoizedProps,i[ii]=e,(o=i.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Gu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ii]=e,e.stateNode=i}return Rt(e),null;case 13:if(We($e),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&an!==null&&e.mode&1&&!(e.flags&128))Zw(),Do(),e.flags|=98560,o=!1;else if(o=Ku(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[ii]=e}else Do(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),o=!1}else Dn!==null&&(Jf(Dn),Dn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ht===0&&(ht=3):ym())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return zo(),qf(t,e),t===null&&Tl(e.stateNode.containerInfo),Rt(e),null;case 10:return tm(e.type._context),Rt(e),null;case 17:return Jt(e.type)&&Fc(),Rt(e),null;case 19:if(We($e),o=e.memoizedState,o===null)return Rt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ua(o,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=$c(t),l!==null){for(e.flags|=128,Ua(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be($e,$e.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>jo&&(e.flags|=128,i=!0,Ua(o,!1),e.lanes=4194304)}else{if(!i)if(t=$c(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ua(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!qe)return Rt(e),null}else 2*it()-o.renderingStartTime>jo&&n!==1073741824&&(e.flags|=128,i=!0,Ua(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=$e.current,Be($e,i?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return _m(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function dS(t,e){switch(Yp(e),e.tag){case 1:return Jt(e.type)&&Fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zo(),We(Xt),We(Ot),om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sm(e),null;case 13:if(We($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Do()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We($e),null;case 4:return zo(),null;case 10:return tm(e.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var Xu=!1,Nt=!1,fS=typeof WeakSet=="function"?WeakSet:Set,re=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function $f(t,e,n){try{n()}catch(i){Je(t,e,i)}}var H_=!1;function pS(t,e){if(kf=Oc,t=Mw(),Kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,f=-1,m=0,y=0,w=t,E=null;t:for(;;){for(var R;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(f=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(R=w.firstChild)!==null;)E=w,w=R;for(;;){if(w===t)break t;if(E===n&&++m===s&&(h=l),E===o&&++y===i&&(f=l),(R=w.nextSibling)!==null)break;w=E,E=w.parentNode}w=R}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rf={focusedElem:t,selectionRange:n},Oc=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var D=z.memoizedProps,W=z.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?D:Mn(e.type,D),W);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(q){Je(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return z=H_,H_=!1,z}function rl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&$f(e,n,o)}s=s.next}while(s!==i)}}function Ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Zf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function R0(t){var e=t.alternate;e!==null&&(t.alternate=null,R0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ii],delete e[xl],delete e[Nf],delete e[Qx],delete e[Yx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L0(t){return t.tag===5||t.tag===3||t.tag===4}function W_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zc));else if(i!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}function Kf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}var Tt=null,On=!1;function tr(t,e,n){for(n=n.child;n!==null;)b0(t,e,n),n=n.sibling}function b0(t,e,n){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:Nt||Eo(n,e);case 6:var i=Tt,s=On;Tt=null,tr(t,e,n),Tt=i,On=s,Tt!==null&&(On?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(On?(t=Tt,n=n.stateNode,t.nodeType===8?Md(t.parentNode,n):t.nodeType===1&&Md(t,n),vl(t)):Md(Tt,n.stateNode));break;case 4:i=Tt,s=On,Tt=n.stateNode.containerInfo,On=!0,tr(t,e,n),Tt=i,On=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&$f(n,e,l),s=s.next}while(s!==i)}tr(t,e,n);break;case 1:if(!Nt&&(Eo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(Nt=(i=Nt)||n.memoizedState!==null,tr(t,e,n),Nt=i):tr(t,e,n);break;default:tr(t,e,n)}}function q_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fS),e.forEach(function(i){var s=IS.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Tt=h.stateNode,On=!1;break e;case 3:Tt=h.stateNode.containerInfo,On=!0;break e;case 4:Tt=h.stateNode.containerInfo,On=!0;break e}h=h.return}if(Tt===null)throw Error(K(160));b0(o,l,s),Tt=null,On=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(m){Je(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N0(e,t),e=e.sibling}function N0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),ei(t),i&4){try{rl(3,t,t.return),Ch(3,t)}catch(D){Je(t,t.return,D)}try{rl(5,t,t.return)}catch(D){Je(t,t.return,D)}}break;case 1:Nn(e,t),ei(t),i&512&&n!==null&&Eo(n,n.return);break;case 5:if(Nn(e,t),ei(t),i&512&&n!==null&&Eo(n,n.return),t.flags&32){var s=t.stateNode;try{ml(s,"")}catch(D){Je(t,t.return,D)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&tw(s,o),vf(h,l);var m=vf(h,o);for(l=0;l<f.length;l+=2){var y=f[l],w=f[l+1];y==="style"?ow(s,w):y==="dangerouslySetInnerHTML"?rw(s,w):y==="children"?ml(s,w):Dp(s,y,w,m)}switch(h){case"input":pf(s,o);break;case"textarea":nw(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var R=o.value;R!=null?Io(s,!!o.multiple,R,!1):E!==!!o.multiple&&(o.defaultValue!=null?Io(s,!!o.multiple,o.defaultValue,!0):Io(s,!!o.multiple,o.multiple?[]:"",!1))}s[xl]=o}catch(D){Je(t,t.return,D)}}break;case 6:if(Nn(e,t),ei(t),i&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(D){Je(t,t.return,D)}}break;case 3:if(Nn(e,t),ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{vl(e.containerInfo)}catch(D){Je(t,t.return,D)}break;case 4:Nn(e,t),ei(t);break;case 13:Nn(e,t),ei(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(mm=it())),i&4&&q_(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(m=Nt)||y,Nn(e,t),Nt=m):Nn(e,t),ei(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(re=t,y=t.child;y!==null;){for(w=re=y;re!==null;){switch(E=re,R=E.child,E.tag){case 0:case 11:case 14:case 15:rl(4,E,E.return);break;case 1:Eo(E,E.return);var z=E.stateNode;if(typeof z.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,z.props=e.memoizedProps,z.state=e.memoizedState,z.componentWillUnmount()}catch(D){Je(i,n,D)}}break;case 5:Eo(E,E.return);break;case 22:if(E.memoizedState!==null){Z_(w);continue}}R!==null?(R.return=E,re=R):Z_(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{s=w.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,f=w.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=sw("display",l))}catch(D){Je(t,t.return,D)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(D){Je(t,t.return,D)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Nn(e,t),ei(t),i&4&&q_(t);break;case 21:break;default:Nn(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L0(n)){var i=n;break e}n=n.return}throw Error(K(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ml(s,""),i.flags&=-33);var o=W_(t);Kf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=W_(t);Gf(t,h,l);break;default:throw Error(K(161))}}catch(f){Je(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mS(t,e,n){re=t,M0(t)}function M0(t,e,n){for(var i=(t.mode&1)!==0;re!==null;){var s=re,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Xu;if(!l){var h=s.alternate,f=h!==null&&h.memoizedState!==null||Nt;h=Xu;var m=Nt;if(Xu=l,(Nt=f)&&!m)for(re=s;re!==null;)l=re,f=l.child,l.tag===22&&l.memoizedState!==null?G_(s):f!==null?(f.return=l,re=f):G_(s);for(;o!==null;)re=o,M0(o),o=o.sibling;re=s,Xu=h,Nt=m}$_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,re=o):$_(t)}}function $_(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Ch(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Nt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&R_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}R_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&vl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Nt||e.flags&512&&Zf(e)}catch(E){Je(e,e.return,E)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Z_(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function G_(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ch(4,e)}catch(f){Je(e,n,f)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(f){Je(e,s,f)}}var o=e.return;try{Zf(e)}catch(f){Je(e,o,f)}break;case 5:var l=e.return;try{Zf(e)}catch(f){Je(e,l,f)}}}catch(f){Je(e,e.return,f)}if(e===t){re=null;break}var h=e.sibling;if(h!==null){h.return=e.return,re=h;break}re=e.return}}var gS=Math.ceil,Kc=Ui.ReactCurrentDispatcher,fm=Ui.ReactCurrentOwner,Sn=Ui.ReactCurrentBatchConfig,Re=0,wt=null,at=null,St=0,on=0,To=Dr(0),ht=0,Rl=null,_s=0,Ah=0,pm=0,sl=null,Kt=null,mm=0,jo=1/0,Si=null,Qc=!1,Qf=null,yr=null,Ju=!1,hr=null,Yc=0,ol=0,Yf=null,_c=-1,yc=0;function Bt(){return Re&6?it():_c!==-1?_c:_c=it()}function vr(t){return t.mode&1?Re&2&&St!==0?St&-St:Jx.transition!==null?(yc===0&&(yc=yw()),yc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Sw(t.type)),t):1}function jn(t,e,n,i){if(50<ol)throw ol=0,Yf=null,Error(K(185));Ul(t,n,i),(!(Re&2)||t!==wt)&&(t===wt&&(!(Re&2)&&(Ah|=n),ht===4&&or(t,St)),en(t,i),n===1&&Re===0&&!(e.mode&1)&&(jo=it()+500,xh&&Vr()))}function en(t,e){var n=t.callbackNode;J1(t,e);var i=Mc(t,t===wt?St:0);if(i===0)n!==null&&i_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&i_(n),e===1)t.tag===0?Xx(K_.bind(null,t)):Ww(K_.bind(null,t)),Gx(function(){!(Re&6)&&Vr()}),n=null;else{switch(vw(i)){case 1:n=Bp;break;case 4:n=gw;break;case 16:n=Nc;break;case 536870912:n=_w;break;default:n=Nc}n=U0(n,O0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function O0(t,e){if(_c=-1,yc=0,Re&6)throw Error(K(327));var n=t.callbackNode;if(Ao()&&t.callbackNode!==n)return null;var i=Mc(t,t===wt?St:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Xc(t,i);else{e=i;var s=Re;Re|=2;var o=V0();(wt!==t||St!==e)&&(Si=null,jo=it()+500,cs(t,e));do try{vS();break}catch(h){D0(t,h)}while(!0);em(),Kc.current=o,Re=s,at!==null?e=0:(wt=null,St=0,e=ht)}if(e!==0){if(e===2&&(s=xf(t),s!==0&&(i=s,e=Xf(t,s))),e===1)throw n=Rl,cs(t,0),or(t,i),en(t,it()),n;if(e===6)or(t,i);else{if(s=t.current.alternate,!(i&30)&&!_S(s)&&(e=Xc(t,i),e===2&&(o=xf(t),o!==0&&(i=o,e=Xf(t,o))),e===1))throw n=Rl,cs(t,0),or(t,i),en(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(K(345));case 2:is(t,Kt,Si);break;case 3:if(or(t,i),(i&130023424)===i&&(e=mm+500-it(),10<e)){if(Mc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bf(is.bind(null,t,Kt,Si),e);break}is(t,Kt,Si);break;case 4:if(or(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Fn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*gS(i/1960))-i,10<i){t.timeoutHandle=bf(is.bind(null,t,Kt,Si),i);break}is(t,Kt,Si);break;case 5:is(t,Kt,Si);break;default:throw Error(K(329))}}}return en(t,it()),t.callbackNode===n?O0.bind(null,t):null}function Xf(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=Xc(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Jf(e)),t}function Jf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function _S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Wn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~pm,e&=~Ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),i=1<<n;t[n]=-1,e&=~i}}function K_(t){if(Re&6)throw Error(K(327));Ao();var e=Mc(t,0);if(!(e&1))return en(t,it()),null;var n=Xc(t,e);if(t.tag!==0&&n===2){var i=xf(t);i!==0&&(e=i,n=Xf(t,i))}if(n===1)throw n=Rl,cs(t,0),or(t,e),en(t,it()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,Kt,Si),en(t,it()),null}function gm(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(jo=it()+500,xh&&Vr())}}function ys(t){hr!==null&&hr.tag===0&&!(Re&6)&&Ao();var e=Re;Re|=1;var n=Sn.transition,i=ze;try{if(Sn.transition=null,ze=1,t)return t()}finally{ze=i,Sn.transition=n,Re=e,!(Re&6)&&Vr()}}function _m(){on=To.current,We(To)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zx(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(Yp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fc();break;case 3:zo(),We(Xt),We(Ot),om();break;case 5:sm(i);break;case 4:zo();break;case 13:We($e);break;case 19:We($e);break;case 10:tm(i.type._context);break;case 22:case 23:_m()}n=n.return}if(wt=t,at=t=wr(t.current,null),St=on=e,ht=0,Rl=null,pm=Ah=_s=0,Kt=sl=null,os!==null){for(e=0;e<os.length;e++)if(n=os[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}os=null}return t}function D0(t,e){do{var n=at;try{if(em(),pc.current=Gc,Zc){for(var i=Ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Zc=!1}if(gs=0,vt=ct=Ze=null,il=!1,Cl=0,fm.current=null,n===null||n.return===null){ht=1,Rl=e,at=null;break}e:{var o=t,l=n.return,h=n,f=e;if(e=St,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,y=h,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var R=D_(l);if(R!==null){R.flags&=-257,V_(R,l,h,o,e),R.mode&1&&O_(o,m,e),e=R,f=m;var z=e.updateQueue;if(z===null){var D=new Set;D.add(f),e.updateQueue=D}else z.add(f);break e}else{if(!(e&1)){O_(o,m,e),ym();break e}f=Error(K(426))}}else if(qe&&h.mode&1){var W=D_(l);if(W!==null){!(W.flags&65536)&&(W.flags|=256),V_(W,l,h,o,e),Xp(Fo(f,h));break e}}o=f=Fo(f,h),ht!==4&&(ht=2),sl===null?sl=[o]:sl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=v0(o,f,e);k_(o,b);break e;case 1:h=f;var S=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(yr===null||!yr.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var q=w0(o,h,e);k_(o,q);break e}}o=o.return}while(o!==null)}F0(n)}catch(Q){e=Q,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function V0(){var t=Kc.current;return Kc.current=Gc,t===null?Gc:t}function ym(){(ht===0||ht===3||ht===2)&&(ht=4),wt===null||!(_s&268435455)&&!(Ah&268435455)||or(wt,St)}function Xc(t,e){var n=Re;Re|=2;var i=V0();(wt!==t||St!==e)&&(Si=null,cs(t,e));do try{yS();break}catch(s){D0(t,s)}while(!0);if(em(),Re=n,Kc.current=i,at!==null)throw Error(K(261));return wt=null,St=0,ht}function yS(){for(;at!==null;)z0(at)}function vS(){for(;at!==null&&!W1();)z0(at)}function z0(t){var e=B0(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?F0(t):at=e,fm.current=null}function F0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dS(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(n=hS(n,e,on),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function is(t,e,n){var i=ze,s=Sn.transition;try{Sn.transition=null,ze=1,wS(t,e,n,i)}finally{Sn.transition=s,ze=i}return null}function wS(t,e,n,i){do Ao();while(hr!==null);if(Re&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ex(t,o),t===wt&&(at=wt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,U0(Nc,function(){return Ao(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Sn.transition,Sn.transition=null;var l=ze;ze=1;var h=Re;Re|=4,fm.current=null,pS(t,n),N0(n,t),jx(Rf),Oc=!!kf,Rf=kf=null,t.current=n,mS(n),q1(),Re=h,ze=l,Sn.transition=o}else t.current=n;if(Ju&&(Ju=!1,hr=t,Yc=s),o=t.pendingLanes,o===0&&(yr=null),G1(n.stateNode),en(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Qc)throw Qc=!1,t=Qf,Qf=null,t;return Yc&1&&t.tag!==0&&Ao(),o=t.pendingLanes,o&1?t===Yf?ol++:(ol=0,Yf=t):ol=0,Vr(),null}function Ao(){if(hr!==null){var t=vw(Yc),e=Sn.transition,n=ze;try{if(Sn.transition=null,ze=16>t?16:t,hr===null)var i=!1;else{if(t=hr,hr=null,Yc=0,Re&6)throw Error(K(331));var s=Re;for(Re|=4,re=t.current;re!==null;){var o=re,l=o.child;if(re.flags&16){var h=o.deletions;if(h!==null){for(var f=0;f<h.length;f++){var m=h[f];for(re=m;re!==null;){var y=re;switch(y.tag){case 0:case 11:case 15:rl(8,y,o)}var w=y.child;if(w!==null)w.return=y,re=w;else for(;re!==null;){y=re;var E=y.sibling,R=y.return;if(R0(y),y===m){re=null;break}if(E!==null){E.return=R,re=E;break}re=R}}}var z=o.alternate;if(z!==null){var D=z.child;if(D!==null){z.child=null;do{var W=D.sibling;D.sibling=null,D=W}while(D!==null)}}re=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,re=l;else e:for(;re!==null;){if(o=re,o.flags&2048)switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,re=b;break e}re=o.return}}var S=t.current;for(re=S;re!==null;){l=re;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,re=O;else e:for(l=S;re!==null;){if(h=re,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Ch(9,h)}}catch(Q){Je(h,h.return,Q)}if(h===l){re=null;break e}var q=h.sibling;if(q!==null){q.return=h.return,re=q;break e}re=h.return}}if(Re=s,Vr(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(vh,t)}catch{}i=!0}return i}finally{ze=n,Sn.transition=e}}return!1}function Q_(t,e,n){e=Fo(n,e),e=v0(t,e,1),t=_r(t,e,1),e=Bt(),t!==null&&(Ul(t,1,e),en(t,e))}function Je(t,e,n){if(t.tag===3)Q_(t,t,n);else for(;e!==null;){if(e.tag===3){Q_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yr===null||!yr.has(i))){t=Fo(n,t),t=w0(e,t,1),e=_r(e,t,1),t=Bt(),e!==null&&(Ul(e,1,t),en(e,t));break}}e=e.return}}function ES(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(St&n)===n&&(ht===4||ht===3&&(St&130023424)===St&&500>it()-mm?cs(t,0):pm|=n),en(t,e)}function j0(t,e){e===0&&(t.mode&1?(e=Hu,Hu<<=1,!(Hu&130023424)&&(Hu=4194304)):e=1);var n=Bt();t=Oi(t,e),t!==null&&(Ul(t,e,n),en(t,n))}function TS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j0(t,n)}function IS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(e),j0(t,n)}var B0;B0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,cS(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,qe&&e.flags&1048576&&qw(e,Uc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gc(t,e),t=e.pendingProps;var s=Oo(e,Ot.current);Co(e,n),s=lm(null,e,i,t,s,n);var o=um();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,jc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,im(e),s.updater=Ph,e.stateNode=s,s._reactInternals=e,Ff(e,i,t,n),e=Uf(null,e,i,!0,o,n)):(e.tag=0,qe&&o&&Qp(e),jt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(gc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=SS(i),t=Mn(i,t),s){case 0:e=Bf(null,e,i,t,n);break e;case 1:e=j_(null,e,i,t,n);break e;case 11:e=z_(null,e,i,t,n);break e;case 14:e=F_(null,e,i,Mn(i.type,t),n);break e}throw Error(K(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),Bf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),j_(t,e,i,s,n);case 3:e:{if(x0(e),t===null)throw Error(K(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Yw(t,e),qc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Fo(Error(K(423)),e),e=B_(t,e,i,n,s);break e}else if(i!==s){s=Fo(Error(K(424)),e),e=B_(t,e,i,n,s);break e}else for(an=gr(e.stateNode.containerInfo.firstChild),un=e,qe=!0,Dn=null,n=Kw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Do(),i===s){e=Di(t,e,n);break e}jt(t,e,i,n)}e=e.child}return e;case 5:return Xw(e),t===null&&Df(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Lf(i,s)?l=null:o!==null&&Lf(i,o)&&(e.flags|=32),I0(t,e),jt(t,e,l,n),e.child;case 6:return t===null&&Df(e),null;case 13:return S0(t,e,n);case 4:return rm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Vo(e,null,i,n):jt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),z_(t,e,i,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Be(Hc,i._currentValue),i._currentValue=l,o!==null)if(Wn(o.value,l)){if(o.children===s.children&&!Xt.current){e=Di(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(o.tag===1){f=bi(-1,n&-n),f.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?f.next=f:(f.next=y.next,y.next=f),m.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),Vf(o.return,n,e),h.lanes|=n;break}f=f.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(K(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Vf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Co(e,n),s=Pn(s),i=i(s),e.flags|=1,jt(t,e,i,n),e.child;case 14:return i=e.type,s=Mn(i,e.pendingProps),s=Mn(i.type,s),F_(t,e,i,s,n);case 15:return E0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mn(i,s),gc(t,e),e.tag=1,Jt(i)?(t=!0,jc(e)):t=!1,Co(e,n),y0(e,i,s),Ff(e,i,s,n),Uf(null,e,i,!0,t,n);case 19:return P0(t,e,n);case 22:return T0(t,e,n)}throw Error(K(156,e.tag))};function U0(t,e){return mw(t,e)}function xS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,i){return new xS(t,e,n,i)}function vm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SS(t){if(typeof t=="function")return vm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zp)return 11;if(t===Fp)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")vm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ho:return hs(n.children,s,o,e);case Vp:l=8,s|=8;break;case uf:return t=xn(12,n,e,s|2),t.elementType=uf,t.lanes=o,t;case cf:return t=xn(13,n,e,s),t.elementType=cf,t.lanes=o,t;case hf:return t=xn(19,n,e,s),t.elementType=hf,t.lanes=o,t;case Xv:return kh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qv:l=10;break e;case Yv:l=9;break e;case zp:l=11;break e;case Fp:l=14;break e;case ir:l=16,i=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=xn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function hs(t,e,n,i){return t=xn(7,t,i,e),t.lanes=n,t}function kh(t,e,n,i){return t=xn(22,t,i,e),t.elementType=Xv,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Hd(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PS(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wm(t,e,n,i,s,o,l,h,f){return t=new PS(t,e,n,h,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(o),t}function CS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function H0(t){if(!t)return Ar;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Jt(n))return Hw(t,n,e)}return e}function W0(t,e,n,i,s,o,l,h,f){return t=wm(n,i,!0,t,s,o,l,h,f),t.context=H0(null),n=t.current,i=Bt(),s=vr(n),o=bi(i,s),o.callback=e??null,_r(n,o,s),t.current.lanes=s,Ul(t,s,i),en(t,i),t}function Rh(t,e,n,i){var s=e.current,o=Bt(),l=vr(s);return n=H0(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=_r(s,e,l),t!==null&&(jn(t,s,l,o),fc(t,s,l)),l}function Jc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){Y_(t,e),(t=t.alternate)&&Y_(t,e)}function AS(){return null}var q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tm(t){this._internalRoot=t}Lh.prototype.render=Tm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Rh(t,e,null,null)};Lh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Rh(null,t,null,null)}),e[Mi]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&xw(t)}};function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X_(){}function kS(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=Jc(l);o.call(m)}}var l=W0(e,i,t,0,null,!1,!1,"",X_);return t._reactRootContainer=l,t[Mi]=l.current,Tl(t.nodeType===8?t.parentNode:t),ys(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=Jc(f);h.call(m)}}var f=wm(t,0,!1,null,null,!1,!1,"",X_);return t._reactRootContainer=f,t[Mi]=f.current,Tl(t.nodeType===8?t.parentNode:t),ys(function(){Rh(e,f,n,i)}),f}function Nh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var f=Jc(l);h.call(f)}}Rh(e,l,t,s)}else l=kS(n,e,t,s,i);return Jc(l)}ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$a(e.pendingLanes);n!==0&&(Up(e,n|1),en(e,it()),!(Re&6)&&(jo=it()+500,Vr()))}break;case 13:ys(function(){var i=Oi(t,1);if(i!==null){var s=Bt();jn(i,t,1,s)}}),Em(t,1)}};Hp=function(t){if(t.tag===13){var e=Oi(t,134217728);if(e!==null){var n=Bt();jn(e,t,134217728,n)}Em(t,134217728)}};Ew=function(t){if(t.tag===13){var e=vr(t),n=Oi(t,e);if(n!==null){var i=Bt();jn(n,t,e,i)}Em(t,e)}};Tw=function(){return ze};Iw=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Ef=function(t,e,n){switch(e){case"input":if(pf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Ih(i);if(!s)throw Error(K(90));ew(i),pf(i,s)}}}break;case"textarea":nw(t,n);break;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}};uw=gm;cw=ys;var RS={usingClientEntryPoint:!1,Events:[Wl,go,Ih,aw,lw,gm]},Ha={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LS={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||AS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{vh=ec.inject(LS),ri=ec}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RS;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(e))throw Error(K(200));return CS(t,e,null,n)};hn.createRoot=function(t,e){if(!Im(t))throw Error(K(299));var n=!1,i="",s=q0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wm(t,1,!1,null,null,n,!1,i,s),t[Mi]=e.current,Tl(t.nodeType===8?t.parentNode:t),new Tm(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=fw(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ys(t)};hn.hydrate=function(t,e,n){if(!bh(e))throw Error(K(200));return Nh(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Im(t))throw Error(K(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=q0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=W0(e,null,t,1,n??null,s,!1,o,l),t[Mi]=e.current,Tl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lh(e)};hn.render=function(t,e,n){if(!bh(e))throw Error(K(200));return Nh(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!bh(t))throw Error(K(40));return t._reactRootContainer?(ys(function(){Nh(null,null,t,!1,function(){t._reactRootContainer=null,t[Mi]=null})}),!0):!1};hn.unstable_batchedUpdates=gm;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bh(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Nh(t,e,n,!1,i)};hn.version="18.3.1-next-f1338f8080-20240426";function $0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($0)}catch(t){console.error(t)}}$0(),$v.exports=hn;var Z0=$v.exports,J_=Z0;af.createRoot=J_.createRoot,af.hydrateRoot=J_.hydrateRoot;function G0(t,e){const n=oe.useRef(e);oe.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bS=1;function NS(t){return Object.freeze({__version:bS,map:t})}function MS(t,e){return Object.freeze({...t,...e})}const K0=oe.createContext(null),Q0=K0.Provider;function xm(){const t=oe.useContext(K0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function OS(t){function e(n,i){const{instance:s,context:o}=t(n).current;return oe.useImperativeHandle(i,()=>s),n.children==null?null:fl.createElement(Q0,{value:o},n.children)}return oe.forwardRef(e)}function DS(t){function e(n,i){const[s,o]=oe.useState(!1),{instance:l}=t(n,o).current;oe.useImperativeHandle(i,()=>l),oe.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?Z0.createPortal(n.children,h):null}return oe.forwardRef(e)}function VS(t){function e(n,i){const{instance:s}=t(n).current;return oe.useImperativeHandle(i,()=>s),null}return oe.forwardRef(e)}function Y0(t,e){const n=oe.useRef();oe.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Sm(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function zS(t,e){return function(i,s){const o=xm(),l=t(Sm(i,o),o);return G0(o.map,i.attribution),Y0(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var ep={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(o1,function(n){var i="1.9.4";function s(r){var a,c,d,g;for(c=1,d=arguments.length;c<d;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var d=c.call(arguments,2);return function(){return r.apply(a,d.length?d.concat(c.call(arguments)):arguments)}}var h=0;function f(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var d,g,v,k;return k=function(){d=!1,g&&(v.apply(c,g),g=!1)},v=function(){d?g=arguments:(r.apply(c,arguments),setTimeout(k,a),d=!0)},v}function y(r,a,c){var d=a[1],g=a[0],v=d-g;return r===d&&c?r:((r-g)%v+v)%v+g}function w(){return!1}function E(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function R(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function z(r){return R(r).split(/\s+/)}function D(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function W(r,a,c){var d=[];for(var g in r)d.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function S(r,a){return r.replace(b,function(c,d){var g=a[d];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function q(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var P=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-P));return P=a+c,window.setTimeout(r,c)}var C=window.requestAnimationFrame||Y("RequestAnimationFrame")||I,N=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function M(r,a,c){if(c&&C===I)r.call(a);else return C.call(window,l(r,a))}function V(r){r&&N.call(window,r)}var A={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:f,throttle:m,wrapNum:y,falseFn:w,formatNum:E,trim:R,splitWords:z,setOptions:D,getParamString:W,template:S,isArray:O,indexOf:q,emptyImageUrl:Q,requestFn:C,cancelFn:N,requestAnimFrame:M,cancelAnimFrame:V};function De(){}De.extend=function(r){var a=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,d=o(c);d.constructor=a,a.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(nn(r.includes),s.apply(null,[d].concat(r.includes))),s(d,r),delete d.statics,delete d.includes,d.options&&(d.options=c.options?o(c.options):{},s(d.options,r.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,k=d._initHooks.length;v<k;v++)d._initHooks[v].call(this)}},a},De.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},De.mergeOptions=function(r){return s(this.prototype.options,r),this},De.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function nn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a);else{r=z(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var d in r)this._off(d,r[d],a);else{r=z(r);for(var g=arguments.length===1,v=0,k=r.length;v<k;v++)g?this._off(r[v]):this._off(r[v],a,c)}return this},_on:function(r,a,c,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};d&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var d,g,v;if(this._events&&(d=this._events[r],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,v=d.length;g<v;g++)d[g].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var j=d[k];this._firingCount&&(j.fn=w,this._events[r]=d=d.slice()),d.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var d=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var v=0,k=g.length;v<k;v++){var j=g[v],H=j.fn;j.once&&this.off(r,H,j.ctx),H.call(j.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(r,a,c,d){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(d=!!a,g=void 0,c=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,g,c)!==!1)return!0;if(d){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,d))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var d=this._events[r]||[];if(!a)return!!d.length;c===this&&(c=void 0);for(var g=0,v=d.length;g<v;g++)if(d[g].fn===a&&d[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a,!0);else{r=z(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var we=De.extend(Qe);function U(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new U(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new U(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(r,a,c){return r instanceof U?r:O(r)?new U(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new U(r.x,r.y):new U(r,a,c)}function he(r,a){if(r)for(var c=a?[r,a]:r,d=0,g=c.length;d<g;d++)this.extend(c[d])}he.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof U||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=Te(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof U?r=X(r):r=Te(r),r instanceof he?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=Te(r);var a=this.min,c=this.max,d=r.min,g=r.max,v=g.x>=a.x&&d.x<=c.x,k=g.y>=a.y&&d.y<=c.y;return v&&k},overlaps:function(r){r=Te(r);var a=this.min,c=this.max,d=r.min,g=r.max,v=g.x>a.x&&d.x<c.x,k=g.y>a.y&&d.y<c.y;return v&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,d=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return Te(X(a.x-d,a.y-g),X(c.x+d,c.y+g))},equals:function(r){return r?(r=Te(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Te(r,a){return!r||r instanceof he?r:new he(r,a)}function Ye(r,a){if(r)for(var c=a?[r,a]:r,d=0,g=c.length;d<g;d++)this.extend(c[d])}Ye.prototype={extend:function(r){var a=this._southWest,c=this._northEast,d,g;if(r instanceof Ie)d=r,g=r;else if(r instanceof Ye){if(d=r._southWest,g=r._northEast,!d||!g)return this}else return r?this.extend(fe(r)||ke(r)):this;return!a&&!c?(this._southWest=new Ie(d.lat,d.lng),this._northEast=new Ie(g.lat,g.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,d=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ye(new Ie(a.lat-d,a.lng-g),new Ie(c.lat+d,c.lng+g))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Ie||"lat"in r?r=fe(r):r=ke(r);var a=this._southWest,c=this._northEast,d,g;return r instanceof Ye?(d=r.getSouthWest(),g=r.getNorthEast()):d=g=r,d.lat>=a.lat&&g.lat<=c.lat&&d.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=ke(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>=a.lat&&d.lat<=c.lat,k=g.lng>=a.lng&&d.lng<=c.lng;return v&&k},overlaps:function(r){r=ke(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>a.lat&&d.lat<c.lat,k=g.lng>a.lng&&d.lng<c.lng;return v&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=ke(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(r,a){return r instanceof Ye?r:new Ye(r,a)}function Ie(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}Ie.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return fn.distance(this,fe(r))},wrap:function(){return fn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return ke([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof Ie?r:O(r)&&typeof r[0]!="object"?r.length===3?new Ie(r[0],r[1],r[2]):r.length===2?new Ie(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Ie(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new Ie(r,a,c)}var ft={latLngToPoint:function(r,a){var c=this.projection.project(r),d=this.scale(a);return this.transformation._transform(c,d)},pointToLatLng:function(r,a){var c=this.scale(a),d=this.transformation.untransform(r,c);return this.projection.unproject(d)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),d=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new he(d,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,d=r.alt;return new Ie(c,a,d)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),d=a.lat-c.lat,g=a.lng-c.lng;if(d===0&&g===0)return r;var v=r.getSouthWest(),k=r.getNorthEast(),j=new Ie(v.lat-d,v.lng-g),H=new Ie(k.lat-d,k.lng-g);return new Ye(j,H)}},fn=s({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,d=r.lat*c,g=a.lat*c,v=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),j=v*v+Math.cos(d)*Math.cos(g)*k*k,H=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*H}}),aa=6378137,la={R:aa,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,r.lat),-c),g=Math.sin(d*a);return new U(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new Ie((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=aa*Math.PI;return new he([-r,-r],[r,r])}()};function ua(r,a,c,d){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=d}ua.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new U((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Wi(r,a,c,d){return new ua(r,a,c,d)}var jr=s({},fn,{code:"EPSG:3857",projection:la,transformation:function(){var r=.5/(Math.PI*la.R);return Wi(r,.5,-r,.5)}()}),ru=s({},jr,{code:"EPSG:900913"});function su(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Rs(r,a){var c="",d,g,v,k,j,H;for(d=0,v=r.length;d<v;d++){for(j=r[d],g=0,k=j.length;g<k;g++)H=j[g],c+=(g?"L":"M")+H.x+" "+H.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var Br=document.documentElement.style,Ur="ActiveXObject"in window,pt=Ur&&!document.addEventListener,mt="msLaunchUri"in navigator&&!("documentMode"in document),qi=Wt("webkit"),ou=Wt("android"),ca=Wt("android 2")||Wt("android 3"),sd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Hr=ou&&Wt("Google")&&sd<537&&!("AudioNode"in window),Ls=!!window.opera,ha=!mt&&Wt("chrome"),bs=Wt("gecko")&&!qi&&!Ls&&!Ur,od=!ha&&Wt("safari"),au=Wt("phantom"),da="OTransition"in Br,lu=navigator.platform.indexOf("Win")===0,$i=Ur&&"transition"in Br,Wr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ca,Ns="MozPerspective"in Br,fi=!window.L_DISABLE_3D&&($i||Wr||Ns)&&!da&&!au,Zi=typeof orientation<"u"||Wt("mobile"),Ms=Zi&&qi,uu=Zi&&Wr,Gi=!window.PointerEvent&&window.MSPointerEvent,fa=!!(window.PointerEvent||Gi),gt="ontouchstart"in window||!!window.TouchEvent,cu=!window.L_NO_TOUCH&&(gt||fa),qr=Zi&&Ls,$r=Zi&&bs,ad=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ld=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),Ki=function(){return!!document.createElement("canvas").getContext}(),pa=!!(document.createElementNS&&su("svg").createSVGRect),ud=!!pa&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Os=!pa&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),hu=navigator.platform.indexOf("Mac")===0,du=navigator.platform.indexOf("Linux")===0;function Wt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var se={ie:Ur,ielt9:pt,edge:mt,webkit:qi,android:ou,android23:ca,androidStock:Hr,opera:Ls,chrome:ha,gecko:bs,safari:od,phantom:au,opera12:da,win:lu,ie3d:$i,webkit3d:Wr,gecko3d:Ns,any3d:fi,mobile:Zi,mobileWebkit:Ms,mobileWebkit3d:uu,msPointer:Gi,pointer:fa,touch:cu,touchNative:gt,mobileOpera:qr,mobileGecko:$r,retina:ad,passiveEvents:ld,canvas:Ki,svg:pa,vml:Os,inlineSvg:ud,mac:hu,linux:du},fu=se.msPointer?"MSPointerDown":"pointerdown",An=se.msPointer?"MSPointerMove":"pointermove",ma=se.msPointer?"MSPointerUp":"pointerup",ga=se.msPointer?"MSPointerCancel":"pointercancel",Zr={touchstart:fu,touchmove:An,touchend:ma,touchcancel:ga},Ds={touchstart:_a,touchmove:pn,touchend:pn,touchcancel:pn},pi={},pu=!1;function mu(r,a,c){return a==="touchstart"&&Gr(),Ds[a]?(c=Ds[a].bind(this,c),r.addEventListener(Zr[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function cd(r,a,c){if(!Zr[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Zr[a],c,!1)}function Vs(r){pi[r.pointerId]=r}function gu(r){pi[r.pointerId]&&(pi[r.pointerId]=r)}function zs(r){delete pi[r.pointerId]}function Gr(){pu||(document.addEventListener(fu,Vs,!0),document.addEventListener(An,gu,!0),document.addEventListener(ma,zs,!0),document.addEventListener(ga,zs,!0),pu=!0)}function pn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in pi)a.touches.push(pi[c]);a.changedTouches=[a],r(a)}}function _a(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&rt(a),pn(r,a)}function hd(r){var a={},c,d;for(d in r)c=r[d],a[d]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var _u=200;function yu(r,a){r.addEventListener("dblclick",a);var c=0,d;function g(v){if(v.detail!==1){d=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var k=Ta(v);if(!(k.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!k.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var j=Date.now();j-c<=_u?(d++,d===2&&a(hd(v))):d=1,c=j}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function vu(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Kr=Fs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mi=Fs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ya=mi==="webkitTransition"||mi==="OTransition"?mi+"End":"transitionend";function va(r){return typeof r=="string"?document.getElementById(r):r}function Qi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(r,null);c=d?d[a]:null}return c==="auto"?null:c}function Ce(r,a,c){var d=document.createElement(r);return d.className=a||"",c&&c.appendChild(d),d}function Le(r){var a=r.parentNode;a&&a.removeChild(r)}function Vt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function mn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function gn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Qr(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=$n(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ie(r,a){if(r.classList!==void 0)for(var c=z(a),d=0,g=c.length;d<g;d++)r.classList.add(c[d]);else if(!Qr(r,a)){var v=$n(r);gi(r,(v?v+" ":"")+a)}}function Fe(r,a){r.classList!==void 0?r.classList.remove(a):gi(r,R((" "+$n(r)+" ").replace(" "+a+" "," ")))}function gi(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function $n(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function qt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&wu(r,a)}function wu(r,a){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+d+"(opacity="+a+")"}function Fs(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function _i(r,a,c){var d=a||new U(0,0);r.style[Kr]=(se.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(r,a){r._leaflet_pos=a,se.any3d?_i(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function yi(r){return r._leaflet_pos||new U(0,0)}var kn,rn,js;if("onselectstart"in document)kn=function(){pe(window,"selectstart",rt)},rn=function(){Ve(window,"selectstart",rt)};else{var Yi=Fs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kn=function(){if(Yi){var r=document.documentElement.style;js=r[Yi],r[Yi]="none"}},rn=function(){Yi&&(document.documentElement.style[Yi]=js,js=void 0)}}function Bs(){pe(window,"dragstart",rt)}function Us(){Ve(window,"dragstart",rt)}var Yr,Zn;function wa(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Hs(),Yr=r,Zn=r.style.outlineStyle,r.style.outlineStyle="none",pe(window,"keydown",Hs))}function Hs(){Yr&&(Yr.style.outlineStyle=Zn,Yr=void 0,Zn=void 0,Ve(window,"keydown",Hs))}function Eu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function _n(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var dd={__proto__:null,TRANSFORM:Kr,TRANSITION:mi,TRANSITION_END:ya,get:va,getStyle:Qi,create:Ce,remove:Le,empty:Vt,toFront:mn,toBack:gn,hasClass:Qr,addClass:ie,removeClass:Fe,setClass:gi,getClass:$n,setOpacity:qt,testProp:Fs,setTransform:_i,setPosition:Xe,getPosition:yi,get disableTextSelection(){return kn},get enableTextSelection(){return rn},disableImageDrag:Bs,enableImageDrag:Us,preventOutline:wa,restoreOutline:Hs,getSizedParentNode:Eu,getScale:_n};function pe(r,a,c,d){if(a&&typeof a=="object")for(var g in a)Ws(r,g,a[g],c);else{a=z(a);for(var v=0,k=a.length;v<k;v++)Ws(r,a[v],c,d)}return this}var zt="_leaflet_events";function Ve(r,a,c,d){if(arguments.length===1)Xi(r),delete r[zt];else if(a&&typeof a=="object")for(var g in a)Xr(r,g,a[g],c);else if(a=z(a),arguments.length===2)Xi(r,function(j){return q(a,j)!==-1});else for(var v=0,k=a.length;v<k;v++)Xr(r,a[v],c,d);return this}function Xi(r,a){for(var c in r[zt]){var d=c.split(/\d/)[0];(!a||a(d))&&Xr(r,d,null,null,c)}}var vi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ws(r,a,c,d){var g=a+f(c)+(d?"_"+f(d):"");if(r[zt]&&r[zt][g])return this;var v=function(j){return c.call(d||r,j||window.event)},k=v;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?v=mu(r,a,v):se.touch&&a==="dblclick"?v=yu(r,v):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(vi[a]||a,v,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(v=function(j){j=j||window.event,xa(r,j)&&k(j)},r.addEventListener(vi[a],v,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,v),r[zt]=r[zt]||{},r[zt][g]=v}function Xr(r,a,c,d,g){g=g||a+f(c)+(d?"_"+f(d):"");var v=r[zt]&&r[zt][g];if(!v)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?cd(r,a,v):se.touch&&a==="dblclick"?vu(r,v):"removeEventListener"in r?r.removeEventListener(vi[a]||a,v,!1):r.detachEvent("on"+a,v),r[zt][g]=null}function Ne(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ea(r){return Ws(r,"wheel",Ne),this}function Jr(r){return pe(r,"mousedown touchstart dblclick contextmenu",Ne),r._leaflet_disable_click=!0,this}function rt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Gn(r){return rt(r),Ne(r),this}function Ta(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function es(r,a){if(!a)return new U(r.clientX,r.clientY);var c=_n(a),d=c.boundingClientRect;return new U((r.clientX-d.left)/c.x-a.clientLeft,(r.clientY-d.top)/c.y-a.clientTop)}var Kn=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ia(r){return se.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Kn:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function xa(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ts={__proto__:null,on:pe,off:Ve,stopPropagation:Ne,disableScrollPropagation:Ea,disableClickPropagation:Jr,preventDefault:rt,stop:Gn,getPropagationPath:Ta,getMousePosition:es,getWheelDelta:Ia,isExternalTarget:xa,addListener:pe,removeListener:Ve},Sa=we.extend({run:function(r,a,c,d){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=yi(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),ye=we.extend({options:{crs:jr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=D(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mi&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pe(this._proxy,ya,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var d=this.getZoomScale(a),g=this.getSize().divideBy(2),v=r instanceof U?r:this.latLngToContainerPoint(r),k=v.subtract(g).multiplyBy(1-1/d),j=this.containerPointToLatLng(g.add(k));return this.setView(j,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():ke(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),d=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(d));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var v=d.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),g),j=this.project(r.getNorthEast(),g),H=this.unproject(k.add(j).divideBy(2).add(v),g);return{center:H,zoom:g}},fitBounds:function(r,a){if(r=ke(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ie(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(r,a,c);this._stop();var d=this.project(this.getCenter()),g=this.project(r),v=this.getSize(),k=this._zoom;r=fe(r),a=a===void 0?k:a;var j=Math.max(v.x,v.y),H=j*this.getZoomScale(k,a),G=g.distanceTo(d)||1,te=1.42,ue=te*te;function ve(st){var Vu=st?-1:1,n1=st?H:j,i1=H*H-j*j+Vu*ue*ue*G*G,r1=2*n1*ue*G,_d=i1/r1,Wg=Math.sqrt(_d*_d+1)-_d,s1=Wg<1e-9?-18:Math.log(Wg);return s1}function Ft(st){return(Math.exp(st)-Math.exp(-st))/2}function _t(st){return(Math.exp(st)+Math.exp(-st))/2}function wn(st){return Ft(st)/_t(st)}var Zt=ve(0);function io(st){return j*(_t(Zt)/_t(Zt+te*st))}function XI(st){return j*(_t(Zt)*wn(Zt+te*st)-Ft(Zt))/ue}function JI(st){return 1-Math.pow(1-st,1.5)}var e1=Date.now(),Ug=(ve(1)-Zt)/te,t1=c.duration?1e3*c.duration:1e3*Ug*.8;function Hg(){var st=(Date.now()-e1)/t1,Vu=JI(st)*Ug;st<=1?(this._flyToFrame=M(Hg,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(XI(Vu)/G)),k),this.getScaleZoom(j/io(Vu),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Hg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=ke(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,ke(r));return c.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),d=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),v=this.project(r),k=this.getPixelBounds(),j=Te([k.min.add(c),k.max.subtract(d)]),H=j.getSize();if(!j.contains(v)){this._enforcingBounds=!0;var G=v.subtract(j.getCenter()),te=j.extend(v).getSize().subtract(H);g.x+=G.x<0?-te.x:te.x,g.y+=G.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=a.divideBy(2).round(),g=c.divideBy(2).round(),v=d.subtract(g);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,d=new Ie(a,c),g=d.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var k=this.getBoundsZoom(g);this.setView(d,v.maxZoom?Math.min(k,v.maxZoom):k)}var j={latlng:d,bounds:g,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(j[H]=r.coords[H]);this.fire("locationfound",j)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Le(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),d=Ce("div",c,a||this._mapPane);return r&&(this._panes[r]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ye(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=ke(r),c=X(c||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),v=this.getMaxZoom(),k=r.getNorthWest(),j=r.getSouthEast(),H=this.getSize().subtract(c),G=Te(this.project(j,d),this.project(k,d)).getSize(),te=se.any3d?this.options.zoomSnap:1,ue=H.x/G.x,ve=H.y/G.y,Ft=a?Math.max(ue,ve):Math.min(ue,ve);return d=this.getScaleZoom(Ft,d),te&&(d=Math.round(d/(te/100))*(te/100),d=a?Math.ceil(d/te)*te:Math.floor(d/te)*te),Math.max(g,Math.min(v,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var d=c.zoom(r*c.scale(a));return isNaN(d)?1/0:d},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ke(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return es(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=va(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pe(a,"scroll",this._onScroll,this),this._containerId=f(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ie(r,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Qi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ie(r.markerPane,"leaflet-zoom-hide"),ie(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Xe(this._mapPane,new U(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,d){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),d?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[f(this._container)]=this;var a=r?Ve:pe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],d,g=a==="mouseout"||a==="mouseover",v=r.target||r.srcElement,k=!1;v;){if(d=this._targets[f(v)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){k=!0;break}if(d&&d.listens(a,!0)&&(g&&!xa(v,r)||(c.push(d),g))||v===this._container)break;v=v.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&wa(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var d=s({},r);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var g=this._findEventTargets(r,a);if(c){for(var v=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&v.push(c[k]);g=v.concat(g)}if(g.length){a==="contextmenu"&&rt(r);var j=g[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var G=j.getLatLng&&(!j._radius||j._radius<=10);H.containerPoint=G?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=G?j.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,H,!0),H.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&q(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return yi(this._mapPane)||new U(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return Te([this.project(r.getSouthWest(),a)._subtract(d),this.project(r.getNorthWest(),a)._subtract(d),this.project(r.getSouthEast(),a)._subtract(d),this.project(r.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var d=this.project(r,a),g=this.getSize().divideBy(2),v=new he(d.subtract(g),d.add(g)),k=this._getBoundsOffset(v,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(d.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),d=new he(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(r,a,c){var d=Te(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=d.min.subtract(r.min),v=d.max.subtract(r.max),k=this._rebound(g.x,-v.x),j=this._rebound(g.y,-v.y);return new U(k,j)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),d=se.any3d?this.options.zoomSnap:1;return d&&(r=Math.round(r/d)*d),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Kr,d=this._proxy.style[c];_i(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Le(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();_i(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(g)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qs(r,a){return new ye(r,a)}var $t=De.extend({options:{position:"topright"},initialize:function(r){D(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),d=r._controlCorners[c];return ie(a,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Le(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Qn=function(r){return new $t(r)};ye.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ce("div",a+"control-container",this._container);function d(g,v){var k=a+g+" "+a+v;r[g+v]=Ce("div",k,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Le(this._controlCorners[r]);Le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Tu=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,d){return c<d?-1:d<c?1:0}},initialize:function(r,a,c){D(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in r)this._addLayer(r[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return $t.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(f(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Ce("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Jr(a),Ea(a);var d=this._section=Ce("section",r+"-list");c&&(this._map.on("click",this.collapse,this),pe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ce("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),pe(g,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){rt(v),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ce("div",r+"-base",d),this._separator=Ce("div",r+"-separator",d),this._overlaysList=Ce("div",r+"-overlays",d),a.appendChild(d)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&f(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vt(this._baseLayersList),Vt(this._overlaysList),this._layerControlInputs=[];var r,a,c,d,g=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),a=a||d.overlay,r=r||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(f(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),d;r.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(d),d.layerId=f(r.layer),pe(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var v=document.createElement("span");a.appendChild(v),v.appendChild(d),v.appendChild(g);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,d=[],g=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)a=r[v],c=this._getLayer(a.layerId).layer,a.checked?d.push(c):a.checked||g.push(c);for(v=0;v<g.length;v++)this._map.hasLayer(g[v])&&this._map.removeLayer(g[v]);for(v=0;v<d.length;v++)this._map.hasLayer(d[v])||this._map.addLayer(d[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,d=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,pe(r,"click",rt),this.expand();var a=this;setTimeout(function(){Ve(r,"click",rt),a._preventClick=!1})}}),Iu=function(r,a,c){return new Tu(r,a,c)},wi=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Ce("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,d,g){var v=Ce("a",c,d);return v.innerHTML=r,v.href="#",v.title=a,v.setAttribute("role","button"),v.setAttribute("aria-label",a),Jr(v),pe(v,"click",Gn),pe(v,"click",g,this),pe(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Fe(this._zoomInButton,a),Fe(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ie(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ie(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});ye.mergeOptions({zoomControl:!0}),ye.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var xu=function(r){return new wi(r)},Pa=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Ce("div",a),d=this.options;return this._addScales(d,a+"-line",c),r.on(d.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Ce("div",a,c)),r.imperial&&(this._iScale=Ce("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,d,g;a>5280?(c=a/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ca=function(r){return new Pa(r)},Aa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$s=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Aa+" ":"")+"Leaflet</a>"},initialize:function(r){D(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),Jr(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});ye.mergeOptions({attributionControl:!0}),ye.addInitHook(function(){this.options.attributionControl&&new $s().addTo(this)});var Zs=function(r){return new $s(r)};$t.Layers=Tu,$t.Zoom=wi,$t.Scale=Pa,$t.Attribution=$s,Qn.layers=Iu,Qn.zoom=xu,Qn.scale=Ca,Qn.attribution=Zs;var sn=De.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(r,a){return r.addHandler(a,this),this};var Su={Events:Qe},Yn=se.touch?"touchstart mousedown":"mousedown",Rn=we.extend({options:{clickTolerance:3},initialize:function(r,a,c,d){D(this,d),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(pe(this._dragStartTarget,Yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rn._dragging===this&&this.finishDrag(!0),Ve(this._dragStartTarget,Yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Qr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Rn._dragging===this&&this.finishDrag();return}if(!(Rn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Rn._dragging=this,this._preventOutline&&wa(this._element),Bs(),kn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Eu(this._element);this._startPoint=new U(a.clientX,a.clientY),this._startPos=yi(this._element),this._parentScale=_n(c);var d=r.type==="mousedown";pe(document,d?"mousemove":"touchmove",this._onMove,this),pe(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new U(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,rt(r),this._moved||(this.fire("dragstart"),this._moved=!0,ie(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Fe(document.body,"leaflet-dragging"),this._lastTarget&&(Fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ve(document,"mousemove touchmove",this._onMove,this),Ve(document,"mouseup touchend touchcancel",this._onUp,this),Us(),rn();var a=this._moved&&this._moving;this._moving=!1,Rn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ka(r,a,c){var d,g=[1,4,2,8],v,k,j,H,G,te,ue,ve;for(v=0,te=r.length;v<te;v++)r[v]._code=B(r[v],a);for(j=0;j<4;j++){for(ue=g[j],d=[],v=0,te=r.length,k=te-1;v<te;k=v++)H=r[v],G=r[k],H._code&ue?G._code&ue||(ve=F(G,H,ue,a,c),ve._code=B(ve,a),d.push(ve)):(G._code&ue&&(ve=F(G,H,ue,a,c),ve._code=B(ve,a),d.push(ve)),d.push(H));r=d}return r}function Ra(r,a){var c,d,g,v,k,j,H,G,te;if(!r||r.length===0)throw new Error("latlngs not passed");be(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ue=fe([0,0]),ve=ke(r),Ft=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());Ft<1700&&(ue=Gs(r));var _t=r.length,wn=[];for(c=0;c<_t;c++){var Zt=fe(r[c]);wn.push(a.project(fe([Zt.lat-ue.lat,Zt.lng-ue.lng])))}for(j=H=G=0,c=0,d=_t-1;c<_t;d=c++)g=wn[c],v=wn[d],k=g.y*v.x-v.y*g.x,H+=(g.x+v.x)*k,G+=(g.y+v.y)*k,j+=k*3;j===0?te=wn[0]:te=[H/j,G/j];var io=a.unproject(X(te));return fe([io.lat+ue.lat,io.lng+ue.lng])}function Gs(r){for(var a=0,c=0,d=0,g=0;g<r.length;g++){var v=fe(r[g]);a+=v.lat,c+=v.lng,d++}return fe([a/d,c/d])}var Ks={__proto__:null,clipPolygon:ka,polygonCenter:Ra,centroid:Gs};function At(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=p(r,c),r=Ji(r,c),r}function La(r,a,c){return Math.sqrt(me(r,a,c,!0))}function Pu(r,a,c){return me(r,a,c)}function Ji(r,a){var c=r.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var v,k=[];for(v=0;v<c;v++)g[v]&&k.push(r[v]);return k}function u(r,a,c,d,g){var v=0,k,j,H;for(j=d+1;j<=g-1;j++)H=me(r[j],r[d],r[g],!0),H>v&&(k=j,v=H);v>c&&(a[k]=1,u(r,a,c,d,k),u(r,a,c,k,g))}function p(r,a){for(var c=[r[0]],d=1,g=0,v=r.length;d<v;d++)J(r[d],r[g])>a&&(c.push(r[d]),g=d);return g<v-1&&c.push(r[v-1]),c}var _;function T(r,a,c,d,g){var v=d?_:B(r,c),k=B(a,c),j,H,G;for(_=k;;){if(!(v|k))return[r,a];if(v&k)return!1;j=v||k,H=F(r,a,j,c,g),G=B(H,c),j===v?(r=H,v=G):(a=H,k=G)}}function F(r,a,c,d,g){var v=a.x-r.x,k=a.y-r.y,j=d.min,H=d.max,G,te;return c&8?(G=r.x+v*(H.y-r.y)/k,te=H.y):c&4?(G=r.x+v*(j.y-r.y)/k,te=j.y):c&2?(G=H.x,te=r.y+k*(H.x-r.x)/v):c&1&&(G=j.x,te=r.y+k*(j.x-r.x)/v),new U(G,te,g)}function B(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function J(r,a){var c=a.x-r.x,d=a.y-r.y;return c*c+d*d}function me(r,a,c,d){var g=a.x,v=a.y,k=c.x-g,j=c.y-v,H=k*k+j*j,G;return H>0&&(G=((r.x-g)*k+(r.y-v)*j)/H,G>1?(g=c.x,v=c.y):G>0&&(g+=k*G,v+=j*G)),k=r.x-g,j=r.y-v,d?k*k+j*j:new U(g,v)}function be(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Me(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),be(r)}function tt(r,a){var c,d,g,v,k,j,H,G;if(!r||r.length===0)throw new Error("latlngs not passed");be(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var te=fe([0,0]),ue=ke(r),ve=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());ve<1700&&(te=Gs(r));var Ft=r.length,_t=[];for(c=0;c<Ft;c++){var wn=fe(r[c]);_t.push(a.project(fe([wn.lat-te.lat,wn.lng-te.lng])))}for(c=0,d=0;c<Ft-1;c++)d+=_t[c].distanceTo(_t[c+1])/2;if(d===0)G=_t[0];else for(c=0,v=0;c<Ft-1;c++)if(k=_t[c],j=_t[c+1],g=k.distanceTo(j),v+=g,v>d){H=(v-d)/g,G=[j.x-H*(j.x-k.x),j.y-H*(j.y-k.y)];break}var Zt=a.unproject(X(G));return fe([Zt.lat+te.lat,Zt.lng+te.lng])}var yn={__proto__:null,simplify:At,pointToSegmentDistance:La,closestPointOnSegment:Pu,clipSegment:T,_getEdgeIntersection:F,_getBitCode:B,_sqClosestPointOnSegment:me,isFlat:be,_flat:Me,polylineCenter:tt},Ln={project:function(r){return new U(r.lng,r.lat)},unproject:function(r){return new Ie(r.y,r.x)},bounds:new he([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,d=r.lat*a,g=this.R_MINOR/c,v=Math.sqrt(1-g*g),k=v*Math.sin(d),j=Math.tan(Math.PI/4-d/2)/Math.pow((1-k)/(1+k),v/2);return d=-c*Math.log(Math.max(j,1e-10)),new U(r.lng*a*c,d)},unproject:function(r){for(var a=180/Math.PI,c=this.R,d=this.R_MINOR/c,g=Math.sqrt(1-d*d),v=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(v),j=0,H=.1,G;j<15&&Math.abs(H)>1e-7;j++)G=g*Math.sin(k),G=Math.pow((1-G)/(1+G),g/2),H=Math.PI/2-2*Math.atan(v*G)-k,k+=H;return new Ie(k*a,r.x*a/c)}},Xn={__proto__:null,LonLat:Ln,Mercator:vn,SphericalMercator:la},Qs=s({},fn,{code:"EPSG:3395",projection:vn,transformation:function(){var r=.5/(Math.PI*vn.R);return Wi(r,.5,-r,.5)}()}),Ys=s({},fn,{code:"EPSG:4326",projection:Ln,transformation:Wi(1/180,1,-1/180,.5)}),RI=s({},ft,{projection:Ln,transformation:Wi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,d=a.lat-r.lat;return Math.sqrt(c*c+d*d)},infinite:!0});ft.Earth=fn,ft.EPSG3395=Qs,ft.EPSG3857=jr,ft.EPSG900913=ru,ft.EPSG4326=Ys,ft.Simple=RI;var bn=we.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[f(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[f(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});ye.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=f(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=f(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return f(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[f(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=f(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xs=bn.extend({initialize:function(r,a){D(this,a),this._layers={};var c,d;if(r)for(c=0,d=r.length;c<d;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[r]&&d[r].apply(d,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return f(r)}}),LI=function(r,a){return new Xs(r,a)},Ei=Xs.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Xs.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Xs.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ye;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),bI=function(r,a){return new Ei(r,a)},Js=De.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){D(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(r,a){var c=this.options,d=c[a+"Size"];typeof d=="number"&&(d=[d,d]);var g=X(d),v=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return se.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function NI(r){return new Js(r)}var ba=Js.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ba.imagePath!="string"&&(ba.imagePath=this._detectIconPath()),(this.options.imagePath||ba.imagePath)+Js.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,d,g){var v=d.exec(c);return v&&v[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ce("div","leaflet-default-icon-path",document.body),a=Qi(r,"background-image")||Qi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Ig=sn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Rn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ie(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,v=yi(a._icon),k=c.getPixelBounds(),j=c.getPixelOrigin(),H=Te(k.min._subtract(j).add(g),k.max._subtract(j).subtract(g));if(!H.contains(v)){var G=X((Math.max(H.max.x,v.x)-H.max.x)/(k.max.x-H.max.x)-(Math.min(H.min.x,v.x)-H.min.x)/(k.min.x-H.min.x),(Math.max(H.max.y,v.y)-H.max.y)/(k.max.y-H.max.y)-(Math.min(H.min.y,v.y)-H.min.y)/(k.min.y-H.min.y)).multiplyBy(d);c.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),Xe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=M(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,d=yi(a._icon),g=a._map.layerPointToLatLng(d);c&&Xe(c,d),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Cu=bn.extend({options:{icon:new ba,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){D(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ie(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pe(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),v=!1;g!==this._shadow&&(this._removeShadow(),v=!0),g&&(ie(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(this._icon,"focus",this._panOnFocus,this),Le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Le(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ig)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ig(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&qt(this._icon,r),this._shadow&&qt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),d=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function MI(r,a){return new Cu(r,a)}var er=bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return D(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Au=er.extend({options:{fill:!0,radius:10},initialize:function(r,a){D(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return er.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),d=[r+c,a+c];this._pxBounds=new he(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function OI(r,a){return new Au(r,a)}var fd=Au.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),D(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ye(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:er.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===fn.distance){var g=Math.PI/180,v=this._mRadius/fn.R/g,k=c.project([a+v,r]),j=c.project([a-v,r]),H=k.add(j).divideBy(2),G=c.unproject(H).lat,te=Math.acos((Math.cos(v*g)-Math.sin(a*g)*Math.sin(G*g))/(Math.cos(a*g)*Math.cos(G*g)))/g;(isNaN(te)||te===0)&&(te=v/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:H.x-c.project([G,r-te]).x,this._radiusY=H.y-k.y}else{var ue=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ue).x}this._updateBounds()}});function DI(r,a,c){return new fd(r,a,c)}var Ti=er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){D(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,d=me,g,v,k=0,j=this._parts.length;k<j;k++)for(var H=this._parts[k],G=1,te=H.length;G<te;G++){g=H[G-1],v=H[G];var ue=d(r,g,v,!0);ue<a&&(a=ue,c=d(r,g,v))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ye,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return be(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=be(r),d=0,g=r.length;d<g;d++)c?(a[d]=fe(r[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(r[d]);return a},_project:function(){var r=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new U(r,r);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var d=r[0]instanceof Ie,g=r.length,v,k;if(d){for(k=[],v=0;v<g;v++)k[v]=this._map.latLngToLayerPoint(r[v]),c.extend(k[v]);a.push(k)}else for(v=0;v<g;v++)this._projectLatlngs(r[v],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,d,g,v,k,j,H;for(c=0,g=0,v=this._rings.length;c<v;c++)for(H=this._rings[c],d=0,k=H.length;d<k-1;d++)j=T(H[d],H[d+1],r,d,!0),j&&(a[g]=a[g]||[],a[g].push(j[0]),(j[1]!==H[d+1]||d===k-2)&&(a[g].push(j[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,d=r.length;c<d;c++)r[c]=At(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,d,g,v,k,j,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,v=this._parts.length;c<v;c++)for(j=this._parts[c],d=0,k=j.length,g=k-1;d<k;g=d++)if(!(!a&&d===0)&&La(r,j[g],j[d])<=H)return!0;return!1}});function VI(r,a){return new Ti(r,a)}Ti._flat=Me;var eo=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ra(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Ti.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof Ie&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Ti.prototype._setLatLngs.call(this,r),be(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return be(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new U(a,a);if(r=new he(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,v;d<g;d++)v=ka(this._rings[d],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,d,g,v,k,j,H,G;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,H=this._parts.length;v<H;v++)for(c=this._parts[v],k=0,G=c.length,j=G-1;k<G;j=k++)d=c[k],g=c[j],d.y>r.y!=g.y>r.y&&r.x<(g.x-d.x)*(r.y-d.y)/(g.y-d.y)+d.x&&(a=!a);return a||Ti.prototype._containsPoint.call(this,r,!0)}});function zI(r,a){return new eo(r,a)}var Ii=Ei.extend({initialize:function(r,a){D(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,d,g;if(a){for(c=0,d=a.length;c<d;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var k=ku(r,v);return k?(k.feature=bu(r),k.defaultOptions=k.options,this.resetStyle(k),v.onEachFeature&&v.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function ku(r,a){var c=r.type==="Feature"?r.geometry:r,d=c?c.coordinates:null,g=[],v=a&&a.pointToLayer,k=a&&a.coordsToLatLng||pd,j,H,G,te;if(!d&&!c)return null;switch(c.type){case"Point":return j=k(d),xg(v,r,j,a);case"MultiPoint":for(G=0,te=d.length;G<te;G++)j=k(d[G]),g.push(xg(v,r,j,a));return new Ei(g);case"LineString":case"MultiLineString":return H=Ru(d,c.type==="LineString"?0:1,k),new Ti(H,a);case"Polygon":case"MultiPolygon":return H=Ru(d,c.type==="Polygon"?1:2,k),new eo(H,a);case"GeometryCollection":for(G=0,te=c.geometries.length;G<te;G++){var ue=ku({geometry:c.geometries[G],type:"Feature",properties:r.properties},a);ue&&g.push(ue)}return new Ei(g);case"FeatureCollection":for(G=0,te=c.features.length;G<te;G++){var ve=ku(c.features[G],a);ve&&g.push(ve)}return new Ei(g);default:throw new Error("Invalid GeoJSON object.")}}function xg(r,a,c,d){return r?r(a,c):new Cu(c,d&&d.markersInheritOptions&&d)}function pd(r){return new Ie(r[1],r[0],r[2])}function Ru(r,a,c){for(var d=[],g=0,v=r.length,k;g<v;g++)k=a?Ru(r[g],a-1,c):(c||pd)(r[g]),d.push(k);return d}function md(r,a){return r=fe(r),r.alt!==void 0?[E(r.lng,a),E(r.lat,a),E(r.alt,a)]:[E(r.lng,a),E(r.lat,a)]}function Lu(r,a,c,d){for(var g=[],v=0,k=r.length;v<k;v++)g.push(a?Lu(r[v],be(r[v])?0:a-1,c,d):md(r[v],d));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function to(r,a){return r.feature?s({},r.feature,{geometry:a}):bu(a)}function bu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var gd={toGeoJSON:function(r){return to(this,{type:"Point",coordinates:md(this.getLatLng(),r)})}};Cu.include(gd),fd.include(gd),Au.include(gd),Ti.include({toGeoJSON:function(r){var a=!be(this._latlngs),c=Lu(this._latlngs,a?1:0,!1,r);return to(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),eo.include({toGeoJSON:function(r){var a=!be(this._latlngs),c=a&&!be(this._latlngs[0]),d=Lu(this._latlngs,c?2:a?1:0,!0,r);return a||(d=[d]),to(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),Xs.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),to(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var v=g.toGeoJSON(r);if(c)d.push(v.geometry);else{var k=bu(v);k.type==="FeatureCollection"?d.push.apply(d,k.features):d.push(k)}}}),c?to(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Sg(r,a){return new Ii(r,a)}var FI=Sg,Nu=bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=ke(a),D(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&mn(this._image),this},bringToBack:function(){return this._map&&gn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ke(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Ce("img");if(ie(a,"leaflet-image-layer"),this._zoomAnimated&&ie(a,"leaflet-zoom-animated"),this.options.className&&ie(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;_i(this._image,c,a)},_reset:function(){var r=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){qt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),jI=function(r,a,c){return new Nu(r,a,c)},Pg=Nu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Ce("video");if(ie(a,"leaflet-image-layer"),this._zoomAnimated&&ie(a,"leaflet-zoom-animated"),this.options.className&&ie(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),d=[],g=0;g<c.length;g++)d.push(c[g].src);this._url=c.length>0?d:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var k=Ce("source");k.src=this._url[v],a.appendChild(k)}}});function BI(r,a,c){return new Pg(r,a,c)}var Cg=Nu.extend({_initImage:function(){var r=this._image=this._url;ie(r,"leaflet-image-layer"),this._zoomAnimated&&ie(r,"leaflet-zoom-animated"),this.options.className&&ie(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function UI(r,a,c){return new Cg(r,a,c)}var Jn=bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof Ie||O(r))?(this._latlng=fe(r),D(this,a)):(D(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&qt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&qt(this._container,1),this.bringToFront(),this.options.interactive&&(ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(qt(this._container,0),this._removeTimeout=setTimeout(l(Le,void 0,this._container),200)):Le(this._container),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mn(this._container),this},bringToBack:function(){return this._map&&gn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ei){a=null;var c=this._source._layers;for(var d in c)if(c[d]._map){a=c[d];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,r.add(c)):a=a.add(r).add(c);var d=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});ye.include({_initOverlay:function(r,a,c,d){var g=a;return g instanceof r||(g=new r(d).setContent(a)),c&&g.setLatLng(c),g}}),bn.include({_initOverlay:function(r,a,c,d){var g=c;return g instanceof r?(D(g,d),g._source=this):(g=a&&!d?a:new r(d,this),g.setContent(c)),g}});var Mu=Jn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Jn.prototype.openOn.call(this,r)},onAdd:function(r){Jn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof er||this._source.on("preclick",Ne))},onRemove:function(r){Jn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof er||this._source.off("preclick",Ne))},getEvents:function(){var r=Jn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Ce("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ce("div",r+"-content-wrapper",a);if(this._contentNode=Ce("div",r+"-content",c),Jr(a),Ea(this._contentNode),pe(a,"contextmenu",Ne),this._tipContainer=Ce("div",r+"-tip-container",a),this._tip=Ce("div",r+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Ce("a",r+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',pe(d,"click",function(g){rt(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var d=r.offsetHeight,g=this.options.maxHeight,v="leaflet-popup-scrolled";g&&d>g?(a.height=g+"px",ie(r,v)):Fe(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Qi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,d=this._containerWidth,g=new U(this._containerLeft,-c-this._containerBottom);g._add(yi(this._container));var v=r.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),j=X(this.options.autoPanPaddingTopLeft||k),H=X(this.options.autoPanPaddingBottomRight||k),G=r.getSize(),te=0,ue=0;v.x+d+H.x>G.x&&(te=v.x+d-G.x+H.x),v.x-te-j.x<0&&(te=v.x-j.x),v.y+c+H.y>G.y&&(ue=v.y+c-G.y+H.y),v.y-ue-j.y<0&&(ue=v.y-j.y),(te||ue)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([te,ue]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),HI=function(r,a){return new Mu(r,a)};ye.mergeOptions({closePopupOnClick:!0}),ye.include({openPopup:function(r,a,c){return this._initOverlay(Mu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),bn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Mu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ei||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Gn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ou=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Jn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Jn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Jn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,d=this._map,g=this._container,v=d.latLngToContainerPoint(d.getCenter()),k=d.layerPointToContainerPoint(r),j=this.options.direction,H=g.offsetWidth,G=g.offsetHeight,te=X(this.options.offset),ue=this._getAnchor();j==="top"?(a=H/2,c=G):j==="bottom"?(a=H/2,c=0):j==="center"?(a=H/2,c=G/2):j==="right"?(a=0,c=G/2):j==="left"?(a=H,c=G/2):k.x<v.x?(j="right",a=0,c=G/2):(j="left",a=H+(te.x+ue.x)*2,c=G/2),r=r.subtract(X(a,c,!0)).add(te).add(ue),Fe(g,"leaflet-tooltip-right"),Fe(g,"leaflet-tooltip-left"),Fe(g,"leaflet-tooltip-top"),Fe(g,"leaflet-tooltip-bottom"),ie(g,"leaflet-tooltip-"+j),Xe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&qt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),WI=function(r,a){return new Ou(r,a)};ye.include({openTooltip:function(r,a,c){return this._initOverlay(Ou,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),bn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ou,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ei||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(pe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),pe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,d;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),d=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Ag=Js.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Vt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=X(c.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function qI(r){return new Ag(r)}Js.Default=ba;var Na=bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){D(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Le(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof U?r:new U(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),d=0,g=a.length,v;d<g;d++)v=a[d].style.zIndex,a[d]!==this._container&&v&&(c=r(c,+v));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){qt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var v=Math.min(1,(r-g.loaded)/200);qt(g.el,v),v<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Le(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[r],g=this._map;return d||(d=this._levels[r]={},d.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),d.zoom=r,this._setZoomTransform(d,g.getCenter(),g.getZoom()),w(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Le(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,d){var g=Math.floor(r/2),v=Math.floor(a/2),k=c-1,j=new U(+g,+v);j.z=+k;var H=this._tileCoordsToKey(j),G=this._tiles[H];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),k>d?this._retainParent(g,v,k,d):!1)},_retainChildren:function(r,a,c,d){for(var g=2*r;g<2*r+2;g++)for(var v=2*a;v<2*a+2;v++){var k=new U(g,v);k.z=c+1;var j=this._tileCoordsToKey(k),H=this._tiles[j];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<d&&this._retainChildren(g,v,c+1,d)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,d){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var v=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||v)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var d=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?_i(r.el,g,d):Xe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),v=a.getSize().divideBy(d*2);return new he(g.subtract(v),g.add(v))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(d),v=g.getCenter(),k=[],j=this.options.keepBuffer,H=new he(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var te=this._tiles[G].coords;(te.z!==this._tileZoom||!H.contains(new U(te.x,te.y)))&&(this._tiles[G].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var ue=g.min.y;ue<=g.max.y;ue++)for(var ve=g.min.x;ve<=g.max.x;ve++){var Ft=new U(ve,ue);if(Ft.z=this._tileZoom,!!this._isValidTile(Ft)){var _t=this._tiles[this._tileCoordsToKey(Ft)];_t?_t.current=!0:k.push(Ft)}}if(k.sort(function(Zt,io){return Zt.distanceTo(v)-io.distanceTo(v)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wn=document.createDocumentFragment();for(ve=0;ve<k.length;ve++)this._addTile(k[ve],wn);this._level.el.appendChild(wn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(r);return ke(this.options.bounds).overlaps(d)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),d=r.scaleBy(c),g=d.add(c),v=a.unproject(d,r.z),k=a.unproject(g,r.z);return[v,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ye(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new U(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Le(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ie(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,se.ielt9&&this.options.opacity<1&&qt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),d=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&M(l(this._tileReady,this,r,null,g)),Xe(g,c),this._tiles[d]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var d=this._tileCoordsToKey(r);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(qt(c.el,0),V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ie(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new U(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new he(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function $I(r){return new Na(r)}var no=Na.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=D(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return pe(c,"load",l(this._tileOnLoad,this,a,c)),pe(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:se.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return S(this._url,s(a,this.options))},_tileOnLoad:function(r,a){se.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(r=a-r),r+d},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Q;var c=this._tiles[r].coords;Le(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Q),Na.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return Na.prototype._tileReady.call(this,r,a,c)}});function kg(r,a){return new no(r,a)}var Rg=no.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var d in a)d in this.options||(c[d]=a[d]);a=D(this,a);var g=a.detectRetina&&se.retina?2:1,v=this.getTileSize();c.width=v.x*g,c.height=v.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,no.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,d=Te(c.project(a[0]),c.project(a[1])),g=d.min,v=d.max,k=(this._wmsVersion>=1.3&&this._crs===Ys?[g.y,g.x,v.y,v.x]:[g.x,g.y,v.x,v.y]).join(","),j=no.prototype.getTileUrl.call(this,r);return j+W(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function ZI(r,a){return new Rg(r,a)}no.WMS=Rg,kg.wms=ZI;var xi=bn.extend({options:{padding:.1},initialize:function(r){D(this,r),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),v=d.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));se.any3d?_i(this._container,v,c):Xe(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lg=xi.extend({options:{tolerance:0},getEvents:function(){var r=xi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");pe(r,"mousemove",this._onMouseMove,this),pe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,Le(this._container),Ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),d=se.retina?2:1;Xe(a,r.min),a.width=d*c.x,a.height=d*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){xi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[f(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,d=a.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete r._order,delete this._layers[f(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],d,g;for(g=0;g<a.length;g++){if(d=Number(a[g]),isNaN(d))return;c.push(d)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)r=d.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,d,g,v,k=r._parts,j=k.length,H=this._ctx;if(j){for(H.beginPath(),c=0;c<j;c++){for(d=0,g=k[c].length;d<g;d++)v=k[c][d],H[d?"lineTo":"moveTo"](v.x,v.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,d=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||d)/d;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,d,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,d,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,d,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(r),d&&(ie(this._container,"leaflet-interactive"),this._fireEvent([d],r,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function bg(r){return se.canvas?new Lg(r):null}var Ma=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),GI={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ma("shape");ie(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ma("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Le(a),r.removeInteractiveTarget(a),delete this._layers[f(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,d=r.options,g=r._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(a||(a=r._stroke=Ma("stroke")),g.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=O(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(g.removeChild(a),r._stroke=null),d.fill?(c||(c=r._fill=Ma("fill")),g.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),d=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){mn(r._container)},_bringToBack:function(r){gn(r._container)}},Du=se.vml?Ma:su,Oa=xi.extend({_initContainer:function(){this._container=Du("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Du("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Le(this._container),Ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Du("path");r.options.className&&ie(a,r.options.className),r.options.interactive&&ie(a,"leaflet-interactive"),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Le(r._path),r.removeInteractiveTarget(r._path),delete this._layers[f(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Rs(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),d=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+d+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,v)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){mn(r._path)},_bringToBack:function(r){gn(r._path)}});se.vml&&Oa.include(GI);function Ng(r){return se.svg||se.vml?new Oa(r):null}ye.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&bg(r)||Ng(r)}});var Mg=eo.extend({initialize:function(r,a){eo.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ke(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function KI(r,a){return new Mg(r,a)}Oa.create=Du,Oa.pointsToPath=Rs,Ii.geometryToLayer=ku,Ii.coordsToLatLng=pd,Ii.coordsToLatLngs=Ru,Ii.latLngToCoords=md,Ii.latLngsToCoords=Lu,Ii.getFeature=to,Ii.asFeature=bu,ye.mergeOptions({boxZoom:!0});var Og=sn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kn(),Bs(),this._startPoint=this._map.mouseEventToContainerPoint(r),pe(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new he(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Le(this._box),Fe(this._container,"leaflet-crosshair")),rn(),Us(),Ve(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ye.addInitHook("addHandler","boxZoom",Og),ye.mergeOptions({doubleClickZoom:!0});var Dg=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),d=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-d:c+d;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});ye.addInitHook("addHandler","doubleClickZoom",Dg),ye.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vg=sn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Rn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Fe(this._map._container,"leaflet-grab"),Fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ke(this._map.options.maxBounds);this._offsetLimit=Te(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-a+c)%r+a-c,v=(d+a+c)%r-a-c,k=Math.abs(g+c)<Math.abs(v+c)?g:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,d=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),d)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,j=g.multiplyBy(k/v),H=j.distanceTo([0,0]),G=Math.min(c.inertiaMaxSpeed,H),te=j.multiplyBy(G/H),ue=G/(c.inertiaDeceleration*k),ve=te.multiplyBy(-ue/2).round();!ve.x&&!ve.y?a.fire("moveend"):(ve=a._limitOffset(ve,a.options.maxBounds),M(function(){a.panBy(ve,{duration:ue,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});ye.addInitHook("addHandler","dragging",Vg),ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zg=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),pe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,d=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,d,g;for(d=0,g=c.left.length;d<g;d++)a[c.left[d]]=[-1*r,0];for(d=0,g=c.right.length;d<g;d++)a[c.right[d]]=[r,0];for(d=0,g=c.down.length;d<g;d++)a[c.down[d]]=[0,r];for(d=0,g=c.up.length;d<g;d++)a[c.up[d]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,d,g;for(d=0,g=c.zoomIn.length;d<g;d++)a[c.zoomIn[d]]=r;for(d=0,g=c.zoomOut.length;d<g;d++)a[c.zoomOut[d]]=-r},_addHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,d;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[a],r.shiftKey&&(d=X(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(X(d),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(g)}else c.panBy(d)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Gn(r)}}});ye.addInitHook("addHandler","keyboard",zg),ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fg=sn.extend({addHooks:function(){pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Ia(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),Gn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,v=c?Math.ceil(g/c)*c:g,k=r._limitZoom(a+(this._delta>0?v:-v))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});ye.addInitHook("addHandler","scrollWheelZoom",Fg);var QI=600;ye.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var jg=sn.extend({addHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new U(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(pe(document,"touchend",rt),pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),QI),pe(document,"touchend touchcancel contextmenu",this._cancel,this),pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ve(document,"touchend",rt),Ve(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new U(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});ye.addInitHook("addHandler","tapHold",jg),ye.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Bg=sn.extend({addHooks:function(){ie(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),pe(document,"touchmove",this._onTouchMove,this),pe(document,"touchend touchcancel",this._onTouchEnd,this),rt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var v=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&v.x===0&&v.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(k,this,!0),rt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ye.addInitHook("addHandler","touchZoom",Bg),ye.BoxZoom=Og,ye.DoubleClickZoom=Dg,ye.Drag=Vg,ye.Keyboard=zg,ye.ScrollWheelZoom=Fg,ye.TapHold=jg,ye.TouchZoom=Bg,n.Bounds=he,n.Browser=se,n.CRS=ft,n.Canvas=Lg,n.Circle=fd,n.CircleMarker=Au,n.Class=De,n.Control=$t,n.DivIcon=Ag,n.DivOverlay=Jn,n.DomEvent=ts,n.DomUtil=dd,n.Draggable=Rn,n.Evented=we,n.FeatureGroup=Ei,n.GeoJSON=Ii,n.GridLayer=Na,n.Handler=sn,n.Icon=Js,n.ImageOverlay=Nu,n.LatLng=Ie,n.LatLngBounds=Ye,n.Layer=bn,n.LayerGroup=Xs,n.LineUtil=yn,n.Map=ye,n.Marker=Cu,n.Mixin=Su,n.Path=er,n.Point=U,n.PolyUtil=Ks,n.Polygon=eo,n.Polyline=Ti,n.Popup=Mu,n.PosAnimation=Sa,n.Projection=Xn,n.Rectangle=Mg,n.Renderer=xi,n.SVG=Oa,n.SVGOverlay=Cg,n.TileLayer=no,n.Tooltip=Ou,n.Transformation=ua,n.Util=A,n.VideoOverlay=Pg,n.bind=l,n.bounds=Te,n.canvas=bg,n.circle=DI,n.circleMarker=OI,n.control=Qn,n.divIcon=qI,n.extend=s,n.featureGroup=bI,n.geoJSON=Sg,n.geoJson=FI,n.gridLayer=$I,n.icon=NI,n.imageOverlay=jI,n.latLng=fe,n.latLngBounds=ke,n.layerGroup=LI,n.map=qs,n.marker=MI,n.point=X,n.polygon=zI,n.polyline=VI,n.popup=HI,n.rectangle=KI,n.setOptions=D,n.stamp=f,n.svg=Ng,n.svgOverlay=UI,n.tileLayer=kg,n.tooltip=WI,n.transformation=Wi,n.version=i,n.videoOverlay=BI;var YI=window.L;n.noConflict=function(){return window.L=YI,this},window.L=n})})(ep,ep.exports);var $l=ep.exports;const Pm=Mv($l);function Cm(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Am(t,e){return e==null?function(i,s){const o=oe.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=oe.useRef();o.current||(o.current=t(i,s));const l=oe.useRef(i),{instance:h}=o.current;return oe.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function FS(t,e){oe.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function X0(t){return function(n){const i=xm(),s=t(Sm(n,i),i);return G0(i.map,n.attribution),Y0(s.current,n.eventHandlers),FS(s.current,i),s}}function jS(t,e){const n=Am(t,e),i=X0(n);return OS(i)}function BS(t,e){const n=Am(t),i=zS(n,e);return DS(i)}function US(t,e){const n=Am(t,e),i=X0(n);return VS(i)}function HS(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function WS(){return xm().map}function tp(){return tp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tp.apply(this,arguments)}function qS({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:f,zoom:m,...y},w){const[E]=oe.useState({className:s,id:o,style:h}),[R,z]=oe.useState(null);oe.useImperativeHandle(w,()=>(R==null?void 0:R.map)??null,[R]);const D=oe.useCallback(b=>{if(b!==null&&R===null){const S=new $l.Map(b,y);n!=null&&m!=null?S.setView(n,m):t!=null&&S.fitBounds(t,e),f!=null&&S.whenReady(f),z(NS(S))}},[]);oe.useEffect(()=>()=>{R==null||R.map.remove()},[R]);const W=R?fl.createElement(Q0,{value:R},i):l??null;return fl.createElement("div",tp({},E,{ref:D}),W)}const $S=oe.forwardRef(qS),ey=jS(function({position:e,...n},i){const s=new $l.Marker(e,n);return Cm(s,MS(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),ZS=BS(function(e,n){const i=new $l.Popup(e,n.overlayContainer);return Cm(i,n)},function(e,n,{position:i},s){oe.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function f(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:f}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),GS=US(function({url:e,...n},i){const s=new $l.TileLayer(e,Sm(n,i));return Cm(s,i)},function(e,n,i){HS(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});delete Pm.Icon.Default.prototype._getIconUrl;Pm.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const KS=({center:t})=>{const e=WS();return oe.useEffect(()=>{t&&e.setView(t)},[t,e]),null};function ty({center:t,vehicles:e,selectedVehicle:n,onVehicleSelect:i}){const s=new Pm.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/3097/3097180.png",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});return x.jsxs($S,{center:t,zoom:15,scrollWheelZoom:!0,zoomControl:!1,style:{height:"100%",width:"100%"},children:[x.jsx(GS,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.jsx(KS,{center:t}),e.map(o=>x.jsx(ey,{position:[o.lat,o.lng],icon:s,eventHandlers:{click:()=>i(o)}},o.id)),x.jsx(ey,{position:t,children:x.jsx(ZS,{children:"You are here"})})]})}const QS=()=>{};var ny={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YS=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,f=s+2<t.length,m=f?t[s+2]:0,y=o>>2,w=(o&3)<<4|h>>4;let E=(h&15)<<2|m>>6,R=m&63;f||(R=64,l||(E=64)),i.push(n[y],n[w],n[E],n[R])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||w==null)throw new XS;const E=o<<2|h>>4;if(i.push(E),m!==64){const R=h<<4&240|m>>2;if(i.push(R),w!==64){const z=m<<6&192|w;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JS=function(t){const e=J0(t);return eE.encodeByteArray(e,!0)},eh=function(t){return JS(t).replace(/\./g,"")},tE=function(t){try{return eE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=()=>eP().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof ny>"u")return;const t=ny.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tE(t[1]);return e&&JSON.parse(e)},Mh=()=>{try{return QS()||tP()||nP()||iP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nE=t=>{var e,n;return(n=(e=Mh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rP=t=>{const e=nE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},iE=()=>{var t;return(t=Mh())==null?void 0:t.config},rE=t=>{var e;return(e=Mh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[eh(JSON.stringify(n)),eh(JSON.stringify(l)),""].join(".")}const al={};function aP(){const t={prod:[],emulator:[]};for(const e of Object.keys(al))al[e]?t.emulator.push(e):t.prod.push(e);return t}function lP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iy=!1;function oE(t,e){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||al[t]===e||al[t]||iy)return;al[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=aP().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{iy=!0,l()},E}function y(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=lP(i),R=n("text"),z=document.getElementById(R)||document.createElement("span"),D=n("learnmore"),W=document.getElementById(D)||document.createElement("a"),b=n("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const O=E.element;h(O),y(W,D);const q=m();f(S,b),O.append(S,z,W,q),document.body.appendChild(O)}o?(z.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function cP(){var e;const t=(e=Mh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pP(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mP(){return!cP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gP(){try{return typeof indexedDB=="object"}catch{return!1}}function _P(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="FirebaseError";class Hi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=yP,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?vP(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Hi(s,h,i)}}function vP(t,e){return t.replace(wP,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const wP=/\{\$([^}]+)}/g;function EP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(ry(o)&&ry(l)){if(!vs(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function ry(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function TP(t,e){const n=new IP(t,e);return n.subscribe.bind(n)}class IP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Wd),s.error===void 0&&(s.error=Wd),s.complete===void 0&&(s.complete=Wd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CP(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PP(t){return t===rs?void 0:t}function CP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const kP={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},RP=xe.INFO,LP={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},bP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=LP[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=RP,this._logHandler=bP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const NP=(t,e)=>e.some(n=>t instanceof n);let sy,oy;function MP(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OP(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aE=new WeakMap,np=new WeakMap,lE=new WeakMap,qd=new WeakMap,Rm=new WeakMap;function DP(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Er(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&aE.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function VP(t){if(np.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});np.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zP(t){ip=t(ip)}function FP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($d(this),e,...n);return lE.set(i,e.sort?e.sort():[e]),Er(i)}:OP().includes(t)?function(...e){return t.apply($d(this),e),Er(aE.get(this))}:function(...e){return Er(t.apply($d(this),e))}}function jP(t){return typeof t=="function"?FP(t):(t instanceof IDBTransaction&&VP(t),NP(t,MP())?new Proxy(t,ip):t)}function Er(t){if(t instanceof IDBRequest)return DP(t);if(qd.has(t))return qd.get(t);const e=jP(t);return e!==t&&(qd.set(t,e),Rm.set(e,t)),e}const $d=t=>Rm.get(t);function BP(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Er(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Er(l.result),f.oldVersion,f.newVersion,Er(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const UP=["get","getKey","getAll","getAllKeys","count"],HP=["put","add","delete","clear"],Zd=new Map;function ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zd.get(e))return Zd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=HP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||UP.includes(n)))return;const o=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&f.done]))[0]};return Zd.set(e,o),o}zP(t=>({...t,get:(e,n,i)=>ay(e,n)||t.get(e,n,i),has:(e,n)=>!!ay(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",ly="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new km("@firebase/app"),$P="@firebase/app-compat",ZP="@firebase/analytics-compat",GP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",eC="@firebase/data-connect",tC="@firebase/database-compat",nC="@firebase/functions",iC="@firebase/functions-compat",rC="@firebase/installations",sC="@firebase/installations-compat",oC="@firebase/messaging",aC="@firebase/messaging-compat",lC="@firebase/performance",uC="@firebase/performance-compat",cC="@firebase/remote-config",hC="@firebase/remote-config-compat",dC="@firebase/storage",fC="@firebase/storage-compat",pC="@firebase/firestore",mC="@firebase/ai",gC="@firebase/firestore-compat",_C="firebase",yC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",vC={[rp]:"fire-core",[$P]:"fire-core-compat",[GP]:"fire-analytics",[ZP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[eC]:"fire-data-connect",[tC]:"fire-rtdb-compat",[nC]:"fire-fn",[iC]:"fire-fn-compat",[rC]:"fire-iid",[sC]:"fire-iid-compat",[oC]:"fire-fcm",[aC]:"fire-fcm-compat",[lC]:"fire-perf",[uC]:"fire-perf-compat",[cC]:"fire-rc",[hC]:"fire-rc-compat",[dC]:"fire-gcs",[fC]:"fire-gcs-compat",[pC]:"fire-fst",[gC]:"fire-fst-compat",[mC]:"fire-vertex","fire-js":"fire-js",[_C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,wC=new Map,op=new Map;function uy(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bo(t){const e=t.name;if(op.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of th.values())uy(n,t);for(const n of wC.values())uy(n,t);return!0}function Lm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new Zl("app","Firebase",EC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=yC;function uE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:sp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=iE()),!n)throw Tr.create("no-options");const o=th.get(s);if(o){if(vs(n,o.options)&&vs(i,o.config))return o;throw Tr.create("duplicate-app",{appName:s})}const l=new AP(s);for(const f of op.values())l.addComponent(f);const h=new TC(n,i,l);return th.set(s,h),h}function cE(t=sp){const e=th.get(t);if(!e&&t===sp&&iE())return uE();if(!e)throw Tr.create("no-app",{appName:t});return e}function Ir(t,e,n){let i=vC[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(l.join(" "));return}Bo(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebase-heartbeat-database",xC=1,Ll="firebase-heartbeat-store";let Gd=null;function hE(){return Gd||(Gd=BP(IC,xC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Gd}async function SC(t){try{const n=(await hE()).transaction(Ll),i=await n.objectStore(Ll).get(dE(t));return await n.done,i}catch(e){if(e instanceof Hi)Vi.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function cy(t,e){try{const i=(await hE()).transaction(Ll,"readwrite");await i.objectStore(Ll).put(e,dE(t)),await i.done}catch(n){if(n instanceof Hi)Vi.warn(n.message);else{const i=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(i.message)}}}function dE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1024,CC=30;class AC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=hy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>CC){const l=LC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hy(),{heartbeatsToSend:i,unsentEntries:s}=kC(this._heartbeatsCache.heartbeats),o=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vi.warn(n),""}}}function hy(){return new Date().toISOString().substring(0,10)}function kC(t,e=PC){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),dy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class RC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gP()?_P().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dy(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}function LC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){Bo(new ws("platform-logger",e=>new WP(e),"PRIVATE")),Bo(new ws("heartbeat",e=>new AC(e),"PRIVATE")),Ir(rp,ly,t),Ir(rp,ly,"esm2020"),Ir("fire-js","")}bC("");var NC="firebase",MC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(NC,MC,"app");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,fE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function C(){}C.prototype=I.prototype,P.F=I.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(N,M,V){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return I.prototype[M].apply(N,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,I,C){C||(C=0);const N=Array(16);if(typeof I=="string")for(var M=0;M<16;++M)N[M]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(M=0;M<16;++M)N[M]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=P.g[0],C=P.g[1],M=P.g[2];let V=P.g[3],A;A=I+(V^C&(M^V))+N[0]+3614090360&4294967295,I=C+(A<<7&4294967295|A>>>25),A=V+(M^I&(C^M))+N[1]+3905402710&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(C^V&(I^C))+N[2]+606105819&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(I^M&(V^I))+N[3]+3250441966&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(V^C&(M^V))+N[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=V+(M^I&(C^M))+N[5]+1200080426&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(C^V&(I^C))+N[6]+2821735955&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(I^M&(V^I))+N[7]+4249261313&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(V^C&(M^V))+N[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=V+(M^I&(C^M))+N[9]+2336552879&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(C^V&(I^C))+N[10]+4294925233&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(I^M&(V^I))+N[11]+2304563134&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(V^C&(M^V))+N[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=V+(M^I&(C^M))+N[13]+4254626195&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(C^V&(I^C))+N[14]+2792965006&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(I^M&(V^I))+N[15]+1236535329&4294967295,C=M+(A<<22&4294967295|A>>>10),A=I+(M^V&(C^M))+N[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(I^C))+N[6]+3225465664&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(V^I))+N[11]+643717713&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^I&(M^V))+N[0]+3921069994&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(C^M))+N[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(I^C))+N[10]+38016083&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(V^I))+N[15]+3634488961&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^I&(M^V))+N[4]+3889429448&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(C^M))+N[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(I^C))+N[14]+3275163606&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(V^I))+N[3]+4107603335&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^I&(M^V))+N[8]+1163531501&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(C^M))+N[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(I^C))+N[2]+4243563512&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^C&(V^I))+N[7]+1735328473&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^I&(M^V))+N[12]+2368359562&4294967295,C=M+(A<<20&4294967295|A>>>12),A=I+(C^M^V)+N[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=V+(I^C^M)+N[8]+2272392833&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^C)+N[11]+1839030562&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^I)+N[14]+4259657740&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^V)+N[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=V+(I^C^M)+N[4]+1272893353&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^C)+N[7]+4139469664&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^I)+N[10]+3200236656&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^V)+N[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=V+(I^C^M)+N[0]+3936430074&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^C)+N[3]+3572445317&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^I)+N[6]+76029189&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(C^M^V)+N[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=V+(I^C^M)+N[12]+3873151461&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^C)+N[15]+530742520&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^I)+N[2]+3299628645&4294967295,C=M+(A<<23&4294967295|A>>>9),A=I+(M^(C|~V))+N[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=V+(C^(I|~M))+N[7]+1126891415&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~C))+N[14]+2878612391&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~I))+N[5]+4237533241&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~V))+N[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=V+(C^(I|~M))+N[3]+2399980690&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~C))+N[10]+4293915773&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~I))+N[1]+2240044497&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~V))+N[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=V+(C^(I|~M))+N[15]+4264355552&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~C))+N[6]+2734768916&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~I))+N[13]+1309151649&4294967295,C=M+(A<<21&4294967295|A>>>11),A=I+(M^(C|~V))+N[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=V+(C^(I|~M))+N[11]+3174756917&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~C))+N[2]+718787259&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~I))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+V&4294967295}i.prototype.v=function(P,I){I===void 0&&(I=P.length);const C=I-this.blockSize,N=this.C;let M=this.h,V=0;for(;V<I;){if(M==0)for(;V<=C;)s(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<I;)if(N[M++]=P.charCodeAt(V++),M==this.blockSize){s(this,N),M=0;break}}else for(;V<I;)if(N[M++]=P[V++],M==this.blockSize){s(this,N),M=0;break}}this.h=M,this.o+=I},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;I=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=I&255,I/=256;for(this.v(P),P=Array(16),I=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)P[I++]=this.g[C]>>>N&255;return P};function o(P,I){var C=h;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=I(P)}function l(P,I){this.h=I;const C=[];let N=!0;for(let M=P.length-1;M>=0;M--){const V=P[M]|0;N&&V==I||(C[M]=V,N=!1)}this.g=C}var h={};function f(P){return-128<=P&&P<128?o(P,function(I){return new l([I|0],I<0?-1:0)}):new l([P|0],P<0?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return w;if(P<0)return W(m(-P));const I=[];let C=1;for(let N=0;P>=C;N++)I[N]=P/C|0,C*=4294967296;return new l(I,0)}function y(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return W(y(P.substring(1),I));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(I,8));let N=w;for(let V=0;V<P.length;V+=8){var M=Math.min(8,P.length-V);const A=parseInt(P.substring(V,V+M),I);M<8?(M=m(Math.pow(I,M)),N=N.j(M).add(m(A))):(N=N.j(C),N=N.add(m(A)))}return N}var w=f(0),E=f(1),R=f(16777216);t=l.prototype,t.m=function(){if(D(this))return-W(this).m();let P=0,I=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);P+=(N>=0?N:4294967296+N)*I,I*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(z(this))return"0";if(D(this))return"-"+W(this).toString(P);const I=m(Math.pow(P,6));var C=this;let N="";for(;;){const M=q(C,I).g;C=b(C,M.j(I));let V=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=M,z(C))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function z(P){if(P.h!=0)return!1;for(let I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function D(P){return P.h==-1}t.l=function(P){return P=b(this,P),D(P)?-1:z(P)?0:1};function W(P){const I=P.g.length,C=[];for(let N=0;N<I;N++)C[N]=~P.g[N];return new l(C,~P.h).add(E)}t.abs=function(){return D(this)?W(this):this},t.add=function(P){const I=Math.max(this.g.length,P.g.length),C=[];let N=0;for(let M=0;M<=I;M++){let V=N+(this.i(M)&65535)+(P.i(M)&65535),A=(V>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);N=A>>>16,V&=65535,A&=65535,C[M]=A<<16|V}return new l(C,C[C.length-1]&-2147483648?-1:0)};function b(P,I){return P.add(W(I))}t.j=function(P){if(z(this)||z(P))return w;if(D(this))return D(P)?W(this).j(W(P)):W(W(this).j(P));if(D(P))return W(this.j(W(P)));if(this.l(R)<0&&P.l(R)<0)return m(this.m()*P.m());const I=this.g.length+P.g.length,C=[];for(var N=0;N<2*I;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let M=0;M<P.g.length;M++){const V=this.i(N)>>>16,A=this.i(N)&65535,De=P.i(M)>>>16,nn=P.i(M)&65535;C[2*N+2*M]+=A*nn,S(C,2*N+2*M),C[2*N+2*M+1]+=V*nn,S(C,2*N+2*M+1),C[2*N+2*M+1]+=A*De,S(C,2*N+2*M+1),C[2*N+2*M+2]+=V*De,S(C,2*N+2*M+2)}for(P=0;P<I;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=I;P<2*I;P++)C[P]=0;return new l(C,0)};function S(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function O(P,I){this.g=P,this.h=I}function q(P,I){if(z(I))throw Error("division by zero");if(z(P))return new O(w,w);if(D(P))return I=q(W(P),I),new O(W(I.g),W(I.h));if(D(I))return I=q(P,W(I)),new O(W(I.g),I.h);if(P.g.length>30){if(D(P)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var C=E,N=I;N.l(P)<=0;)C=Q(C),N=Q(N);var M=Y(C,1),V=Y(N,1);for(N=Y(N,2),C=Y(C,2);!z(N);){var A=V.add(N);A.l(P)<=0&&(M=M.add(C),V=A),N=Y(N,1),C=Y(C,1)}return I=b(P,M.j(I)),new O(M,I)}for(M=w;P.l(I)>=0;){for(C=Math.max(1,Math.floor(P.m()/I.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=m(C),A=V.j(I);D(A)||A.l(P)>0;)C-=N,V=m(C),A=V.j(I);z(V)&&(V=E),M=M.add(V),P=b(P,A)}return new O(M,P)}t.B=function(P){return q(this,P).h},t.and=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let N=0;N<I;N++)C[N]=this.i(N)&P.i(N);return new l(C,this.h&P.h)},t.or=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let N=0;N<I;N++)C[N]=this.i(N)|P.i(N);return new l(C,this.h|P.h)},t.xor=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let N=0;N<I;N++)C[N]=this.i(N)^P.i(N);return new l(C,this.h^P.h)};function Q(P){const I=P.g.length+1,C=[];for(let N=0;N<I;N++)C[N]=P.i(N)<<1|P.i(N-1)>>>31;return new l(C,P.h)}function Y(P,I){const C=I>>5;I%=32;const N=P.g.length-C,M=[];for(let V=0;V<N;V++)M[V]=I>0?P.i(V+C)>>>I|P.i(V+C+1)<<32-I:P.i(V+C);return new l(M,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,fE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,xr=l}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pE,Ga,mE,wc,ap,gE,_E,yE;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tc=="object"&&tc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var _=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&_.push([T,p[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function f(u,p,_){return u.call.apply(u.bind,arguments)}function m(u,p,_){return m=f,m.apply(null,arguments)}function y(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,B){for(var J=Array(arguments.length-2),me=2;me<arguments.length;me++)J[me-2]=arguments[me];return p.prototype[F].apply(T,J)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function R(u){const p=u.length;if(p>0){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function z(u,p){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const B=F.length||0;u.length=_+B;for(let J=0;J<B;J++)u[_+J]=F[J]}else u.push(F)}}class D{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(u){l.setTimeout(()=>{throw u},0)}function b(){var u=P;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class S{constructor(){this.h=this.g=null}add(p,_){const T=O.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var O=new D(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,Y=!1,P=new S,I=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(C)}};function C(){for(var u;u=b();){try{u.h.call(u.g)}catch(_){W(_)}var p=O;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}Y=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,p),l.removeEventListener("test",_,p)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function De(u,p){M.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}w(De,M),De.prototype.init=function(u,p){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nn="closure_listenable_"+(Math.random()*1e6|0),Qe=0;function we(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++Qe,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function X(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function he(u){const p={};for(const _ in u)p[_]=u[_];return p}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ye(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let B=0;B<Te.length;B++)_=Te[B],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,p,_,T,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const J=fe(u,p,T,F);return J>-1?(p=u[J],_||(p.fa=!1)):(p=new we(p,this.src,B,!!T,F),p.fa=_,u.push(p)),p};function Ie(u,p){const _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),B;(B=F>=0)&&Array.prototype.splice.call(T,F,1),B&&(U(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function fe(u,p,_,T){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==T)return F}return-1}var ft="closure_lm_"+(Math.random()*1e6|0),fn={};function aa(u,p,_,T,F){if(Array.isArray(p)){for(let B=0;B<p.length;B++)aa(u,p[B],_,T,F);return null}return _=Ur(_),u&&u[nn]?u.J(p,_,h(T)?!!T.capture:!1,F):la(u,p,_,!1,T,F)}function la(u,p,_,T,F,B){if(!p)throw Error("Invalid event type");const J=h(F)?!!F.capture:!!F;let me=Rs(u);if(me||(u[ft]=me=new ke(u)),_=me.add(p,_,T,J,B),_.proxy)return _;if(T=ua(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)V||(F=J),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(ru(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ua(){function u(_){return p.call(u.src,u.listener,_)}const p=su;return u}function Wi(u,p,_,T,F){if(Array.isArray(p))for(var B=0;B<p.length;B++)Wi(u,p[B],_,T,F);else T=h(T)?!!T.capture:!!T,_=Ur(_),u&&u[nn]?(u=u.i,B=String(p).toString(),B in u.g&&(p=u.g[B],_=fe(p,_,T,F),_>-1&&(U(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[B],u.h--)))):u&&(u=Rs(u))&&(p=u.g[p.toString()],u=-1,p&&(u=fe(p,_,T,F)),(_=u>-1?p[u]:null)&&jr(_))}function jr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[nn])Ie(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(ru(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Rs(p))?(Ie(_,u),_.h==0&&(_.src=null,p[ft]=null)):U(u)}}}function ru(u){return u in fn?fn[u]:fn[u]="on"+u}function su(u,p){if(u.da)u=!0;else{p=new De(p,this);const _=u.listener,T=u.ha||u.src;u.fa&&jr(u),u=_.call(T,p)}return u}function Rs(u){return u=u[ft],u instanceof ke?u:null}var Br="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ur(u){return typeof u=="function"?u:(u[Br]||(u[Br]=function(p){return u.handleEvent(p)}),u[Br])}function pt(){N.call(this),this.i=new ke(this),this.M=this,this.G=null}w(pt,N),pt.prototype[nn]=!0,pt.prototype.removeEventListener=function(u,p,_,T){Wi(this,u,p,_,T)};function mt(u,p){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new M(p,u);else if(p instanceof M)p.target=p.target||u;else{var F=p;p=new M(T,u),Ye(p,F)}F=!0;let B,J;if(_)for(J=_.length-1;J>=0;J--)B=p.g=_[J],F=qi(B,T,!0,p)&&F;if(B=p.g=u,F=qi(B,T,!0,p)&&F,F=qi(B,T,!1,p)&&F,_)for(J=0;J<_.length;J++)B=p.g=_[J],F=qi(B,T,!1,p)&&F}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const _=u.g[p];for(let T=0;T<_.length;T++)U(_[T]);delete u.g[p],u.h--}}this.G=null},pt.prototype.J=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},pt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function qi(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let F=!0;for(let B=0;B<p.length;++B){const J=p[B];if(J&&!J.da&&J.capture==_){const me=J.listener,be=J.ha||J.src;J.fa&&Ie(u.i,J),F=me.call(be,T)!==!1&&F}}return F&&!T.defaultPrevented}function ou(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:l.setTimeout(u,p||0)}function ca(u){u.g=ou(()=>{u.g=null,u.i&&(u.i=!1,ca(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class sd extends N{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(u){N.call(this),this.h=u,this.g={}}w(Hr,N);var Ls=[];function ha(u){le(u.g,function(p,_){this.g.hasOwnProperty(_)&&jr(p)},u),u.g={}}Hr.prototype.N=function(){Hr.Z.N.call(this),ha(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=l.JSON.stringify,od=l.JSON.parse,au=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function da(){}function lu(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wr(){M.call(this,"d")}w(Wr,M);function Ns(){M.call(this,"c")}w(Ns,M);var fi={},Zi=null;function Ms(){return Zi=Zi||new pt}fi.Ia="serverreachability";function uu(u){M.call(this,fi.Ia,u)}w(uu,M);function Gi(u){const p=Ms();mt(p,new uu(p))}fi.STAT_EVENT="statevent";function fa(u,p){M.call(this,fi.STAT_EVENT,u),this.stat=p}w(fa,M);function gt(u){const p=Ms();mt(p,new fa(p,u))}fi.Ja="timingevent";function cu(u,p){M.call(this,fi.Ja,u),this.size=p}w(cu,M);function qr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function ad(u,p,_,T,F,B){u.info(function(){if(u.g)if(B){var J="",me=B.split("&");for(let Me=0;Me<me.length;Me++){var be=me[Me].split("=");if(be.length>1){const tt=be[0];be=be[1];const yn=tt.split("_");J=yn.length>=2&&yn[1]=="type"?J+(tt+"="+be+"&"):J+(tt+"=redacted&")}}}else J=null;else J=B;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+J})}function ld(u,p,_,T,F,B,J){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+B+" "+J})}function Ki(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ud(u,_)+(T?" "+T:"")})}function pa(u,p){u.info(function(){return"TIMEOUT: "+p})}$r.prototype.info=function(){};function ud(u,p){if(!u.g)return p;if(!p)return null;try{const B=JSON.parse(p);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var _=B[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let J=1;J<T.length;J++)T[J]=""}}}}return bs(B)}catch{return p}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},du;function Wt(){}w(Wt,da),Wt.prototype.g=function(){return new XMLHttpRequest},du=new Wt;function se(u){return encodeURIComponent(String(u))}function fu(u){var p=1;u=u.split(":");const _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function An(u,p,_,T){this.j=u,this.i=p,this.l=_,this.S=T||1,this.V=new Hr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ma}function ma(){this.i=null,this.g="",this.h=!1}var ga={},Zr={};function Ds(u,p,_){u.M=1,u.A=Fe(Vt(p)),u.u=_,u.R=!0,pi(u,null)}function pi(u,p){u.F=Date.now(),Vs(u),u.B=Vt(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Us(_.i,"t",T),u.C=0,_=u.j.L,u.h=new ma,u.g=Ra(u.j,_?p:null,!u.u),u.P>0&&(u.O=new sd(m(u.Y,u,u.g),u.P)),p=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ls[0]=F.toString()),F=Ls);for(let B=0;B<F.length;B++){const J=aa(_,F[B],T||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.J?he(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Gi(),ad(u.i,u.v,u.B,u.l,u.S,u.u)}An.prototype.ba=function(u){u=u.target;const p=this.O;p&&Kn(u)==3?p.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const me=Kn(this.g),be=this.g.ya(),Me=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Ia(this.g)))){this.K||me!=4||be==7||(be==8||Me<=0?Gi(3):Gi(2)),zs(this);var p=this.g.ca();this.X=p;var _=pu(this);if(this.o=p==200,ld(this.i,this.v,this.B,this.l,this.S,me,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var B=T;break t}}B=null}if(u=B)Ki(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_a(this,u);else{this.o=!1,this.m=3,gt(12),pn(this),Gr(this);break e}}if(this.R){u=!0;let tt;for(;!this.K&&this.C<_.length;)if(tt=cd(this,_),tt==Zr){me==4&&(this.m=4,gt(14),u=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==ga){this.m=4,gt(15),Ki(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Ki(this.i,this.l,tt,null),_a(this,tt);if(mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||_.length!=0||this.h.h||(this.m=1,gt(16),u=!1),this.o=this.o&&u,!u)Ki(this.i,this.l,_,"[Invalid Chunked Response]"),pn(this),Gr(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Aa(J),J.P=!0,gt(11))}}else Ki(this.i,this.l,_,null),_a(this,_);me==4&&pn(this),this.o&&!this.K&&(me==4?sn(this.j,this):(this.o=!1,Vs(this)))}else xa(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),pn(this),Gr(this)}}}catch{}finally{}};function pu(u){if(!mu(u))return u.g.la();const p=Ia(u.g);if(p==="")return"";let _="";const T=p.length,F=Kn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return pn(u),Gr(u),"";u.h.i=new l.TextDecoder}for(let B=0;B<T;B++)u.h.h=!0,_+=u.h.i.decode(p[B],{stream:!(F&&B==T-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function mu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function cd(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?Zr:(_=Number(p.substring(_,T)),isNaN(_)?ga:(T+=1,T+_>p.length?Zr:(p=p.slice(T,T+_),u.C=T+_,p)))}An.prototype.cancel=function(){this.K=!0,pn(this)};function Vs(u){u.T=Date.now()+u.H,gu(u,u.H)}function gu(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=qr(m(u.aa,u),p)}function zs(u){u.D&&(l.clearTimeout(u.D),u.D=null)}An.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(pa(this.i,this.B),this.M!=2&&(Gi(),gt(17)),pn(this),this.m=2,Gr(this)):gu(this,this.T-u)};function Gr(u){u.j.I==0||u.K||sn(u.j,u)}function pn(u){zs(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,ha(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function _a(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||Kr(_.h,u))){if(!u.L&&Kr(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Zs(_),qs(_);else break e;Ca(_),gt(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=qr(m(_.Va,_),6e3));vu(_.h)<=1&&_.ta&&(_.ta=void 0)}else Yn(_,11)}else if((u.L||_.g==u)&&Zs(_),!A(p))for(F=_.Ba.g.parse(p),p=0;p<F.length;p++){let Me=F[p];const tt=Me[0];if(!(tt<=_.K))if(_.K=tt,Me=Me[1],_.I==2)if(Me[0]=="c"){_.M=Me[1],_.ba=Me[2];const yn=Me[3];yn!=null&&(_.ka=yn,_.j.info("VER="+_.ka));const Ln=Me[4];Ln!=null&&(_.za=Ln,_.j.info("SVER="+_.za));const vn=Me[5];vn!=null&&typeof vn=="number"&&vn>0&&(T=1.5*vn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Xn=u.g;if(Xn){const Qs=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var B=T.h;B.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(mi(B,B.h),B.h=null))}if(T.G){const Ys=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(T.wa=Ys,ie(T.J,T.G,Ys))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var J=u;if(T.na=ka(T,T.L?T.ba:null,T.W),J.L){ya(T.h,J);var me=J,be=T.O;be&&(me.H=be),me.D&&(zs(me),Vs(me)),T.g=J}else Pa(T);_.i.length>0&&Qn(_)}else Me[0]!="stop"&&Me[0]!="close"||Yn(_,7);else _.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Yn(_,7):ye(_):Me[0]!="noop"&&_.l&&_.l.qa(Me),_.A=0)}}Gi(4)}catch{}}var hd=class{constructor(u,p){this.g=u,this.map=p}};function _u(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vu(u){return u.h?1:u.g?u.g.size:0}function Kr(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function mi(u,p){u.g?u.g.add(p):u.h=p}function ya(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}_u.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function va(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.G);return p}return R(u.i)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ce(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,B=null;T>=0?(F=u[_].substring(0,T),B=u[_].substring(T+1)):F=u[_],p(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Le(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Le?(this.l=u.l,mn(this,u.j),this.o=u.o,this.g=u.g,gn(this,u.u),this.h=u.h,Qr(this,Yr(u.i)),this.m=u.m):u&&(p=String(u).match(Qi))?(this.l=!1,mn(this,p[1]||"",!0),this.o=gi(p[2]||""),this.g=gi(p[3]||"",!0),gn(this,p[4]),this.h=gi(p[5]||"",!0),Qr(this,p[6]||"",!0),this.m=gi(p[7]||"")):(this.l=!1,this.i=new kn(null,this.l))}Le.prototype.toString=function(){const u=[];var p=this.j;p&&u.push($n(p,wu,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push($n(p,wu,!0),"@"),u.push(se(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($n(_,_.charAt(0)=="/"?_i:Fs,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$n(_,yi)),u.join("")},Le.prototype.resolve=function(u){const p=Vt(this);let _=!!u.j;_?mn(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var T=u.h;if(_)gn(p,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=p.h.lastIndexOf("/");F!=-1&&(T=p.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let J=0;J<F.length;){const me=F[J++];me=="."?T&&J==F.length&&B.push(""):me==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),T&&J==F.length&&B.push("")):(B.push(me),T=!0)}T=B.join("/")}else T=F}return _?p.h=T:_=u.i.toString()!=="",_?Qr(p,Yr(u.i)):_=!!u.m,_&&(p.m=u.m),p};function Vt(u){return new Le(u)}function mn(u,p,_){u.j=_?gi(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function gn(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Qr(u,p,_){p instanceof kn?(u.i=p,wa(u.i,u.l)):(_||(p=$n(p,Xe)),u.i=new kn(p,u.l))}function ie(u,p,_){u.i.set(p,_)}function Fe(u){return ie(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function gi(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $n(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,qt),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function qt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wu=/[#\/\?@]/g,Fs=/[#\?:]/g,_i=/[#\?]/g,Xe=/[#\?@]/g,yi=/#/g;function kn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function rn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ce(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=kn.prototype,t.add=function(u,p){rn(this),this.i=null,u=Zn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function js(u,p){rn(u),p=Zn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Yi(u,p){return rn(u),p=Zn(u,p),u.g.has(p)}t.forEach=function(u,p){rn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)};function Bs(u,p){rn(u);let _=[];if(typeof p=="string")Yi(u,p)&&(_=_.concat(u.g.get(Zn(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}t.set=function(u,p){return rn(this),this.i=null,u=Zn(this,u),Yi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=Bs(this,u),u.length>0?String(u[0]):p):p};function Us(u,p,_){js(u,p),_.length>0&&(u.i=null,u.g.set(Zn(u,p),R(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var _=p[T];const F=se(_);_=Bs(this,_);for(let B=0;B<_.length;B++){let J=F;_[B]!==""&&(J+="="+se(_[B])),u.push(J)}}return this.i=u.join("&")};function Yr(u){const p=new kn;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Zn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function wa(u,p){p&&!u.j&&(rn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(js(this,T),Us(this,F,_))},u)),u.j=p}function Hs(u,p){const _=new $r;if(l.Image){const T=new Image;T.onload=y(_n,_,"TestLoadImage: loaded",!0,p,T),T.onerror=y(_n,_,"TestLoadImage: error",!1,p,T),T.onabort=y(_n,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=y(_n,_,"TestLoadImage: timeout",!1,p,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Eu(u,p){const _=new $r,T=new AbortController,F=setTimeout(()=>{T.abort(),_n(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(F),B.ok?_n(_,"TestPingServer: ok",!0,p):_n(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),_n(_,"TestPingServer: error",!1,p)})}function _n(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function dd(){this.g=new au}function pe(u){this.i=u.Sb||null,this.h=u.ab||!1}w(pe,da),pe.prototype.g=function(){return new zt(this.i,this.h)};function zt(u,p){pt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(zt,pt),t=zt.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,vi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||l).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Xi(this):vi(this),this.readyState==3&&Ve(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Xi(this))},t.Na=function(u){this.g&&(this.response=u,Xi(this))},t.ga=function(){this.g&&Xi(this)};function Xi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vi(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function vi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ws(u){let p="";return le(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Xr(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ws(_),typeof u=="string"?_!=null&&se(_):ie(u,p,_))}function Ne(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Ne,pt);var Ea=/^https?$/i,Jr=["POST","PUT"];t=Ne.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():du.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){rt(this,B);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())_.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),F=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(Jr,p,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,J]of _)this.g.setRequestHeader(B,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){rt(this,B)}};function rt(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Gn(u),es(u)}function Gn(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,mt(this,"complete"),mt(this,"abort"),es(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},t.Xa=function(){Ta(this)};function Ta(u){if(u.h&&typeof o<"u"){if(u.v&&Kn(u)==4)setTimeout(u.Ca.bind(u),0);else if(mt(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=B===0){let J=String(u.D).match(Qi)[1]||null;!J&&l.self&&l.self.location&&(J=l.self.location.protocol.slice(0,-1)),T=!Ea.test(J?J.toLowerCase():"")}_=T}if(_)mt(u,"complete"),mt(u,"success");else{u.o=6;try{var F=Kn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Gn(u)}}finally{es(u)}}}}function es(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,p||mt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),od(p)}};function Ia(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(u){const p={};u=(u.g&&Kn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(A(u[T]))continue;var _=fu(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=p[F]||[];p[F]=B,B.push(_)}X(p,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Sa(u){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,u),this.Za=ts("retryDelaySeedMs",1e4,u),this.Ta=ts("forwardChannelMaxRetries",2,u),this.va=ts("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _u(u&&u.concurrentRequestLimit),this.Ba=new dd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sa.prototype,t.ka=8,t.I=1,t.connect=function(u,p,_,T){gt(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ka(this,null,this.W),Qn(this)};function ye(u){if($t(u),u.I==3){var p=u.V++,_=Vt(u.J);if(ie(_,"SID",u.M),ie(_,"RID",p),ie(_,"TYPE","terminate"),wi(u,_),p=new An(u,u.j,p),p.M=2,p.A=Fe(Vt(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=p.A,_=!0),_||(p.g=Ra(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Vs(p)}Rn(u)}function qs(u){u.g&&(Aa(u),u.g.cancel(),u.g=null)}function $t(u){qs(u),u.v&&(l.clearTimeout(u.v),u.v=null),Zs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function Qn(u){if(!yu(u.h)&&!u.m){u.m=!0;var p=u.Ea;Q||I(),Y||(Q(),Y=!0),P.add(p,u),u.D=0}}function Tu(u,p){return vu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=qr(m(u.Ea,u,p),Su(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new An(this,this.j,u);let B=this.o;if(this.U&&(B?(B=he(B),Ye(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=xu(this,F,p),_=Vt(this.J),ie(_,"RID",u),ie(_,"CVER",22),this.G&&ie(_,"X-HTTP-Session-Id",this.G),wi(this,_),B&&(this.R?p="headers="+se(Ws(B))+"&"+p:this.u&&Xr(_,this.u,B)),mi(this.h,F),this.Ra&&ie(_,"TYPE","init"),this.S?(ie(_,"$req",p),ie(_,"SID","null"),F.U=!0,Ds(F,_,null)):Ds(F,_,p),this.I=2}}else this.I==3&&(u?Iu(this,u):this.i.length==0||yu(this.h)||Iu(this))};function Iu(u,p){var _;p?_=p.l:_=u.V++;const T=Vt(u.J);ie(T,"SID",u.M),ie(T,"RID",_),ie(T,"AID",u.K),wi(u,T),u.u&&u.o&&Xr(T,u.u,u.o),_=new An(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=xu(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),mi(u.h,_),Ds(_,T,p)}function wi(u,p){u.H&&le(u.H,function(_,T){ie(p,T,_)}),u.l&&le({},function(_,T){ie(p,T,_)})}function xu(u,p,_){_=Math.min(u.i.length,_);const T=u.l?m(u.l.Ka,u.l,u):null;e:{var F=u.i;let me=-1;for(;;){const be=["count="+_];me==-1?_>0?(me=F[0].g,be.push("ofs="+me)):me=0:be.push("ofs="+me);let Me=!0;for(let tt=0;tt<_;tt++){var B=F[tt].g;const yn=F[tt].map;if(B-=me,B<0)me=Math.max(0,F[tt].g-100),Me=!1;else try{B="req"+B+"_"||"";try{var J=yn instanceof Map?yn:Object.entries(yn);for(const[Ln,vn]of J){let Xn=vn;h(vn)&&(Xn=bs(vn)),be.push(B+Ln+"="+encodeURIComponent(Xn))}}catch(Ln){throw be.push(B+"type="+encodeURIComponent("_badmap")),Ln}}catch{T&&T(yn)}}if(Me){J=be.join("&");break e}}J=void 0}return u=u.i.splice(0,_),p.G=u,J}function Pa(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;Q||I(),Y||(Q(),Y=!0),P.add(p,u),u.A=0}}function Ca(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=qr(m(u.Da,u),Su(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,$s(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=qr(m(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),qs(this),$s(this))};function Aa(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function $s(u){u.g=new An(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Vt(u.na);ie(p,"RID","rpc"),ie(p,"SID",u.M),ie(p,"AID",u.K),ie(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&ie(p,"TO",u.ia),ie(p,"TYPE","xmlhttp"),wi(u,p),u.u&&u.o&&Xr(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Fe(Vt(p)),_.u=null,_.R=!0,pi(_,u)}t.Va=function(){this.C!=null&&(this.C=null,qs(this),Ca(this),gt(19))};function Zs(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function sn(u,p){var _=null;if(u.g==p){Zs(u),Aa(u),u.g=null;var T=2}else if(Kr(u.h,p))_=p.G,ya(u.h,p),T=1;else return;if(u.I!=0){if(p.o)if(T==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var F=u.D;T=Ms(),mt(T,new cu(T,_)),Qn(u)}else Pa(u);else if(F=p.m,F==3||F==0&&p.X>0||!(T==1&&Tu(u,p)||T==2&&Ca(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),F){case 1:Yn(u,5);break;case 4:Yn(u,10);break;case 3:Yn(u,6);break;default:Yn(u,2)}}}function Su(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function Yn(u,p){if(u.j.info("Error code "+p),p==2){var _=m(u.bb,u),T=u.Ua;const F=!T;T=new Le(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mn(T,"https"),Fe(T),F?Hs(T.toString(),_):Eu(T.toString(),_)}else gt(2);u.I=0,u.l&&u.l.pa(p),Rn(u),$t(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Rn(u){if(u.I=0,u.ja=[],u.l){const p=va(u.h);(p.length!=0||u.i.length!=0)&&(z(u.ja,p),z(u.ja,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.oa()}}function ka(u,p,_){var T=_ instanceof Le?Vt(_):new Le(_);if(T.g!="")p&&(T.g=p+"."+T.g),gn(T,T.u);else{var F=l.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;const B=new Le(null);T&&mn(B,T),p&&(B.g=p),F&&gn(B,F),_&&(B.h=_),T=B}return _=u.G,p=u.wa,_&&p&&ie(T,_,p),ie(T,"VER",u.ka),wi(u,T),T}function Ra(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ne(new pe({ab:_})):new Ne(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gs(){}t=Gs.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ks(){}Ks.prototype.g=function(u,p){return new At(u,p)};function At(u,p){pt.call(this),this.g=new Sa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!A(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ji(this)}w(At,pt),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){ye(this.g)},At.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=bs(u),u=_);p.i.push(new hd(p.Ya++,u)),p.I==3&&Qn(p)},At.prototype.N=function(){this.g.l=null,delete this.j,ye(this.g),delete this.g,At.Z.N.call(this)};function La(u){Wr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(La,Wr);function Pu(){Ns.call(this),this.status=1}w(Pu,Ns);function Ji(u){this.g=u}w(Ji,Gs),Ji.prototype.ra=function(){mt(this.g,"a")},Ji.prototype.qa=function(u){mt(this.g,new La(u))},Ji.prototype.pa=function(u){mt(this.g,new Pu)},Ji.prototype.oa=function(){mt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,yE=function(){return new Ks},_E=function(){return Ms()},gE=fi,ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,wc=Os,hu.COMPLETE="complete",mE=hu,lu.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",pt.prototype.listen=pt.prototype.J,Ga=lu,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,pE=Ne}).apply(typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore",my="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new km("@firebase/firestore");function so(){return Es.logLevel}function ne(t,...e){if(Es.logLevel<=xe.DEBUG){const n=e.map(bm);Es.debug(`Firestore (${ea}): ${t}`,...n)}}function zi(t,...e){if(Es.logLevel<=xe.ERROR){const n=e.map(bm);Es.error(`Firestore (${ea}): ${t}`,...n)}}function Uo(t,...e){if(Es.logLevel<=xe.WARN){const n=e.map(bm);Es.warn(`Firestore (${ea}): ${t}`,...n)}}function bm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,vE(t,i,n)}function vE(t,e,n){let i=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw zi(i),new Error(i)}function Oe(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||vE(e,s,i)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VC{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let o=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string",31837,{l:i}),new wE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class zC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new zC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const i=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=BC(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Se(t,e){return t<e?-1:t>e?1:0}function lp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return Kd(s)===Kd(o)?Se(s,o):Kd(s)?1:-1}return Se(t.length,e.length)}const UC=55296,HC=57343;function Kd(t){const e=t.charCodeAt(0);return e>=UC&&e<=HC}function Ho(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="__name__";class ni{constructor(e,n,i){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ce(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=ni.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Se(e.length,n.length)}static compareSegments(e,n){const i=ni.isNumericId(e),s=ni.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ni.extractNumericId(e).compare(ni.extractNumericId(n)):lp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}}class je extends ni{construct(e,n,i){return new je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends ni{construct(e,n,i){return new xt(e,n,i)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_y}static keyField(){return new xt([_y])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(je.fromString(e))}static fromName(e){return new ae(je.fromString(e).popFirst(5))}static empty(){return new ae(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t,e,n){if(!n)throw new ee($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qC(t,e,n,i){if(e===!0&&i===!0)throw new ee($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yy(t){if(!ae.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vy(t){if(ae.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Oh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oh(t);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function Kl(t,e){if(!TE(t))throw new ee($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ee($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-62135596800,Ey=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Ey);return new He(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wy)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ey}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:ut("string",He._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new He(0,0))}static max(){return new ge(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function $C(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(i===1e9?new He(n+1,0):new He(n,i));return new kr(s,ae.empty(),e)}function ZC(t){return new kr(t.readTime,t.key,bl)}class kr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new kr(ge.min(),ae.empty(),bl)}static max(){return new kr(ge.max(),ae.empty(),bl)}}function GC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==KC)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},f=>i(f))}),l=!0,o===s&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(s=>s?Z.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;n(e[m]).next(y=>{l[m]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new Z((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function YC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function Vh(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function XC(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="";function JC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ty(e)),e=eA(t.get(n),e);return Ty(e)}function eA(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case IE:n+="";break;default:n+=o}}return n}function Ty(t){return t+IE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nc(this.root,e,this.comparator,!0)}}class nc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??It.RED,this.left=s??It.EMPTY,this.right=o??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new It(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xy(this.data.getIterator())}getIteratorFrom(e){return new xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new dt(xt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SE("Invalid base64 string: "+o):o}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const tA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=tA.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="server_timestamp",CE="__type__",AE="__previous_value__",kE="__local_write_time__";function Om(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[CE])==null?void 0:i.stringValue)===PE}function zh(t){const e=t.mapValue.fields[AE];return Om(e)?zh(e):e}function Nl(t){const e=Rr(t.mapValue.fields[kE].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,i,s,o,l,h,f,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const ih="(default)";class Ml{constructor(e,n){this.projectId=e,this.database=n||ih}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===ih}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__type__",iA="__max__",ic={mapValue:{}},LE="__vector__",rh="value";function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:sA(t)?9007199254740991:rA(t)?10:11:ce(28295,{value:t})}function hi(t,e){if(t===e)return!0;const n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Rr(s.timestampValue),h=Rr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Lr(s.bytesValue).isEqual(Lr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return nt(s.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nt(s.integerValue)===nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=nt(s.doubleValue),h=nt(o.doubleValue);return l===h?nh(l)===nh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Ho(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Iy(l)!==Iy(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!hi(l[f],h[f])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function Ol(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=br(t),i=br(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),f=nt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return Sy(t.timestampValue,e.timestampValue);case 4:return Sy(Nl(t),Nl(e));case 5:return lp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Lr(o),f=Lr(l);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),f=l.split("/");for(let m=0;m<h.length&&m<f.length;m++){const y=Se(h[m],f[m]);if(y!==0)return y}return Se(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Se(nt(o.latitude),nt(l.latitude));return h!==0?h:Se(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Py(t.arrayValue,e.arrayValue);case 10:return function(o,l){var E,R,z,D;const h=o.fields||{},f=l.fields||{},m=(E=h[rh])==null?void 0:E.arrayValue,y=(R=f[rh])==null?void 0:R.arrayValue,w=Se(((z=m==null?void 0:m.values)==null?void 0:z.length)||0,((D=y==null?void 0:y.values)==null?void 0:D.length)||0);return w!==0?w:Py(m,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===ic.mapValue&&l===ic.mapValue)return 0;if(o===ic.mapValue)return 1;if(l===ic.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=l.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const E=lp(f[w],y[w]);if(E!==0)return E;const R=Wo(h[f[w]],m[y[w]]);if(R!==0)return R}return Se(f.length,y.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function Sy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Rr(t),i=Rr(e),s=Se(n.seconds,i.seconds);return s!==0?s:Se(n.nanos,i.nanos)}function Py(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Wo(n[s],i[s]);if(o)return o}return Se(n.length,i.length)}function qo(t){return up(t)}function up(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Rr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=up(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${up(n.fields[l])}`;return s+"}"}(t.mapValue):ce(61005,{value:t})}function Ec(t){switch(br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zh(t);return e?16+Ec(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Ec(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return zr(i.fields,(o,l)=>{s+=o.length+Ec(l)}),s}(t.mapValue);default:throw ce(13486,{value:t})}}function Cy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cp(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function Ay(t){return!!t&&"nullValue"in t}function ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function rA(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RE])==null?void 0:i.stringValue)===LE}function ll(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ll(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return{...t}}function sA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=xt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=ll(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Tc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){zr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Qt(ll(this.value))}}function bE(t){const e=[];return zr(t.fields,(n,i)=>{const s=new xt([n]);if(Tc(i)){const o=bE(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mt(e,0,ge.min(),ge.min(),ge.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,s){return new Mt(e,1,n,ge.min(),i,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,ge.min(),ge.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ge.min(),ge.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.position=e,this.inclusive=n}}function Ry(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ae.comparator(ae.fromName(l.referenceValue),n.key):i=Wo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ly(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function oA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{}class lt extends NE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new lA(e,n,i):n==="array-contains"?new hA(e,i):n==="in"?new dA(e,i):n==="not-in"?new fA(e,i):n==="array-contains-any"?new pA(e,i):new lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new uA(e,i):new cA(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends NE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qn(e,n)}matches(e){return ME(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ME(t){return t.op==="and"}function OE(t){return aA(t)&&ME(t)}function aA(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function hp(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(OE(t))return t.filters.map(e=>hp(e)).join(",");{const e=t.filters.map(n=>hp(n)).join(",");return`${t.op}(${e})`}}function DE(t,e){return t instanceof lt?function(i,s){return s instanceof lt&&i.op===s.op&&i.field.isEqual(s.field)&&hi(i.value,s.value)}(t,e):t instanceof qn?function(i,s){return s instanceof qn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&DE(l,s.filters[h]),!0):!1}(t,e):void ce(19439)}function VE(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(VE).join(" ,")+"}"}(t):"Filter"}class lA extends lt{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class uA extends lt{constructor(e,n){super(e,"in",n),this.keys=zE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cA extends lt{constructor(e,n){super(e,"not-in",n),this.keys=zE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class hA extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&Ol(n.arrayValue,this.value)}}class dA extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class fA extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ol(this.value.arrayValue,n)}}class pA extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function by(t,e=null,n=[],i=[],s=null,o=null,l=null){return new mA(t,e,n,i,s,o,l)}function Vm(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>hp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qo(i)).join(",")),e.Te=n}return e.Te}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ly(t.startAt,e.startAt)&&Ly(t.endAt,e.endAt)}function dp(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gA(t,e,n,i,s,o,l,h){return new ia(t,e,n,i,s,o,l,h)}function Fh(t){return new ia(t)}function Ny(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FE(t){return t.collectionGroup!==null}function ul(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new dt(xt.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Dl(o,i))}),n.has(xt.keyField().canonicalString())||e.Ie.push(new Dl(xt.keyField(),i))}return e.Ie}function oi(t){const e=_e(t);return e.Ee||(e.Ee=_A(e,ul(t))),e.Ee}function _A(t,e){if(t.limitType==="F")return by(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Dl(s.field,o)});const n=t.endAt?new sh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new sh(t.startAt.position,t.startAt.inclusive):null;return by(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fp(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pp(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return zm(oi(t),oi(e))&&t.limitType===e.limitType}function jE(t){return`${Vm(oi(t))}|lt:${t.limitType}`}function oo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>VE(s)).join(", ")}]`),Vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>qo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>qo(s)).join(",")),`Target(${i})`}(oi(t))}; limitType=${t.limitType})`}function Bh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of ul(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,f){const m=Ry(l,h,f);return l.inclusive?m<=0:m<0}(i.startAt,ul(i),s)||i.endAt&&!function(l,h,f){const m=Ry(l,h,f);return l.inclusive?m>=0:m>0}(i.endAt,ul(i),s))}(t,e)}function yA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BE(t){return(e,n)=>{let i=!1;for(const s of ul(t)){const o=vA(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function vA(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,l,h){const f=l.data.field(o),m=h.data.field(o);return f!==null&&m!==null?Wo(f,m):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return xE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Ke(ae.comparator);function Fi(){return wA}const UE=new Ke(ae.comparator);function Ka(...t){let e=UE;for(const n of t)e=e.insert(n.key,n);return e}function HE(t){let e=UE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ls(){return cl()}function WE(){return cl()}function cl(){return new Cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const EA=new Ke(ae.comparator),TA=new dt(ae.comparator);function Pe(...t){let e=TA;for(const n of t)e=e.add(n);return e}const IA=new dt(Se);function xA(){return IA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function SA(t,e){return XC(e)?qE(e):Fm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function PA(t,e,n){return t instanceof Vl?function(s,o){const l={fields:{[CE]:{stringValue:PE},[kE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Om(o)&&(o=zh(o)),o&&(l.fields[AE]=o),{mapValue:l}}(n,e):t instanceof zl?ZE(t,e):t instanceof Fl?GE(t,e):function(s,o){const l=$E(s,o),h=My(l)+My(s.Ae);return cp(l)&&cp(s.Ae)?qE(h):Fm(s.serializer,h)}(t,e)}function CA(t,e,n){return t instanceof zl?ZE(t,e):t instanceof Fl?GE(t,e):n}function $E(t,e){return t instanceof oh?function(i){return cp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Vl extends Uh{}class zl extends Uh{constructor(e){super(),this.elements=e}}function ZE(t,e){const n=KE(e);for(const i of t.elements)n.some(s=>hi(s,i))||n.push(i);return{arrayValue:{values:n}}}class Fl extends Uh{constructor(e){super(),this.elements=e}}function GE(t,e){let n=KE(e);for(const i of t.elements)n=n.filter(s=>!hi(s,i));return{arrayValue:{values:n}}}class oh extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function My(t){return nt(t.integerValue||t.doubleValue)}function KE(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.field=e,this.transform=n}}function kA(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof zl&&s instanceof zl||i instanceof Fl&&s instanceof Fl?Ho(i.elements,s.elements,hi):i instanceof oh&&s instanceof oh?hi(i.Ae,s.Ae):i instanceof Vl&&s instanceof Vl}(t.transform,e.transform)}class RA{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hh{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new XE(t.key,Un.none()):new Ql(t.key,t.data,Un.none());{const n=t.data,i=Qt.empty();let s=new dt(xt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Fr(t.key,i,new ln(s.toArray()),Un.none())}}function LA(t,e,n){t instanceof Ql?function(s,o,l){const h=s.value.clone(),f=Dy(s.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,o,l){if(!Ic(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Dy(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(YE(s)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function hl(t,e,n,i){return t instanceof Ql?function(o,l,h,f){if(!Ic(o.precondition,l))return h;const m=o.value.clone(),y=Vy(o.fieldTransforms,f,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fr?function(o,l,h,f){if(!Ic(o.precondition,l))return h;const m=Vy(o.fieldTransforms,f,l),y=l.data;return y.setAll(YE(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return Ic(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function bA(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=$E(i.transform,s||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function Oy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ho(i,s,(o,l)=>kA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends Hh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends Hh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function YE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Dy(t,e,n){const i=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,CA(l,h,n[s]))}return i}function Vy(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,PA(o,l,e))}return i}class XE extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NA extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&LA(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=WE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const f=QE(l,h);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,i)=>Oy(n,i))&&Ho(this.baseMutations,e.baseMutations,(n,i)=>Oy(n,i))}}class jm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Oe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return EA}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new jm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Ae;function VA(t){switch(t){case $.OK:return ce(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function JE(t){if(t===void 0)return zi("GRPC error has no .code"),$.UNKNOWN;switch(t){case ot.OK:return $.OK;case ot.CANCELLED:return $.CANCELLED;case ot.UNKNOWN:return $.UNKNOWN;case ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ot.INTERNAL:return $.INTERNAL;case ot.UNAVAILABLE:return $.UNAVAILABLE;case ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ot.NOT_FOUND:return $.NOT_FOUND;case ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ot.ABORTED:return $.ABORTED;case ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ot.DATA_LOSS:return $.DATA_LOSS;default:return ce(39323,{code:t})}}(Ae=ot||(ot={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new xr([4294967295,4294967295],0);function zy(t){const e=zA().encode(t),n=new fE;return n.update(e),new Uint8Array(n.digest())}function Fy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([n,i],0),new xr([s,o],0)]}class Bm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(xr.fromNumber(i)));return s.compare(FA)===1&&(s=new xr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zy(e),[i,s]=Fy(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Bm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=zy(e),[i,s]=Fy(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Wh(ge.min(),s,new Ke(Se),Fi(),Pe())}}class Yl{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Yl(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class eT{constructor(e,n){this.targetId=e,this.Ce=n}}class tT{constructor(e,n,i=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class jy{constructor(){this.ve=0,this.Fe=By(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),i=Pe();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ce(38017,{changeType:o})}}),new Yl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=By()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fi(),this.Je=rc(),this.He=rc(),this.Ye=new Ke(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(dp(o))if(i===0){const l=new ae(o.path);this.et(n,l,Mt.newNoDocument(l,ge.min()))}else Oe(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Lr(i).toUint8Array()}catch(f){if(f instanceof SE)return Uo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Bm(l,s,o)}catch(f){return Uo(f instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&dp(h.target)){const f=new ae(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Mt.newNoDocument(f,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let i=Pe();this.He.forEach((o,l)=>{let h=!0;l.forEachWhile(f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new Wh(e,n,this.Ye,this.je,i);return this.je=Fi(),this.Je=rc(),this.He=rc(),this.Ye=new Ke(Se),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new jy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rc(){return new Ke(ae.comparator)}function By(){return new Ke(ae.comparator)}const BA={asc:"ASCENDING",desc:"DESCENDING"},UA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HA={and:"AND",or:"OR"};class WA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mp(t,e){return t.useProto3Json||Vh(e)?e:{value:e}}function ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qA(t,e){return ah(t,e.toTimestamp())}function ai(t){return Oe(!!t,49232),ge.fromTimestamp(function(n){const i=Rr(n);return new He(i.seconds,i.nanos)}(t))}function Um(t,e){return gp(t,e).canonicalString()}function gp(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iT(t){const e=je.fromString(t);return Oe(lT(e),10190,{key:e.toString()}),e}function _p(t,e){return Um(t.databaseId,e.path)}function Qd(t,e){const n=iT(e);if(n.get(1)!==t.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(sT(n))}function rT(t,e){return Um(t.databaseId,e)}function $A(t){const e=iT(t);return e.length===4?je.emptyPath():sT(e)}function yp(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sT(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Uy(t,e,n){return{name:_p(t,e),fields:n.value.mapValue.fields}}function ZA(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ce(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(Oe(y===void 0||typeof y=="string",58123),Ct.fromBase64String(y||"")):(Oe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ct.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const y=m.code===void 0?$.UNKNOWN:JE(m.code);return new ee(y,m.message||"")}(l);n=new tT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Qd(t,i.document.name),o=ai(i.document.updateTime),l=i.document.createTime?ai(i.document.createTime):ge.min(),h=new Qt({mapValue:{fields:i.document.fields}}),f=Mt.newFoundDocument(s,o,l,h),m=i.targetIds||[],y=i.removedTargetIds||[];n=new xc(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Qd(t,i.document),o=i.readTime?ai(i.readTime):ge.min(),l=Mt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new xc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Qd(t,i.document),o=i.removedTargetIds||[];n=new xc([],o,s,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new DA(s,o),h=i.targetId;n=new eT(h,l)}}return n}function GA(t,e){let n;if(e instanceof Ql)n={update:Uy(t,e.key,e.value)};else if(e instanceof XE)n={delete:_p(t,e.key)};else if(e instanceof Fr)n={update:Uy(t,e.key,e.data),updateMask:ik(e.fieldMask)};else{if(!(e instanceof NA))return ce(16599,{Vt:e.type});n={verify:_p(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Vl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof zl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Fl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof oh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ce(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:qA(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ce(27497)}(t,e.precondition)),n}function KA(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?ai(s.updateTime):ai(o);return l.isEqual(ge.min())&&(l=ai(o)),new RA(l,s.transformResults||[])}(n,e))):[]}function QA(t,e){return{documents:[rT(t,e.path)]}}function YA(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rT(t,s);const o=function(m){if(m.length!==0)return aT(qn.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:ao(E.field),direction:ek(E.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=mp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:n,parent:s}}function XA(t){let e=$A(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Oe(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(w){const E=oT(w);return E instanceof qn&&OE(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(E=>function(z){return new Dl(lo(z.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(w){let E;return E=typeof w=="object"?w.value:w,Vh(E)?null:E}(n.limit));let f=null;n.startAt&&(f=function(w){const E=!!w.before,R=w.values||[];return new sh(R,E)}(n.startAt));let m=null;return n.endAt&&(m=function(w){const E=!w.before,R=w.values||[];return new sh(R,E)}(n.endAt)),gA(e,s,l,o,h,"F",f,m)}function JA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=lo(n.unaryFilter.field);return lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=lo(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=lo(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=lo(n.unaryFilter.field);return lt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return lt.create(lo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(i=>oT(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function ek(t){return BA[t]}function tk(t){return UA[t]}function nk(t){return HA[t]}function ao(t){return{fieldPath:t.canonicalString()}}function lo(t){return xt.fromServerFormat(t.fieldPath)}function aT(t){return t instanceof lt?function(n){if(n.op==="=="){if(ky(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(Ay(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ky(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(Ay(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:tk(n.op),value:n.value}}}(t):t instanceof qn?function(n){const i=n.getFilters().map(s=>aT(s));return i.length===1?i[0]:{compositeFilter:{op:nk(n.op),filters:i}}}(t):ce(54877,{filter:t})}function ik(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,i,s,o=ge.min(),l=ge.min(),h=Ct.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.yt=e}}function sk(t){const e=XA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Cn=new ak}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(kr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class ak{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new dt(je.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new dt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uT=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(uT,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LruGarbageCollector",lk=1048576;function qy([t,e],[n,i]){const s=Se(t,n);return s===0?Se(e,i):s}class uk{constructor(e){this.Ir=e,this.buffer=new dt(qy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();qy(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Wy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){na(n)?ne(Wy,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Vr(3e5)})}}class hk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Dh.ce);const i=new uk(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Hy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,l,h,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(i=w,h=Date.now(),this.removeTargets(e,i,n))).next(w=>(o=w,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(m=Date.now(),so()<=xe.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function dk(t,e){return new hk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changes=new Cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&hl(i.mutation,s,ln.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=Ka();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ls();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Fi();const l=cl(),h=function(){return cl()}();return n.forEach((f,m)=>{const y=i.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Fr)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),hl(y.mutation,m,y.mutation.getFieldMask(),He.now())):l.set(m.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,y)=>l.set(m,y)),n.forEach((m,y)=>h.set(m,new pk(y,l.get(m)??null))),h))}recalculateAndSaveOverlays(e,n){const i=cl();let s=new Ke((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let y=i.get(f)||ln.empty();y=h.applyToLocalView(m,y),i.set(f,y);const w=(s.get(h.batchId)||Pe()).add(f);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,y=f.value,w=WE();y.forEach(E=>{if(!o.has(E)){const R=QE(n.get(E),i.get(E));R!==null&&w.set(E,R),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Z.resolve(ls());let h=bl,f=o;return l.next(m=>Z.forEach(m,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(y)?Z.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,Pe())).next(y=>({batchId:h,changes:HE(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=Ka();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,f=>{const m=function(w,E){return new ia(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(y=>{y.forEach((w,E)=>{l=l.insert(w,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((f,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Mt.newInvalidDocument(y)))});let h=Ka();return l.forEach((f,m)=>{const y=o.get(f);y!==void 0&&hl(y.mutation,m,ln.empty(),He.now()),Bh(n,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ai(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:sk(s.bundledQuery),readTime:ai(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.overlays=new Ke(ae.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ls();return Z.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const s=ls(),o=n.length+1,l=new ae(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>i&&s.set(f.getKey(),f)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ke((m,y)=>m-y);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let y=o.get(m.largestBatchId);y===null&&(y=ls(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=ls(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=s)););return Z.resolve(h)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new OA(n,i));let o=this.qr.get(n);o===void 0&&(o=Pe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Qr=new dt(yt.$r),this.Ur=new dt(yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new yt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new yt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ae(new je([])),i=new yt(n,e),s=new yt(n,e+1),o=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new je([])),i=new yt(n,e),s=new yt(n,e+1);let o=Pe();return this.Ur.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new yt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dt(yt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new MA(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new yt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Mm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],l=>{const h=this.Xr(l.Yr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new dt(Se);return n.forEach(s=>{const o=new yt(s,0),l=new yt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],h=>{i=i.add(h.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ae.isDocumentKey(o)||(o=o.child(""));const l=new yt(new ae(o),0);let h=new dt(Se);return this.Zr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.Yr)),!0)},l),Z.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,s=>{const o=new yt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new yt(n,0),s=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.ri=e,this.docs=function(){return new Ke(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Fi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Mt.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Fi();const l=n.path,h=new ae(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||GC(ZC(y),i)<=0||(s.has(y.key)||Bh(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,s){ce(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Ek(this)}getSize(e){return Z.resolve(this.size)}}class Ek extends fk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.persistence=e,this.si=new Cs(n=>Vm(n),zm),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Hm,this.targetCount=0,this.ai=$o.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new yk,this.referenceDelegate=e(this),this.Pi=new Tk(this),this.indexManager=new ok,this.remoteDocumentCache=function(s){return new wk(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new rk(n),this.Ii=new gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new vk(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ne("MemoryPersistence","Starting transaction:",e);const s=new Ik(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class Ik extends QC{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Ri=new Hm,this.Vi=null}static mi(e){return new Wm(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const s=ae.fromPath(i);return this.gi(e,s).next(o=>{o||n.removeEntry(s,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lh{constructor(e,n){this.persistence=e,this.pi=new Cs(i=>JC(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=dk(this,n)}static mi(e,n){return new lh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,s)=>this.br(e,i,s).next(o=>o?Z.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ge.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ec(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Pe(),s=Pe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new qm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mP()?8:YC(Dt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new xk;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.Vs)return this.bs(e,n,l,h.size)})}).next(()=>o.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(so()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(so()<=xe.DEBUG&&ne("QueryEngine","Query:",oo(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(so()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(n))):Z.resolve())}ys(e,n){if(Ny(n))return Z.resolve(null);let i=oi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pp(n,null,"F"),i=oi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Pe(...o);return this.ps.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.Ds(n,h);return this.Cs(n,m,l,f.readTime)?this.ys(e,pp(n,null,"F")):this.vs(e,m,n,f)}))})))}ws(e,n,i,s){return Ny(n)||s.isEqual(ge.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,s)?Z.resolve(null):(so()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oo(n)),this.vs(e,l,n,$C(s,bl)).next(h=>h))})}Ds(e,n){let i=new dt(BE(e));return n.forEach((s,o)=>{Bh(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return so()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",oo(n)),this.ps.getDocumentsMatchingQuery(e,n,kr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="LocalStore",Pk=3e8;class Ck{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(Se),this.xs=new Cs(o=>Vm(o),zm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ak(t,e,n,i){return new Ck(t,e,n,i)}async function hT(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let f=Pe();for(const m of s){l.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of o){h.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(m=>({Ls:m,removedBatchIds:l,addedBatchIds:h}))})})}function kk(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,f,m,y){const w=m.batch,E=w.keys();let R=Z.resolve();return E.forEach(z=>{R=R.next(()=>y.getEntry(f,z)).next(D=>{const W=m.docVersions.get(z);Oe(W!==null,48541),D.version.compareTo(W)<0&&(w.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),y.addEntry(D)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(f,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Pe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function dT(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Rk(t,e){const n=_e(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const h=[];e.targetChanges.forEach((y,w)=>{const E=s.get(w);if(!E)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(o,y.addedDocuments,w)));let R=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Ct.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,i)),s=s.insert(w,R),function(D,W,b){return D.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Pk?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(E,R,y)&&h.push(n.Pi.updateTargetData(o,R))});let f=Fi(),m=Pe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(Lk(o,l,e.documentUpdates).next(y=>{f=y.ks,m=y.qs})),!i.isEqual(ge.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next(w=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(n.Ms=s,o))}function Lk(t,e,n){let i=Pe(),s=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Fi();return n.forEach((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(ge.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):ne($m,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{ks:l,qs:s}})}function bk(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Nk(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(o=>o?(s=o,Z.resolve(s)):n.Pi.allocateTargetId(i).next(l=>(s=new dr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function vp(t,e,n){const i=_e(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!na(l))throw l;ne($m,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function $y(t,e,n){const i=_e(t);let s=ge.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,y){const w=_e(f),E=w.xs.get(y);return E!==void 0?Z.resolve(w.Ms.get(E)):w.Pi.getTargetData(m,y)}(i,l,oi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next(f=>{o=f})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:ge.min(),n?o:Pe())).next(h=>(Mk(i,yA(e),h),{documents:h,Qs:o})))}function Mk(t,e,n){let i=t.Os.get(e)||ge.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Zy{constructor(){this.activeTargetIds=xA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ok{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc=null;function wp(){return sc===null?sc=function(){return 268435456+Math.round(2147483648*Math.random())}():sc++,"0x"+sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="RestConnection",Vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===ih?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const l=wp(),h=this.zo(e,n.toUriEncodedString());ne(Yd,`Sending RPC '${e}' ${l}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:m}=new URL(h),y=Xo(m);return this.Jo(e,h,f,i,y).then(w=>(ne(Yd,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Uo(Yd,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",i),w})}Ho(e,n,i,s,o,l){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const i=Vk[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class jk extends zk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const l=wp();return new Promise((h,f)=>{const m=new pE;m.setWithCredentials(!0),m.listenOnce(mE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wc.NO_ERROR:const w=m.getResponseJson();ne(Lt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case wc.TIMEOUT:ne(Lt,`RPC '${e}' ${l} timed out`),f(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const E=m.getStatus();if(ne(Lt,`RPC '${e}' ${l} failed with status:`,E,"response text:",m.getResponseText()),E>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const z=R==null?void 0:R.error;if(z&&z.status&&z.message){const D=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(S)>=0?S:$.UNKNOWN}(z.status);f(new ee(D,z.message))}else f(new ee($.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ee($.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ne(Lt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);ne(Lt,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",y,i,15)})}T_(e,n,i){const s=wp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=yE(),h=_E(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=o.join("");ne(Lt,`Creating RPC '${e}' stream ${s}: ${y}`,f);const w=l.createWebChannel(y,f);this.I_(w);let E=!1,R=!1;const z=new Fk({Yo:W=>{R?ne(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,W):(E||(ne(Lt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),E=!0),ne(Lt,`RPC '${e}' stream ${s} sending:`,W),w.send(W))},Zo:()=>w.close()}),D=(W,b,S)=>{W.listen(b,O=>{try{S(O)}catch(q){setTimeout(()=>{throw q},0)}})};return D(w,Ga.EventType.OPEN,()=>{R||(ne(Lt,`RPC '${e}' stream ${s} transport opened.`),z.o_())}),D(w,Ga.EventType.CLOSE,()=>{R||(R=!0,ne(Lt,`RPC '${e}' stream ${s} transport closed`),z.a_(),this.E_(w))}),D(w,Ga.EventType.ERROR,W=>{R||(R=!0,Uo(Lt,`RPC '${e}' stream ${s} transport errored. Name:`,W.name,"Message:",W.message),z.a_(new ee($.UNAVAILABLE,"The operation could not be completed")))}),D(w,Ga.EventType.MESSAGE,W=>{var b;if(!R){const S=W.data[0];Oe(!!S,16349);const O=S,q=(O==null?void 0:O.error)||((b=O[0])==null?void 0:b.error);if(q){ne(Lt,`RPC '${e}' stream ${s} received error:`,q);const Q=q.status;let Y=function(C){const N=ot[C];if(N!==void 0)return JE(N)}(Q),P=q.message;Y===void 0&&(Y=$.INTERNAL,P="Unknown error status: "+Q+" with message "+q.message),R=!0,z.a_(new ee(Y,P)),w.close()}else ne(Lt,`RPC '${e}' stream ${s} received:`,S),z.u_(S)}}),D(h,gE.STAT_EVENT,W=>{W.stat===ap.PROXY?ne(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):W.stat===ap.NOPROXY&&ne(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{z.__()},0),z}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){return new WA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="PersistentStream";class pT{constructor(e,n,i,s,o,l,h,f){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ee($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(Qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ne(Qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bk extends pT{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZA(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?ai(l.readTime):ge.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=yp(this.serializer),n.addTarget=function(o,l){let h;const f=l.target;if(h=dp(f)?{documents:QA(o,f)}:{query:YA(o,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=nT(o,l.resumeToken);const m=mp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=ah(o,l.snapshotVersion.toTimestamp());const m=mp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=JA(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=yp(this.serializer),n.removeTarget=e,this.q_(n)}}class Uk extends pT{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KA(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=yp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>GA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{}class Wk extends Hk{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,gp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Ho(e,gp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ee($.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zi(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="RemoteStore";class $k{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{As(this)&&(ne(Ts,"Restarting streams for network reachability change."),await async function(f){const m=_e(f);m.Ea.add(4),await Xl(m),m.Ra.set("Unknown"),m.Ea.delete(4),await $h(m)}(this))})}),this.Ra=new qk(i,s)}}async function $h(t){if(As(t))for(const e of t.da)await e(!0)}async function Xl(t){for(const e of t.da)await e(!1)}function mT(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qm(n)?Km(n):ra(n).O_()&&Gm(n,e))}function Zm(t,e){const n=_e(t),i=ra(n);n.Ia.delete(e),i.O_()&&gT(n,e),n.Ia.size===0&&(i.O_()?i.L_():As(n)&&n.Ra.set("Unknown"))}function Gm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ra(t).Y_(e)}function gT(t,e){t.Va.Ue(e),ra(t).Z_(e)}function Km(t){t.Va=new jA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ra(t).start(),t.Ra.ua()}function Qm(t){return As(t)&&!ra(t).x_()&&t.Ia.size>0}function As(t){return _e(t).Ea.size===0}function _T(t){t.Va=void 0}async function Zk(t){t.Ra.set("Online")}async function Gk(t){t.Ia.forEach((e,n)=>{Gm(t,e)})}async function Kk(t,e){_T(t),Qm(t)?(t.Ra.ha(e),Km(t)):t.Ra.set("Unknown")}async function Qk(t,e,n){if(t.Ra.set("Online"),e instanceof tT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))}(t,e)}catch(i){ne(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uh(t,i)}else if(e instanceof xc?t.Va.Ze(e):e instanceof eT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const i=await dT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(m);y&&o.Ia.set(m,y.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,m)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Ct.EMPTY_BYTE_STRING,y.snapshotVersion)),gT(o,f);const w=new dr(y.target,f,m,y.sequenceNumber);Gm(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ne(Ts,"Failed to raise snapshot:",i),await uh(t,i)}}async function uh(t,e,n){if(!na(e))throw e;t.Ea.add(1),await Xl(t),t.Ra.set("Offline"),n||(n=()=>dT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $h(t)})}function yT(t,e){return e().catch(n=>uh(t,n,e))}async function Zh(t){const e=_e(t),n=Nr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mm;for(;Yk(e);)try{const s=await bk(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,Xk(e,s)}catch(s){await uh(e,s)}vT(e)&&wT(e)}function Yk(t){return As(t)&&t.Ta.length<10}function Xk(t,e){t.Ta.push(e);const n=Nr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function vT(t){return As(t)&&!Nr(t).x_()&&t.Ta.length>0}function wT(t){Nr(t).start()}async function Jk(t){Nr(t).ra()}async function eR(t){const e=Nr(t);for(const n of t.Ta)e.ea(n.mutations)}async function tR(t,e,n){const i=t.Ta.shift(),s=jm.from(i,e,n);await yT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zh(t)}async function nR(t,e){e&&Nr(t).X_&&await async function(i,s){if(function(l){return VA(l)&&l!==$.ABORTED}(s.code)){const o=i.Ta.shift();Nr(i).B_(),await yT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Zh(i)}}(t,e),vT(t)&&wT(t)}async function Yy(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),ne(Ts,"RemoteStore received new credentials");const i=As(n);n.Ea.add(3),await Xl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $h(n)}async function iR(t,e){const n=_e(t);e?(n.Ea.delete(2),await $h(n)):e||(n.Ea.add(2),await Xl(n),n.Ra.set("Unknown"))}function ra(t){return t.ma||(t.ma=function(n,i,s){const o=_e(n);return o.sa(),new Bk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Zk.bind(null,t),t_:Gk.bind(null,t),r_:Kk.bind(null,t),H_:Qk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Qm(t)?Km(t):t.Ra.set("Unknown")):(await t.ma.stop(),_T(t))})),t.ma}function Nr(t){return t.fa||(t.fa=function(n,i,s){const o=_e(n);return o.sa(),new Uk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jk.bind(null,t),r_:nR.bind(null,t),ta:eR.bind(null,t),na:tR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zh(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(Ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Ym(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(zi("AsyncQueue",`${e}: ${t}`),na(t))return new ee($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.ga=new Ke(ae.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Zo{constructor(e,n,i,s,o,l,h,f,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Zo(e,n,ko.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class sR{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=_e(n),o=s.queries;s.queries=Jy(),o.forEach((l,h)=>{for(const f of h.Sa)f.onError(i)})})(this,new ee($.ABORTED,"Firestore shutting down"))}}function Jy(){return new Cs(t=>jE(t),jh)}async function ET(t,e){const n=_e(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new rR,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Xm(l,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Jm(n)}async function TT(t,e){const n=_e(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oR(t,e){const n=_e(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&Jm(n)}function aR(t,e,n){const i=_e(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function Jm(t){t.Ca.forEach(e=>{e.next()})}var Ep,ev;(ev=Ep||(Ep={})).Ma="default",ev.Cache="cache";class IT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class lR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=BE(e),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Xy,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,w)=>{const E=s.get(y),R=Bh(this.query,w)?w:null,z=!!E&&this.mutatedKeys.has(E.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let W=!1;E&&R?E.data.isEqual(R.data)?z!==D&&(i.track({type:3,doc:R}),W=!0):this.su(E,R)||(i.track({type:2,doc:R}),W=!0,(f&&this.eu(R,f)>0||m&&this.eu(R,m)<0)&&(h=!0)):!E&&R?(i.track({type:0,doc:R}),W=!0):E&&!R&&(i.track({type:1,doc:E}),W=!0,(f||m)&&(h=!0)),W&&(R?(l=l.add(R),o=D?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,w)=>function(R,z){const D=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:W})}};return D(R)-D(z)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,m=f!==this.Za;return this.Za=f,l.length!==0||m?{snapshot:new Zo(this.query,e.tu,o,l,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new ST(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new xT(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const eg="SyncEngine";class uR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cR{constructor(e){this.key=e,this.hu=!1}}class hR{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Cs(h=>jE(h),jh),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ae.comparator),this.Au=new Map,this.Ru=new Hm,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dR(t,e,n=!0){const i=LT(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await PT(i,e,n,!0),s}async function fR(t,e){const n=LT(t);await PT(n,e,!0,!1)}async function PT(t,e,n,i){const s=await Nk(t.localStore,oi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await pR(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&mT(t.remoteStore,s),h}async function pR(t,e,n,i,s){t.pu=(w,E,R)=>async function(D,W,b,S){let O=W.view.ru(b);O.Cs&&(O=await $y(D.localStore,W.query,!1).then(({documents:P})=>W.view.ru(P,O)));const q=S&&S.targetChanges.get(W.targetId),Q=S&&S.targetMismatches.get(W.targetId)!=null,Y=W.view.applyChanges(O,D.isPrimaryClient,q,Q);return nv(D,W.targetId,Y.au),Y.snapshot}(t,w,E,R);const o=await $y(t.localStore,e,!0),l=new lR(e,o.Qs),h=l.ru(o.documents),f=Yl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,f);nv(t,n,m.au);const y=new uR(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function mR(t,e,n){const i=_e(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!jh(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await vp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Zm(i.remoteStore,s.targetId),Tp(i,s.targetId)}).catch(ta)):(Tp(i,s.targetId),await vp(i.localStore,s.targetId,!0))}async function gR(t,e){const n=_e(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zm(n.remoteStore,i.targetId))}async function _R(t,e,n){const i=xR(t);try{const s=await function(l,h){const f=_e(l),m=He.now(),y=h.reduce((R,z)=>R.add(z.key),Pe());let w,E;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let z=Fi(),D=Pe();return f.Ns.getEntries(R,y).next(W=>{z=W,z.forEach((b,S)=>{S.isValidDocument()||(D=D.add(b))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,z)).next(W=>{w=W;const b=[];for(const S of h){const O=bA(S,w.get(S.key).overlayedDocument);O!=null&&b.push(new Fr(S.key,O,bE(O.value.mapValue),Un.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,b,h)}).next(W=>{E=W;const b=W.applyToLocalDocumentSet(w,D);return f.documentOverlayCache.saveOverlays(R,W.batchId,b)})}).then(()=>({batchId:E.batchId,changes:HE(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new Ke(Se)),m=m.insert(h,f),l.Vu[l.currentUser.toKey()]=m}(i,s.batchId,n),await Jl(i,s.changes),await Zh(i.remoteStore)}catch(s){const o=Xm(s,"Failed to persist write");n.reject(o)}}async function CT(t,e){const n=_e(t);try{const i=await Rk(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Oe(l.hu,14607):s.removedDocuments.size>0&&(Oe(l.hu,42227),l.hu=!1))}),await Jl(n,i,e)}catch(i){await ta(i)}}function tv(t,e,n){const i=_e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const f=_e(l);f.onlineState=h;let m=!1;f.queries.forEach((y,w)=>{for(const E of w.Sa)E.va(h)&&(m=!0)}),m&&Jm(f)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function yR(t,e,n){const i=_e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Ke(ae.comparator);l=l.insert(o,Mt.newNoDocument(o,ge.min()));const h=Pe().add(o),f=new Wh(ge.min(),new Map,new Ke(Se),l,h);await CT(i,f),i.du=i.du.remove(o),i.Au.delete(e),tg(i)}else await vp(i.localStore,e,!1).then(()=>Tp(i,e,n)).catch(ta)}async function vR(t,e){const n=_e(t),i=e.batch.batchId;try{const s=await kk(n.localStore,e);kT(n,i,null),AT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jl(n,s)}catch(s){await ta(s)}}async function wR(t,e,n){const i=_e(t);try{const s=await function(l,h){const f=_e(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next(w=>(Oe(w!==null,37113),y=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(i.localStore,e);kT(i,e,n),AT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Jl(i,s)}catch(s){await ta(s)}}function AT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function kT(t,e,n){const i=_e(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||RT(t,i)})}function RT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Zm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tg(t))}function nv(t,e,n){for(const i of n)i instanceof xT?(t.Ru.addReference(i.key,e),ER(t,i)):i instanceof ST?(ne(eg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||RT(t,i.key)):ce(19791,{wu:i})}function ER(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ne(eg,"New document in limbo: "+n),t.Eu.add(i),tg(t))}function tg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(je.fromString(e)),i=t.fu.next();t.Au.set(i,new cR(n)),t.du=t.du.insert(n,i),mT(t.remoteStore,new dr(oi(Fh(n.path)),i,"TargetPurposeLimboResolution",Dh.ce))}}async function Jl(t,e,n){const i=_e(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,f)=>{l.push(i.pu(f,e,n).then(m=>{var y;if((m||n)&&i.isPrimaryClient){const w=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=qm.As(f.targetId,m);o.push(w)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(f,m){const y=_e(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(m,E=>Z.forEach(E.Es,R=>y.persistence.referenceDelegate.addReference(w,E.targetId,R)).next(()=>Z.forEach(E.ds,R=>y.persistence.referenceDelegate.removeReference(w,E.targetId,R)))))}catch(w){if(!na(w))throw w;ne($m,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const R=y.Ms.get(E),z=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(z);y.Ms=y.Ms.insert(E,D)}}}(i.localStore,o))}async function TR(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){ne(eg,"User change. New user:",e.toKey());const i=await hT(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(f=>{f.reject(new ee($.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Jl(n,i.Ls)}}function IR(t,e){const n=_e(t),i=n.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let s=Pe();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function LT(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yR.bind(null,e),e.Pu.H_=oR.bind(null,e.eventManager),e.Pu.yu=aR.bind(null,e.eventManager),e}function xR(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wR.bind(null,e),e}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ak(this.persistence,new Sk,e.initialUser,this.serializer)}Cu(e){return new cT(Wm.mi,this.serializer)}Du(e){return new Ok}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class SR extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof lh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ck(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new cT(i=>lh.mi(i,n),this.serializer)}}class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TR.bind(null,this.syncEngine),await iR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sR}()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),i=function(o){return new jk(o)}(e.databaseInfo);return function(o,l,h,f){return new Wk(o,l,h,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new $k(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>tv(this.syncEngine,n,0),function(){return Ky.v()?new Ky:new Dk}())}createSyncEngine(e,n){return function(s,o,l,h,f,m,y){const w=new hR(s,o,l,h,f,m);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=_e(s);ne(Ts,"RemoteStore shutting down."),o.Ea.add(5),await Xl(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class PR{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ne(Mr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ne(Mr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await hT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CR(t);ne(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Yy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Yy(e.remoteStore,s)),t._onlineComponents=e}async function CR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Mr,"Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new ch)}}else ne(Mr,"Using default OfflineComponentProvider"),await Jd(t,new SR(void 0));return t._offlineComponents}async function NT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Mr,"Using user provided OnlineComponentProvider"),await iv(t,t._uninitializedComponentsProvider._online)):(ne(Mr,"Using default OnlineComponentProvider"),await iv(t,new Ip))),t._onlineComponents}function AR(t){return NT(t).then(e=>e.syncEngine)}async function xp(t){const e=await NT(t),n=e.eventManager;return n.onListen=dR.bind(null,e.syncEngine),n.onUnlisten=mR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gR.bind(null,e.syncEngine),n}function kR(t,e,n={}){const i=new Sr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,m){const y=new bT({next:E=>{y.Nu(),l.enqueueAndForget(()=>TT(o,w));const R=E.docs.has(h);!R&&E.fromCache?m.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&f&&f.source==="server"?m.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new IT(Fh(h.path),y,{includeMetadataChanges:!0,qa:!0});return ET(o,w)}(await xp(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="firestore.googleapis.com",sv=!0;class ov{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OT,this.ssl=sv}else this.host=e.host,this.ssl=e.ssl??sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MT(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new OC;switch(i.type){case"firstParty":return new FC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=rv.get(n);i&&(ne("ComponentProvider","Removing Datastore"),rv.delete(n),i.terminate())}(this),Promise.resolve()}}function RR(t,e,n,i={}){var m;t=Bn(t,Gh);const s=Xo(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(sE(`https://${h}`),oE("Firestore",!0)),o.host!==OT&&o.host!==h&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:s,emulatorOptions:i};if(!vs(f,l)&&(t._setSettings(f),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=bt.MOCK_USER;else{y=oP(i.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new bt(E)}t._authCredentials=new DC(new wE(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class et{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Kl(n,et._jsonSchema))return new et(e,i||null,new ae(je.fromString(n.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:ut("string",et._jsonSchemaVersion),referencePath:ut("string")};class Pr extends ks{constructor(e,n,i){super(e,n,Fh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ae(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Kh(t,e,...n){if(t=Et(t),EE("collection","path",e),t instanceof Gh){const i=je.fromString(e,...n);return vy(i),new Pr(t,null,i)}{if(!(t instanceof et||t instanceof Pr))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return vy(i),new Pr(t.firestore,null,i)}}function sa(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Nm.newId()),EE("doc","path",e),t instanceof Gh){const i=je.fromString(e,...n);return yy(i),new et(t,null,new ae(i))}{if(!(t instanceof et||t instanceof Pr))throw new ee($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return yy(i),new et(t.firestore,t instanceof Pr?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="AsyncQueue";class lv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fT(this,"async_queue_retry"),this._c=()=>{const i=Xd();i&&ne(av,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Sr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;ne(av,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,zi("INTERNAL UNHANDLED ERROR: ",uv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ym.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&ce(47125,{Pc:uv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function uv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Is extends Gh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new lv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lv(e),this._firestoreClient=void 0,await e}}}function LR(t,e){const n=typeof t=="object"?t:cE(),i=typeof t=="string"?t:ih,s=Lm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=rP("firestore");o&&RR(s,...o)}return s}function ng(t){if(t._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bR(t),t._firestoreClient}function bR(t){var i,s,o;const e=t._freezeSettings(),n=function(h,f,m,y){return new nA(h,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,MT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(Ct.fromBase64String(e))}catch(n){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:ut("string",In._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:ut("string",li._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ui(e.vectorValues);throw new ee($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:ut("string",ui._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=/^__.*__$/;class MR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class DT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class ig{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VT(this.Ac)&&NR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OR{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qh(e)}Cc(e,n,i,s=!1){return new ig({Ac:e,methodName:n,Dc:i,path:xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(t){const e=t._freezeSettings(),n=qh(t._databaseId);return new OR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zT(t,e,n,i,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);sg("Data must be an object, but it was:",l,i);const h=FT(i,l);let f,m;if(o.merge)f=new ln(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const E=Sp(e,w,n);if(!l.contains(E))throw new ee($.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);BT(y,E)||y.push(E)}f=new ln(y),m=l.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=l.fieldTransforms;return new MR(new Qt(h),f,m)}class Jh extends Yh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}class rg extends Yh{_toFieldTransform(e){return new AA(e.path,new Vl)}isEqual(e){return e instanceof rg}}function DR(t,e,n,i){const s=t.Cc(1,e,n);sg("Data must be an object, but it was:",s,i);const o=[],l=Qt.empty();zr(i,(f,m)=>{const y=og(e,f,n);m=Et(m);const w=s.yc(y);if(m instanceof Jh)o.push(y);else{const E=eu(m,w);E!=null&&(o.push(y),l.set(y,E))}});const h=new ln(o);return new DT(l,h,s.fieldTransforms)}function VR(t,e,n,i,s,o){const l=t.Cc(1,e,n),h=[Sp(e,i,n)],f=[s];if(o.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Sp(e,o[E])),f.push(o[E+1]);const m=[],y=Qt.empty();for(let E=h.length-1;E>=0;--E)if(!BT(m,h[E])){const R=h[E];let z=f[E];z=Et(z);const D=l.yc(R);if(z instanceof Jh)m.push(R);else{const W=eu(z,D);W!=null&&(m.push(R),y.set(R,W))}}const w=new ln(m);return new DT(y,w,l.fieldTransforms)}function zR(t,e,n,i=!1){return eu(n,t.Cc(i?4:3,e))}function eu(t,e){if(jT(t=Et(t)))return sg("Unsupported field value:",e,t),FT(t,e);if(t instanceof Yh)return function(i,s){if(!VT(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let f=eu(h,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SA(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=He.fromDate(i);return{timestampValue:ah(s.serializer,o)}}if(i instanceof He){const o=new He(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ah(s.serializer,o)}}if(i instanceof li)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof In)return{bytesValue:nT(s.serializer,i._byteString)};if(i instanceof et){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Um(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ui)return function(l,h){return{mapValue:{fields:{[RE]:{stringValue:LE},[rh]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Fm(h.serializer,m)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Oh(i)}`)}(t,e)}function FT(t,e){const n={};return xE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(i,s)=>{const o=eu(s,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function jT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof li||t instanceof In||t instanceof et||t instanceof Yh||t instanceof ui)}function sg(t,e,n){if(!jT(n)||!TE(n)){const i=Oh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Sp(t,e,n){if((e=Et(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return og(t,e);throw hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const FR=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(FR)>=0)throw hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qh(...e.split("."))._internalPath}catch{throw hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new ee($.INVALID_ARGUMENT,h+t+f)}function BT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jR extends UT{data(){return super.data()}}function ed(t,e){return typeof e=="string"?og(t,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}class HT extends ag{}function WT(t,e,...n){let i=[];e instanceof ag&&i.push(e),i=i.concat(n),function(o){const l=o.filter(f=>f instanceof lg).length,h=o.filter(f=>f instanceof td).length;if(l>1||l>0&&h>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class td extends HT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new td(e,n,i)}_apply(e){const n=this._parse(e);return $T(e._query,n),new ks(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=Xh(e.firestore);return function(o,l,h,f,m,y,w){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){dv(w,y);const z=[];for(const D of w)z.push(hv(f,o,D));E={arrayValue:{values:z}}}else E=hv(f,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||dv(w,y),E=zR(h,l,w,y==="in"||y==="not-in");return lt.create(m,y,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pp(t,e,n){const i=e,s=ed("where",t);return td._create(s,i,n)}class lg extends ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const f of h)$T(l,f),l=fp(l,f)}(e._query,n),new ks(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ug extends HT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ug(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(o,l)}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new ia(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qT(t,e="asc"){const n=e,i=ed("orderBy",t);return ug._create(i,n)}function hv(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(e)&&n.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(je.fromString(n));if(!ae.isDocumentKey(i))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cy(t,new ae(i))}if(n instanceof et)return Cy(t,n._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(n)}.`)}function dv(t,e){if(!Array.isArray(t)||t.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UR{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return zr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[rh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>nt(l.doubleValue));return new ui(n)}convertGeoPoint(e){return new li(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=zh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=je.fromString(e);Oe(lT(i),9688,{name:e});const s=new Ml(i.get(1),i.get(3)),o=new ae(i.popFirst(5));return s.isEqual(n)||zi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends UT{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ed("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:ut("string",ds._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class Sc extends ds{data(e={}){return super.data(e)}}class Ro{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ya(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Sc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const f=new Sc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ya(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new Sc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ya(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:HR(h.type),doc:f,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){t=Bn(t,et);const e=Bn(t.firestore,Is);return kR(ng(e),t._key).then(n=>YT(e,t,n))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:ut("string",Ro._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class GT extends UR{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,n)}}function KT(t,e,n){t=Bn(t,et);const i=Bn(t.firestore,Is),s=ZT(t.converter,e,n);return hg(i,[zT(Xh(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Un.none())])}function QT(t,e,n,...i){t=Bn(t,et);const s=Bn(t.firestore,Is),o=Xh(s);let l;return l=typeof(e=Et(e))=="string"||e instanceof Qh?VR(o,"updateDoc",t._key,e,n,i):DR(o,"updateDoc",t._key,e),hg(s,[l.toMutation(t._key,Un.exists(!0))])}function qR(t,e){const n=Bn(t.firestore,Is),i=sa(t),s=ZT(t.converter,e);return hg(n,[zT(Xh(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Un.exists(!1))]).then(()=>i)}function cg(t,...e){var f,m,y;t=Et(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||cv(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cv(e[i])){const w=e[i];e[i]=(f=w.next)==null?void 0:f.bind(w),e[i+1]=(m=w.error)==null?void 0:m.bind(w),e[i+2]=(y=w.complete)==null?void 0:y.bind(w)}let o,l,h;if(t instanceof et)l=Bn(t.firestore,Is),h=Fh(t._key.path),o={next:w=>{e[i]&&e[i](YT(l,t,w))},error:e[i+1],complete:e[i+2]};else{const w=Bn(t,ks);l=Bn(w.firestore,Is),h=w._query;const E=new GT(l);o={next:R=>{e[i]&&e[i](new Ro(l,E,w,R))},error:e[i+1],complete:e[i+2]},BR(t._query)}return function(E,R,z,D){const W=new bT(D),b=new IT(R,W,z);return E.asyncQueue.enqueueAndForget(async()=>ET(await xp(E),b)),()=>{W.Nu(),E.asyncQueue.enqueueAndForget(async()=>TT(await xp(E),b))}}(ng(l),h,s,o)}function hg(t,e){return function(i,s){const o=new Sr;return i.asyncQueue.enqueueAndForget(async()=>_R(await AR(i),s,o)),o.promise}(ng(t),e)}function YT(t,e,n){const i=n.docs.get(e._key),s=new GT(t);return new ds(t,s,e._key,i,new Ya(n.hasPendingWrites,n.fromCache),e.converter)}function XT(){return new rg("serverTimestamp")}(function(e,n=!0){(function(s){ea=s})(Jo),Bo(new ws("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Is(new VC(i.getProvider("auth-internal")),new jC(l,i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(m.options.projectId,y)}(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ir(py,my,e),Ir(py,my,"esm2020")})();function JT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $R=JT,eI=new Zl("auth","Firebase",JT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new km("@firebase/auth");function ZR(t,...e){dh.logLevel<=xe.WARN&&dh.warn(`Auth (${Jo}): ${t}`,...e)}function Pc(t,...e){dh.logLevel<=xe.ERROR&&dh.error(`Auth (${Jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,...e){throw fg(t,...e)}function Hn(t,...e){return fg(t,...e)}function dg(t,e,n){const i={...$R(),[e]:n};return new Zl("auth","Firebase",i).create(e,{appName:t.name})}function fs(t){return dg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GR(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&di(t,"argument-error"),dg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return eI.create(t,...e)}function de(t,e,...n){if(!t)throw fg(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function ji(t,e){t||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function KR(){return fv()==="http:"||fv()==="https:"}function fv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KR()||dP()||"connection"in navigator)?navigator.onLine:!0}function YR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=uP()||fP()}get(){return QR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e2=new tu(3e4,6e4);function mg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function oa(t,e,n,i,s={}){return nI(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Gl({key:t.config.apiKey,...l}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:f,...o};return hP()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Xo(t.emulatorConfig.host)&&(m.credentials="include"),tI.fetch()(await iI(t,t.config.apiHost,n,h),m)})}async function nI(t,e,n){t._canInitEmulator=!1;const i={...XR,...e};try{const s=new n2(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw oc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw oc(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw oc(t,"user-disabled",l);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw dg(t,y,m);di(t,y)}}catch(s){if(s instanceof Hi)throw s;di(t,"network-request-failed",{message:String(s)})}}async function t2(t,e,n,i,s={}){const o=await oa(t,e,n,i,s);return"mfaPendingCredential"in o&&di(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function iI(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?pg(t.config,s):`${t.config.apiScheme}://${s}`;return JR.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class n2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),e2.get())})}}function oc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Hn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function fh(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r2(t,e=!1){const n=Et(t),i=await n.getIdToken(e),s=gg(i);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:dl(ef(s.auth_time)),issuedAtTime:dl(ef(s.iat)),expirationTime:dl(ef(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ef(t){return Number(t)*1e3}function gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const s=tE(n);return s?JSON.parse(s):(Pc("Failed to decode base64 JWT payload"),null)}catch(s){return Pc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function pv(t){const e=gg(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Hi&&s2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function s2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t){var w;const e=t.auth,n=await t.getIdToken(),i=await jl(t,fh(e,{idToken:n}));de(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?rI(s.providerUserInfo):[],l=l2(t.providerData,o),h=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),m=h?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function a2(t){const e=Et(t);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function rI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e){const n=await nI(t,{},async()=>{const i=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await iI(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return t.emulatorConfig&&Xo(t.emulatorConfig.host)&&(f.credentials="include"),tI.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c2(t,e){return oa(t,"POST","/v2/accounts:revokeToken",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await u2(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Lo;return i&&(de(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(de(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(de(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new o2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ap(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r2(this,e)}reload(){return a2(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await jl(this,i2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,m=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:R,providerData:z,stsTokenManager:D}=n;de(w&&D,e,"internal-error");const W=Lo.fromJSON(this.name,D);de(typeof w=="string",e,"internal-error"),nr(i,e.name),nr(s,e.name),de(typeof E=="boolean",e,"internal-error"),de(typeof R=="boolean",e,"internal-error"),nr(o,e.name),nr(l,e.name),nr(h,e.name),nr(f,e.name),nr(m,e.name),nr(y,e.name);const b=new zn({uid:w,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:R,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:W,createdAt:m,lastLoginAt:y});return z&&Array.isArray(z)&&(b.providerData=z.map(S=>({...S}))),f&&(b._redirectEventId=f),b}static async _fromIdTokenResponse(e,n,i=!1){const s=new Lo;s.updateFromServerResponse(n);const o=new zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ph(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];de(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?rI(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Lo;h.updateFromIdToken(i);const f=new zn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;function Li(t){ji(t instanceof Function,"Expected a class definition");let e=mv.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sI.type="NONE";const gv=sI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n){return`firebase:${t}:${e}:${n}`}class bo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Cc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Cc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fh(this.auth,{idToken:e}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,e):null}return zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bo(Li(gv),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Li(gv);const l=Cc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const y=await m._get(l);if(y){let w;if(typeof y=="string"){const E=await fh(e,{idToken:y}).catch(()=>{});if(!E)break;w=await zn._fromGetAccountInfoResponse(e,E,y)}else w=zn._fromJSON(e,y);m!==o&&(h=w),o=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new bo(o,e,i):(o=f[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new bo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hI(e))return"Blackberry";if(dI(e))return"Webos";if(aI(e))return"Safari";if((e.includes("chrome/")||lI(e))&&!e.includes("edge/"))return"Chrome";if(cI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function oI(t=Dt()){return/firefox\//i.test(t)}function aI(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lI(t=Dt()){return/crios\//i.test(t)}function uI(t=Dt()){return/iemobile/i.test(t)}function cI(t=Dt()){return/android/i.test(t)}function hI(t=Dt()){return/blackberry/i.test(t)}function dI(t=Dt()){return/webos/i.test(t)}function _g(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h2(t=Dt()){var e;return _g(t)&&!!((e=window.navigator)!=null&&e.standalone)}function d2(){return pP()&&document.documentMode===10}function fI(t=Dt()){return _g(t)||cI(t)||dI(t)||hI(t)||/windows phone/i.test(t)||uI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e=[]){let n;switch(t){case"Browser":n=_v(Dt());break;case"Worker":n=`${_v(Dt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const f=e(o);l(f)}catch(f){h(f)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e={}){return oa(t,"GET","/v2/passwordPolicy",mg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=6;class g2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??m2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new f2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fh(this,{idToken:e}),i=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Vn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&(f!=null&&f.user)&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(fs(this));const n=e?Et(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p2(this),n=new g2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await c2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ZR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nd(t){return Et(t)}class yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=TP(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y2(t){yg=t}function v2(t){return yg.loadJS(t)}function w2(){return yg.gapiScript}function E2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){const n=Lm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(vs(o,e??{}))return s;di(s,"already-initialized")}return n.initialize({options:e})}function I2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function x2(t,e,n){const i=nd(t);de(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=mI(e),{host:l,port:h}=S2(e),f=h===null?"":`:${h}`,m={url:`${o}//${l}${f}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){de(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),de(vs(m,i.config.emulator)&&vs(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Xo(l)?(sE(`${o}//${l}${f}`),oE("Auth",!0)):P2()}function mI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function S2(t){const e=mI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:vv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:vv(l)}}}function vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function P2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e){return t2(t,"POST","/v1/accounts:signInWithIdp",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="http://localhost";class xs extends gI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new xs(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,No(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:C2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends vg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends nu{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends nu{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends nu{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ur.credential(n,i)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await zn._fromIdTokenResponse(e,i,s),l=wv(i);return new Go({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=wv(i);return new Go({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function wv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Hi{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new mh(e,n,i,s)}}function _I(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(t,o,e,i):o})}async function A2(t,e,n=!1){const i=await jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Go._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e,n=!1){const{auth:i}=t;if(Vn(i.app))return Promise.reject(fs(i));const s="reauthenticate";try{const o=await jl(t,_I(i,s,e,t),n);de(o.idToken,i,"internal-error");const l=gg(o.idToken);de(l,i,"internal-error");const{sub:h}=l;return de(t.uid===h,i,"user-mismatch"),Go._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&di(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(t,e,n=!1){if(Vn(t.app))return Promise.reject(fs(t));const i="signIn",s=await _I(t,i,e),o=await Go._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function L2(t,e,n,i){return Et(t).onIdTokenChanged(e,n,i)}function b2(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function N2(t,e,n,i){return Et(t).onAuthStateChanged(e,n,i)}function M2(t){return Et(t).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=1e3,D2=10;class vI extends yI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);d2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,D2):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vI.type="LOCAL";const V2=vI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI extends yI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wI.type="SESSION";const EI=wI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),f=await z2(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,f)=>{const m=wg("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function j2(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function B2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function H2(){return TI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebaseLocalStorageDb",W2=1,_h="firebaseLocalStorage",xI="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rd(t,e){return t.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function q2(){const t=indexedDB.deleteDatabase(II);return new iu(t).toPromise()}function kp(){const t=indexedDB.open(II,W2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(_h,{keyPath:xI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(_h)?e(i):(i.close(),await q2(),e(await kp()))})})}async function Ev(t,e,n){const i=rd(t,!0).put({[xI]:e,value:n});return new iu(i).toPromise()}async function $2(t,e){const n=rd(t,!1).get(e),i=await new iu(n).toPromise();return i===void 0?null:i.value}function Tv(t,e){const n=rd(t,!0).delete(e);return new iu(n).toPromise()}const Z2=800,G2=3;class SI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>G2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(H2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await B2(),!this.activeServiceWorker)return;this.sender=new F2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await Ev(e,gh,"1"),await Tv(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ev(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=rd(s,!1).getAll();return new iu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SI.type="LOCAL";const K2=SI;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){return e?Li(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends gI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q2(t){return R2(t.auth,new Eg(t),t.bypassAuthState)}function Y2(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),k2(n,new Eg(t),t.bypassAuthState)}async function X2(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),A2(n,new Eg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q2;case"linkViaPopup":case"linkViaRedirect":return X2;case"reauthViaPopup":case"reauthViaRedirect":return Y2;default:di(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new tu(2e3,1e4);async function eL(t,e,n){if(Vn(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));const i=nd(t);GR(t,e,vg);const s=PI(i,n);return new us(i,"signInViaPopup",e,s).executeNotNull()}class us extends CI{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J2.get())};e()}}us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="pendingRedirect",Ac=new Map;class nL extends CI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ac.get(this.auth._key());if(!e){try{const i=await iL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ac.set(this.auth._key(),e)}return this.bypassAuthState||Ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iL(t,e){const n=oL(e),i=sL(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function rL(t,e){Ac.set(t._key(),e)}function sL(t){return Li(t._redirectPersistence)}function oL(t){return Cc(tL,t.config.apiKey,t.name)}async function aL(t,e,n=!1){if(Vn(t.app))return Promise.reject(fs(t));const i=nd(t),s=PI(i,e),l=await new nL(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=10*60*1e3;class uL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!AI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}}function Iv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fL=/^https?/;async function pL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hL(t);for(const n of e)try{if(mL(n))return}catch{}di(t,"unauthorized-domain")}function mL(t){const e=Cp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!fL.test(n))return!1;if(dL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=new tu(3e4,6e4);function xv(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _L(t){return new Promise((e,n)=>{var s,o,l;function i(){xv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xv(),n(Hn(t,"network-request-failed"))},timeout:gL.get()})}if((o=(s=ci().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=ci().gapi)!=null&&l.load)i();else{const h=E2("iframefcb");return ci()[h]=()=>{gapi.load?i():n(Hn(t,"network-request-failed"))},v2(`${w2()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw kc=null,e})}let kc=null;function yL(t){return kc=kc||_L(t),kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new tu(5e3,15e3),wL="__/auth/iframe",EL="emulator/auth/iframe",TL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pg(e,EL):`https://${t.config.authDomain}/${wL}`,i={apiKey:e.apiKey,appName:t.name,v:Jo},s=IL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Gl(i).slice(1)}`}async function SL(t){const e=await yL(t),n=ci().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:xL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Hn(t,"network-request-failed"),h=ci().setTimeout(()=>{o(l)},vL.get());function f(){ci().clearTimeout(h),s(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CL=500,AL=600,kL="_blank",RL="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LL(t,e,n,i=CL,s=AL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...PL,width:i.toString(),height:s.toString(),top:o,left:l},m=Dt().toLowerCase();n&&(h=lI(m)?kL:n),oI(m)&&(e=e||RL,f.scrollbars="yes");const y=Object.entries(f).reduce((E,[R,z])=>`${E}${R}=${z},`,"");if(h2(m)&&h!=="_self")return bL(e||"",h),new Sv(null);const w=window.open(e||"",h,y);de(w,t,"popup-blocked");try{w.focus()}catch{}return new Sv(w)}function bL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="__/auth/handler",ML="emulator/auth/handler",OL=encodeURIComponent("fac");async function Pv(t,e,n,i,s,o){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Jo,eventId:s};if(e instanceof vg){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",EP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof nu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await t._getAppCheckToken(),m=f?`#${OL}=${encodeURIComponent(f)}`:"";return`${DL(t)}?${Gl(h).slice(1)}${m}`}function DL({config:t}){return t.emulator?pg(t,ML):`https://${t.authDomain}/${NL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class VL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=aL,this._overrideRedirectResult=rL}async _openPopup(e,n,i,s){var l;ji((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Pv(e,n,i,Cp(),s);return LL(e,o,wg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Pv(e,n,i,Cp(),s);return j2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ji(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await SL(e),i=new uL(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tf,{type:tf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[tf];o!==void 0&&n(!!o),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fI()||aI()||_g()}}const zL=VL;var Cv="@firebase/auth",Av="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BL(t){Bo(new ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;de(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pI(t)},m=new _2(i,s,o,f);return I2(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bo(new ws("auth-internal",e=>{const n=nd(e.getProvider("auth").getImmediate());return(i=>new FL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(Cv,Av,jL(t)),Ir(Cv,Av,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=5*60,HL=rE("authIdTokenMaxAge")||UL;let kv=null;const WL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>HL)return;const s=n==null?void 0:n.token;kv!==s&&(kv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function qL(t=cE()){const e=Lm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T2(t,{popupRedirectResolver:zL,persistence:[K2,V2,EI]}),i=rE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=WL(o.toString());b2(n,l,()=>l(n.currentUser)),L2(n,h=>l(h))}}const s=nE("auth");return s&&x2(n,`http://${s}`),n}function $L(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}y2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Hn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",$L().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BL("Browser");const ZL={apiKey:"AIzaSyCeyki8uKDyTDzn2QLKR1EUROwxGDn2FG4",authDomain:"e-rickshaw-finder.firebaseapp.com",projectId:"e-rickshaw-finder",storageBucket:"e-rickshaw-finder.firebasestorage.app",messagingSenderId:"330393348990",appId:"1:330393348990:web:3a7d8e73a6a45f86f3e12f"},kI=uE(ZL),Bi=LR(kI),Tg=qL(kI),GL=new Ci,KL=async()=>{try{return(await eL(Tg,GL)).user}catch(t){throw console.error("Login failed:",t),t}},QL=()=>M2(Tg);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),tn=(t,e)=>{const n=oe.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:f,...m},y)=>oe.createElement("svg",{ref:y,...YL,width:s,height:s,stroke:i,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${XL(t)}`,h].join(" "),...m},[...e.map(([w,E])=>oe.createElement(w,E)),...Array.isArray(f)?f:[f]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=tn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=tn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=tn("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=tn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=tn("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=tn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=tn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=tn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=tn("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=tn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=tn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=tn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=tn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=tn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function sb({onLogin:t}){const e=async()=>{try{const n=await KL();t(n)}catch{alert("Login failed. Please try again.")}};return x.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100dvh",background:"linear-gradient(135deg, #eff6ff, #dbeafe)",padding:"24px",textAlign:"center"},children:x.jsxs("div",{style:{background:"white",padding:"32px 24px",borderRadius:"24px",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",width:"100%",maxWidth:"360px"},children:[x.jsx("div",{style:{background:"#eff6ff",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:x.jsx(rb,{size:40,color:"#2563eb",fill:"#2563eb"})}),x.jsx("h1",{style:{fontSize:"24px",marginBottom:"8px",color:"#1e293b"},children:"Ride Fast"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Find E-Rickshaws nearby instantly."}),x.jsxs("button",{onClick:e,style:{background:"#1e293b",color:"white",border:"none",padding:"16px",borderRadius:"12px",width:"100%",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},children:[x.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"",width:"20",height:"20"}),"Continue with Google"]})]})})}const of=async t=>{try{const e=sa(Bi,"users",t),n=await WR(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},ob=async(t,e)=>{try{await KT(sa(Bi,"users",t),{...e,id:t,createdAt:new Date().toISOString()},{merge:!0})}catch(n){throw console.error("Error creating user profile:",n),n}},ab=async(t,e)=>{try{const n=sa(Bi,"users",t);await QT(n,e)}catch(n){throw console.error("Error updating user profile:",n),n}};function lb({user:t,onComplete:e}){const[n,i]=oe.useState("customer"),[s,o]=oe.useState({name:t.displayName||"",phone1:"",phone2:"",vehicleType:"E-Rickshaw",vehicleImage:""}),[l,h]=oe.useState(!1),f=async m=>{m.preventDefault(),h(!0);try{await ob(t.uid,{...s,role:n,email:t.email,avatar:t.photoURL}),e()}catch(y){alert("Error saving profile: "+y.message),h(!1)}};return x.jsxs("div",{style:{padding:"24px",height:"100dvh",overflowY:"auto",background:"#f8fafc"},children:[x.jsxs("h2",{style:{fontSize:"24px",marginBottom:"8px"},children:["Welcome, ",t.displayName,"!"]}),x.jsx("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Let's set up your profile to get started."}),x.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"32px"},children:[x.jsxs("div",{onClick:()=>i("customer"),style:{flex:1,padding:"16px",borderRadius:"16px",cursor:"pointer",border:n==="customer"?"2px solid #2563eb":"2px solid #e2e8f0",background:n==="customer"?"#eff6ff":"white"},children:[x.jsx("div",{style:{background:"#bfdbfe",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:x.jsx(uo,{size:20,color:"#2563eb"})}),x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"Customer"}),x.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"#64748b"},children:"I want to book rides"})]}),x.jsxs("div",{onClick:()=>i("driver"),style:{flex:1,padding:"16px",borderRadius:"16px",cursor:"pointer",border:n==="driver"?"2px solid #2563eb":"2px solid #e2e8f0",background:n==="driver"?"#eff6ff":"white"},children:[x.jsx("div",{style:{background:"#bfdbfe",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:x.jsx(eb,{size:20,color:"#2563eb"})}),x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"Ride Share"}),x.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"#64748b"},children:"I want to drive"})]})]}),x.jsxs("form",{onSubmit:f,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Full Name"}),x.jsx("input",{type:"text",value:s.name,onChange:m=>o({...s,name:m.target.value}),className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Contact Number 1"}),x.jsx("input",{type:"tel",value:s.phone1,onChange:m=>o({...s,phone1:m.target.value}),placeholder:"+91 00000 00000",className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Contact Number 2 (Optional)"}),x.jsx("input",{type:"tel",value:s.phone2,onChange:m=>o({...s,phone2:m.target.value}),placeholder:"Emergency contact",className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),n==="driver"&&x.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #dcfce7"},children:[x.jsx("h4",{style:{margin:"0 0 16px",color:"#166534"},children:"Vehicle Details"}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Vehicle Type"}),x.jsxs("select",{value:s.vehicleType,onChange:m=>o({...s,vehicleType:m.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #bbf7d0",outline:"none"},children:[x.jsx("option",{value:"E-Rickshaw",children:"E-Rickshaw"}),x.jsx("option",{value:"Car",children:"Car"}),x.jsx("option",{value:"Bike",children:"Bike"})]})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Vehicle Image URL (Optional)"}),x.jsx("input",{type:"text",value:s.vehicleImage,onChange:m=>o({...s,vehicleImage:m.target.value}),placeholder:"https://...",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #bbf7d0",outline:"none"}})]})]}),x.jsx("button",{type:"submit",disabled:l,className:"btn",style:{marginTop:"16px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:l?"Saving...":"Complete Setup"})]})]})}function ub({user:t,userProfile:e,onComplete:n,onCancel:i}){const[s,o]=oe.useState({name:(e==null?void 0:e.name)||t.displayName||"",phone1:(e==null?void 0:e.phone1)||"",phone2:(e==null?void 0:e.phone2)||"",role:(e==null?void 0:e.role)||"customer",vehicleType:(e==null?void 0:e.vehicleType)||"E-Rickshaw",vehicleImage:(e==null?void 0:e.vehicleImage)||"",avatar:(e==null?void 0:e.avatar)||t.photoURL||""}),[l,h]=oe.useState(!1),f=oe.useRef(null),m=oe.useRef(null),y=(E,R)=>{const z=E.target.files[0];if(z){if(z.size>1024*1024){alert("File size too large. Please upload an image smaller than 1MB.");return}const D=new FileReader;D.onloadend=()=>{o(W=>({...W,[R]:D.result}))},D.readAsDataURL(z)}},w=async E=>{E.preventDefault(),h(!0);try{await ab(t.uid,s),alert("Profile updated successfully!"),n()}catch(R){alert("Error updating profile: "+R.message)}finally{h(!1)}};return x.jsxs("div",{style:{padding:"24px",height:"100dvh",overflowY:"auto",background:"#f8fafc",position:"absolute",top:0,left:0,width:"100%",zIndex:50},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[x.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",padding:"8px"},children:x.jsx(JL,{size:24,color:"#1e293b"})}),x.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Edit Profile"})]}),x.jsxs("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:"24px"},children:[x.jsxs("div",{style:{textAlign:"center",position:"relative",width:"fit-content",margin:"0 auto"},children:[x.jsx("img",{src:s.avatar||"https://i.pravatar.cc/150?u=user",alt:"Profile",style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"4px solid white",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),x.jsx("button",{type:"button",onClick:()=>f.current.click(),style:{position:"absolute",bottom:0,right:0,background:"#2563eb",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:x.jsx(Lv,{size:16})}),x.jsx("input",{type:"file",ref:f,style:{display:"none"},accept:"image/*",onChange:E=>y(E,"avatar")})]}),x.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[x.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#64748b"},children:"Personal Details"}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Full Name"}),x.jsx("input",{type:"text",value:s.name,onChange:E=>o({...s,name:E.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Phone Number"}),x.jsx("input",{type:"tel",value:s.phone1,onChange:E=>o({...s,phone1:E.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Emergency Contact"}),x.jsx("input",{type:"tel",value:s.phone2,onChange:E=>o({...s,phone2:E.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]})]}),x.jsxs("div",{className:"card",style:{padding:"16px"},children:[x.jsx("h3",{style:{margin:"0 0 16px",fontSize:"16px",color:"#64748b"},children:"Account Role"}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{type:"button",onClick:()=>o({...s,role:"customer"}),style:{flex:1,padding:"12px",borderRadius:"8px",border:"1px solid",borderColor:s.role==="customer"?"#2563eb":"#e2e8f0",background:s.role==="customer"?"#eff6ff":"white",color:s.role==="customer"?"#2563eb":"#64748b",fontWeight:"600"},children:"Customer"}),x.jsx("button",{type:"button",onClick:()=>o({...s,role:"driver"}),style:{flex:1,padding:"12px",borderRadius:"8px",border:"1px solid",borderColor:s.role==="driver"?"#2563eb":"#e2e8f0",background:s.role==="driver"?"#eff6ff":"white",color:s.role==="driver"?"#2563eb":"#64748b",fontWeight:"600"},children:"Ride Share"})]})]}),s.role==="driver"&&x.jsxs("div",{className:"card",style:{padding:"16px",background:"#f0fdf4",border:"1px solid #dcfce7"},children:[x.jsx("h3",{style:{margin:"0 0 16px",fontSize:"16px",color:"#166534"},children:"Vehicle Information"}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Vehicle Type"}),x.jsxs("select",{value:s.vehicleType,onChange:E=>o({...s,vehicleType:E.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsx("option",{value:"E-Rickshaw",children:"E-Rickshaw"}),x.jsx("option",{value:"Car",children:"Car"}),x.jsx("option",{value:"Bike",children:"Bike"})]})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Vehicle Photo"}),s.vehicleImage?x.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[x.jsx("img",{src:s.vehicleImage,alt:"Vehicle",style:{width:"100%",borderRadius:"8px",height:"150px",objectFit:"cover"}}),x.jsx("button",{type:"button",onClick:()=>o({...s,vehicleImage:""}),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px"},children:"Change"})]}):x.jsxs("div",{onClick:()=>m.current.click(),style:{border:"2px dashed #cbd5e1",borderRadius:"8px",padding:"24px",textAlign:"center",cursor:"pointer",background:"white"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px"},children:x.jsx(Lv,{size:20,color:"#94a3b8"})}),x.jsx("p",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Tap to upload vehicle photo"})]}),x.jsx("input",{type:"file",ref:m,style:{display:"none"},accept:"image/*",onChange:E=>y(E,"vehicleImage")})]})]}),x.jsxs("button",{type:"submit",disabled:l,className:"btn",style:{height:"56px",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"32px"},children:[x.jsx(ib,{size:20}),l?"Saving Changes...":"Save Profile"]})]})]})}const cb=[28.6139,77.209];function hb(t){const[e,n]=oe.useState(cb),[i,s]=oe.useState([]),[o,l]=oe.useState(!0),[h,f]=oe.useState(!1);oe.useEffect(()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser."),l(!1);return}const E=D=>{const{latitude:W,longitude:b}=D.coords,S=[W,b];console.log("Got Location (initial):",S),n(S),l(!1)},R=D=>{console.warn("Geolocation error:",D),D.code===1&&alert("Location permission denied. Please enable GPS."),l(!1)};navigator.geolocation.getCurrentPosition(E,R,{enableHighAccuracy:!0,timeout:15e3,maximumAge:0});const z=navigator.geolocation.watchPosition(D=>{const{latitude:W,longitude:b}=D.coords,S=[W,b];console.log("Got Location (watch):",S),n(S),h&&t&&m(S,t)},D=>console.warn("Watch Position Error:",D),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3});return()=>navigator.geolocation.clearWatch(z)},[h,t]);const m=async(E,R)=>{if(!R||!E||E.length!==2)return;const z=R.uid;try{await KT(sa(Bi,"drivers",z),{id:z,name:"E-Rickshaw",driver:R.displayName||"Unknown Driver",lat:E[0],lng:E[1],heading:0,status:"available",lastUpdated:XT(),phone:R.email||"+91 00000 00000",avatar:R.photoURL||`https://i.pravatar.cc/150?u=${z}`,rating:"5.0"},{merge:!0})}catch(D){console.error("Error publishing location:",D)}},y=(E,R,z,D)=>{const b=(z-E)*Math.PI/180,S=(D-R)*Math.PI/180,O=Math.sin(b/2)*Math.sin(b/2)+Math.cos(E*Math.PI/180)*Math.cos(z*Math.PI/180)*Math.sin(S/2)*Math.sin(S/2);return 6371*(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)))};return oe.useEffect(()=>{const E=cg(Kh(Bi,"drivers"),R=>{const D=R.docs.map(W=>({id:W.id,...W.data()})).filter(W=>W.id!==(t==null?void 0:t.uid)).map(W=>{const b=y(e[0],e[1],W.lat,W.lng);return{...W,distance:b}}).filter(W=>W.distance<50).sort((W,b)=>W.distance-b.distance);s(D)});return()=>E()},[t,e]),{vehicles:i,userLocation:e,isLocating:o,isDriver:h,toggleDriverMode:()=>{f(E=>!E)}}}const db=async(t,e,n,i,s)=>{try{return(await qR(Kh(Bi,"bookings"),{driverId:t,riderId:e,riderName:n,from:{lat:i[0],lng:i[1]},destination:s||"Not specified",status:"pending",timestamp:XT()})).id}catch(o){throw console.error("Error requesting ride:",o),o}},ac=async(t,e)=>{try{const n=sa(Bi,"bookings",t);await QT(n,{status:e})}catch(n){console.error("Error updating ride status:",n)}},fb=(t,e)=>{const n=WT(Kh(Bi,"bookings"),Pp("riderId","==",t),qT("timestamp","desc"));return cg(n,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})},pb=(t,e)=>{const n=WT(Kh(Bi,"bookings"),Pp("driverId","==",t),Pp("status","==","pending"),qT("timestamp","desc"));return cg(n,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})};function mb(){const[t,e]=oe.useState(null),[n,i]=oe.useState(null),[s,o]=oe.useState(!0),[l,h]=oe.useState("home"),[f,m]=oe.useState(!1),[y,w]=oe.useState(null),[E,R]=oe.useState(""),[z,D]=oe.useState(""),[W,b]=oe.useState([]),[S,O]=oe.useState([]),[q,Q]=oe.useState(!1),{vehicles:Y,userLocation:P,isDriver:I,toggleDriverMode:C}=hb(t);oe.useEffect(()=>{const we=N2(Tg,async U=>{try{if(U){const le=await of(U.uid);i(le)}else i(null);e(U)}catch(le){console.error("Error fetching profile:",le),e(U)}finally{o(!1)}});return()=>we()},[]),oe.useEffect(()=>{if(!t)return;const we=fb(t.uid,U=>{b(U)});return()=>we()},[t]),oe.useEffect(()=>{if(!t||!n||n.role!=="driver"||!I)return;const we=pb(t.uid,U=>{O(U),U.length>0&&"vibrate"in navigator&&navigator.vibrate([200,100,200])});return()=>we()},[t,n,I]),oe.useEffect(()=>{I&&h("map")},[I]);const N=async()=>{if(t){const we=await of(t.uid);i(we)}},M=async()=>{if(y)try{await db(y.id,t.uid,t.displayName||"Rider",P,E),alert("Ride Requested! Creating booking..."),h("book"),w(null)}catch(we){alert("Error booking ride: "+we.message)}},V=we=>{w(we),h("map")},A=async()=>{try{await QL(),Q(!1)}catch(we){console.error("Logout failed:",we)}};if(s)return x.jsx("div",{style:{height:"100dvh",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."});if(!t)return x.jsx(sb,{onLogin:e});if(!n)return x.jsx(lb,{user:t,onComplete:N});if(f)return x.jsx(ub,{user:t,userProfile:n,onComplete:async()=>{const we=await of(t.uid);i(we),m(!1)},onCancel:()=>m(!1)});const De=()=>{switch(l){case"home":return x.jsxs("div",{className:"view-container section-padding",style:{overflowY:"auto"},children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Dashboard"}),x.jsxs("div",{className:"card",style:{padding:"24px",textAlign:"center",marginBottom:"24px",borderTop:I?"4px solid #166534":"4px solid #94a3b8"},children:[x.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",background:I?"#dcfce7":"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsx(rf,{size:40,color:I?"#166534":"#64748b"})}),x.jsx("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:I?"You are Online":"You are Offline"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"24px"},children:I?"Riders can see your location and request rides.":"Go online to start receiving ride requests."}),x.jsx("button",{onClick:C,className:"btn",style:{background:I?"#ef4444":"#166534",width:"100%",maxWidth:"200px",margin:"0 auto"},children:I?"Go Offline":"Go Online"})]}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[x.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[x.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",color:"#64748b"},children:"Pending Requests"}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2563eb"},children:S.length})]}),x.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[x.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",color:"#64748b"},children:"Today's Earnings"}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:"0"})]})]}),x.jsxs("div",{className:"card",style:{marginTop:"24px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},children:[x.jsx("img",{src:(n==null?void 0:n.avatar)||"https://i.pravatar.cc/150?u=driver",alt:"",className:"avatar"}),x.jsxs("div",{children:[x.jsx("h4",{style:{margin:0},children:n==null?void 0:n.name}),x.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#64748b"},children:[n==null?void 0:n.vehicleType,"  ",n==null?void 0:n.phone1]})]}),x.jsx("div",{style:{marginLeft:"auto"},children:x.jsx(bv,{size:20,color:"#cbd5e1",onClick:()=>h("profile"),style:{cursor:"pointer"}})})]})]});case"map":return x.jsxs("div",{style:{width:"100%",height:"calc(100% - 64px)",position:"relative"},children:[x.jsx(ty,{center:P,vehicles:[...Y,{...n,lat:P[0],lng:P[1],id:t.uid,avatar:n==null?void 0:n.avatar}],selectedVehicle:null,onVehicleSelect:()=>{}}),I&&x.jsx("div",{className:"ui-overlay",style:{top:"auto",bottom:"24px"},children:x.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"You are Live"}),x.jsx("p",{style:{margin:0,fontSize:"12px",color:"#166534"},children:"Broadcasting to riders..."})]}),x.jsx("div",{className:"status-badge status-active",style:{fontSize:"12px"},children:"Online"})]})})]});case"book":return x.jsxs("div",{className:"view-container section-padding",children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Ride Requests"}),S.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f0fdf4",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:x.jsx(nf,{size:40,color:"#166534"})}),x.jsx("h3",{children:"No new requests"}),x.jsx("p",{style:{fontSize:"14px",maxWidth:"240px",margin:"8px auto 24px"},children:"Waiting for nearby riders..."})]}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:S.map(we=>x.jsxs("div",{className:"card",style:{padding:"16px",borderLeft:"4px solid #2563eb"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[x.jsx("span",{style:{fontWeight:"bold",fontSize:"16px"},children:we.riderName}),x.jsx("span",{style:{fontSize:"12px",color:"#64748b"},children:"Now"})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[x.jsx(Nv,{size:16,color:"#64748b"}),x.jsx("span",{style:{fontSize:"14px"},children:we.destination})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:()=>ac(we.id,"rejected"),children:"Decline"}),x.jsx("button",{className:"btn",style:{flex:1},onClick:()=>ac(we.id,"accepted"),children:"Accept Ride"})]})]},we.id))})]});case"profile":return Qe();default:return null}},nn=()=>{switch(l){case"home":const we=Y.filter(U=>U.driver.toLowerCase().includes(z.toLowerCase())||U.name&&U.name.toLowerCase().includes(z.toLowerCase()));return x.jsxs("div",{className:"view-container section-padding",children:[x.jsxs("div",{style:{marginBottom:"24px"},children:[x.jsx("h2",{style:{margin:"0 0 16px"},children:"Find a Ride"}),x.jsxs("div",{className:"card search-bar",children:[x.jsx(sf,{size:20,color:"#64748b"}),x.jsx("input",{type:"text",placeholder:"Search drivers by name...",className:"search-input",value:z,onChange:U=>D(U.target.value)})]})]}),x.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:x.jsxs("h3",{style:{margin:0,fontSize:"16px",color:"#64748b"},children:["Nearby (",we.length,")"]})}),we.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(sf,{size:30,color:"#94a3b8"})}),x.jsx("p",{children:z?"No drivers found matching your search.":"No drivers nearby."})]}):we.map(U=>x.jsxs("div",{className:"card vehicle-card",onClick:()=>V(U),style:{cursor:"pointer",marginBottom:"16px"},children:[x.jsx("img",{src:U.avatar,alt:U.driver,className:"avatar"}),x.jsxs("div",{className:"vehicle-details",style:{flex:1},children:[x.jsx("h4",{style:{fontSize:"16px",marginBottom:"2px"},children:U.driver}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[x.jsx("p",{style:{margin:0,opacity:.8,fontSize:"13px"},children:U.vehicleType||"E-Rickshaw"}),U.distance&&x.jsxs("span",{style:{fontSize:"12px",color:"#166534",fontWeight:"500"},children:[U.distance.toFixed(1)," km away"]})]})]}),x.jsx("div",{style:{textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:x.jsx("button",{className:"btn",style:{padding:"6px 12px",fontSize:"12px",height:"auto"},children:"View"})})]},U.id))]});case"map":return x.jsxs("div",{style:{width:"100%",height:"calc(100% - 64px)",position:"relative"},children:[x.jsx(ty,{center:P,vehicles:Y,selectedVehicle:y,onVehicleSelect:w}),x.jsx("div",{className:"ui-overlay",style:{height:"auto"},children:x.jsxs("div",{className:"interactive-element card search-bar",children:[x.jsx(sf,{size:20,color:"#64748b"}),x.jsx("input",{type:"text",placeholder:"Where to?",className:"search-input",value:E,onChange:U=>R(U.target.value)})]})}),y&&x.jsx("div",{className:"ui-overlay",style:{justifyContent:"flex-end",pointerEvents:"none",paddingBottom:"24px"},children:x.jsxs("div",{className:"interactive-element card",style:{padding:"20px",width:"100%",maxWidth:"480px",margin:"0 auto",pointerEvents:"auto"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[x.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[x.jsx("img",{src:y.avatar,alt:y.driver,className:"avatar"}),x.jsxs("div",{children:[x.jsx("h3",{style:{margin:0,fontSize:"18px"},children:y.driver}),x.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#64748b"},children:y.name})]})]}),x.jsx("div",{className:"status-badge status-active",children:"Online"})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsxs("button",{className:"btn",onClick:M,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[x.jsx(rf,{size:18})," Book Ride"]}),x.jsx("button",{className:"card",style:{padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e2e8f0"},children:x.jsx(nb,{size:20,color:"#2563eb"})})]})]})})]});case"book":return x.jsxs("div",{className:"view-container section-padding",children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Your Bookings"}),W.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:x.jsx(Rv,{size:40,color:"#94a3b8"})}),x.jsx("h3",{children:"No active rides"}),x.jsx("p",{style:{fontSize:"14px",maxWidth:"240px",margin:"8px auto 24px"},children:"You haven't booked any E-Rickshaws yet. Start your journey today!"}),x.jsx("button",{className:"btn",onClick:()=>h("home"),children:"Find Nearby Rides"})]}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:W.map(U=>x.jsxs("div",{className:"card",style:{padding:"16px"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[x.jsxs("span",{style:{fontWeight:"bold"},children:["To: ",U.destination]}),x.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"12px",background:U.status==="pending"?"#fef9c3":"#dcfce7",color:U.status==="pending"?"#854d0e":"#166534"},children:U.status.toUpperCase()})]}),x.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:["Driver ID: ",U.driverId]})]},U.id))})]});case"profile":return Qe();default:return null}},Qe=()=>x.jsxs("div",{className:"view-container section-padding",children:[x.jsxs("div",{className:"profile-header",children:[x.jsxs("div",{style:{position:"relative",width:"100px",margin:"0 auto 16px"},children:[x.jsx("img",{src:(n==null?void 0:n.avatar)||t.photoURL||"https://i.pravatar.cc/150?u=user",alt:"User",className:"avatar",style:{width:"100px",height:"100px"}}),x.jsx("div",{style:{position:"absolute",bottom:0,right:0,background:"#2563eb",padding:"6px",borderRadius:"50%",color:"white",border:"2px solid white"},children:x.jsx(uo,{size:14})})]}),x.jsx("h2",{style:{margin:0},children:(n==null?void 0:n.name)||t.displayName}),x.jsx("p",{style:{color:"#64748b",fontSize:"14px"},children:(n==null?void 0:n.phone1)||t.email}),x.jsx("div",{style:{marginTop:"8px"},children:x.jsx("span",{style:{background:"#e2e8f0",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",textTransform:"uppercase"},children:n==null?void 0:n.role})})]}),(n==null?void 0:n.role)==="driver"&&x.jsxs(x.Fragment,{children:[x.jsx("h4",{style:{color:"#64748b",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px",marginBottom:"12px"},children:"Driver Controls"}),x.jsx("div",{className:"settings-list",style:{marginBottom:"24px"},children:x.jsxs("div",{className:"settings-item",onClick:C,style:{cursor:"pointer"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(rf,{size:18,color:I?"#166534":"#64748b"}),x.jsx("span",{style:{fontWeight:I?"bold":"normal",color:I?"#166534":"inherit"},children:I?"Driver Mode Active":"Switch to Driver Mode"})]}),x.jsx("div",{style:{width:"40px",height:"24px",background:I?"#22c55e":"#e2e8f0",borderRadius:"99px",position:"relative",transition:"background 0.3s"},children:x.jsx("div",{style:{width:"20px",height:"20px",background:"white",borderRadius:"50%",position:"absolute",top:"2px",left:I?"18px":"2px",transition:"left 0.3s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"}})})]})})]}),x.jsx("h4",{style:{color:"#64748b",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px",marginBottom:"12px"},children:"Account Settings"}),x.jsxs("div",{className:"settings-list",children:[x.jsxs("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>m(!0),children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(uo,{size:18,color:"#64748b"}),x.jsx("span",{children:"Edit Profile"})]}),x.jsx(bv,{size:18,color:"#cbd5e1"})]}),x.jsx("div",{className:"settings-item",style:{color:"#ef4444",cursor:"pointer"},onClick:()=>Q(!0),children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(uo,{size:18}),x.jsx("span",{children:"Logout"})]})})]})]});return x.jsxs("div",{className:"app-container",style:{width:"100%",height:"100dvh",position:"relative",overflow:"hidden"},children:[(n==null?void 0:n.role)==="driver"?De():nn(),S.length>0&&x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:x.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"320px",padding:"24px",textAlign:"center"},children:[x.jsx("div",{style:{background:"#dcfce7",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(nf,{size:32,color:"#166534"})}),x.jsx("h3",{children:"New Ride Request!"}),x.jsxs("p",{style:{color:"#64748b",marginBottom:"24px"},children:[S[0].riderName," wants to go to:",x.jsx("br",{}),x.jsx("strong",{children:S[0].destination})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:()=>ac(S[0].id,"rejected"),children:"Decline"}),x.jsx("button",{className:"btn",style:{flex:1},onClick:()=>ac(S[0].id,"accepted"),children:"Accept"})]})]})}),q&&x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:x.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"320px",padding:"24px",textAlign:"center"},children:[x.jsx("div",{style:{background:"#fee2e2",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(uo,{size:32,color:"#ef4444"})}),x.jsx("h3",{children:"Log Out?"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"24px"},children:"Are you sure you want to log out?"}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#e2e8f0",color:"#1e293b"},onClick:()=>Q(!1),children:"Cancel"}),x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:A,children:"Log Out"})]})]})}),x.jsxs("nav",{className:"bottom-nav",children:[x.jsxs("button",{className:`nav-item ${l==="home"?"active":""}`,onClick:()=>h("home"),children:[x.jsx(tb,{size:24}),x.jsx("span",{children:"Home"})]}),x.jsxs("button",{className:`nav-item ${l==="map"?"active":""}`,onClick:()=>h("map"),children:[x.jsx(Nv,{size:24}),x.jsx("span",{children:"Map"})]}),x.jsxs("button",{className:`nav-item ${l==="book"?"active":""}`,onClick:()=>h("book"),children:[(n==null?void 0:n.role)==="driver"?x.jsx(nf,{size:24}):x.jsx(Rv,{size:24}),x.jsx("span",{children:(n==null?void 0:n.role)==="driver"?"Requests":"Book"})]}),x.jsxs("button",{className:`nav-item ${l==="profile"?"active":""}`,onClick:()=>h("profile"),children:[x.jsx(uo,{size:24}),x.jsx("span",{children:"Profile"})]})]})]})}class gb extends fl.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error",e,n)}render(){var e;return this.state.hasError?x.jsxs("div",{style:{padding:"24px",color:"#ef4444"},children:[x.jsx("h1",{children:"Something went wrong."}),x.jsx("pre",{style:{background:"#fef2f2",padding:"12px",borderRadius:"8px",overflow:"auto"},children:(e=this.state.error)==null?void 0:e.toString()}),x.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px"},children:"Reload App"})]}):this.props.children}}af.createRoot(document.getElementById("root")).render(x.jsx(fl.StrictMode,{children:x.jsx(gb,{children:x.jsx(mb,{})})}));
