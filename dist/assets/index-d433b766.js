(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var d1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ty(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ny={exports:{}},lh={},iy={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),f1=Symbol.for("react.portal"),p1=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),v1=Symbol.for("react.context"),y1=Symbol.for("react.forward_ref"),w1=Symbol.for("react.suspense"),E1=Symbol.for("react.memo"),T1=Symbol.for("react.lazy"),Cg=Symbol.iterator;function I1(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sy=Object.assign,oy={};function bo(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||ry}bo.prototype.isReactComponent={};bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ay(){}ay.prototype=bo.prototype;function hp(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||ry}var dp=hp.prototype=new ay;dp.constructor=hp;sy(dp,bo.prototype);dp.isPureReactComponent=!0;var Ag=Array.isArray,ly=Object.prototype.hasOwnProperty,fp={current:null},uy={key:!0,ref:!0,__self:!0,__source:!0};function cy(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)ly.call(e,i)&&!uy.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Ol,type:t,key:o,ref:l,props:s,_owner:fp.current}}function x1(t,e){return{$$typeof:Ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ol}function S1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kg=/\/+/g;function nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S1(""+t.key):e.toString(36)}function nc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ol:case f1:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+nd(l,0):i,Ag(s)?(n="",t!=null&&(n=t.replace(kg,"$&/")+"/"),nc(s,e,n,"",function(m){return m})):s!=null&&(pp(s)&&(s=x1(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(kg,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Ag(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+nd(o,h);l+=nc(o,e,n,d,s)}else if(d=I1(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+nd(o,h++),l+=nc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Nu(t,e,n){if(t==null)return t;var i=[],s=0;return nc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},ic={transition:null},C1={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:ic,ReactCurrentOwner:fp};function hy(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=bo;Ie.Fragment=p1;Ie.Profiler=g1;Ie.PureComponent=hp;Ie.StrictMode=m1;Ie.Suspense=w1;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1;Ie.act=hy;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sy({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=fp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)ly.call(e,d)&&!uy.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Ol,type:t.type,key:s,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:v1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_1,_context:t},t.Consumer=t};Ie.createElement=cy;Ie.createFactory=function(t){var e=cy.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:y1,render:t}};Ie.isValidElement=pp;Ie.lazy=function(t){return{$$typeof:T1,_payload:{_status:-1,_result:t},_init:P1}};Ie.memo=function(t,e){return{$$typeof:E1,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=ic.transition;ic.transition={};try{t()}finally{ic.transition=e}};Ie.unstable_act=hy;Ie.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Ie.useContext=function(t){return Zt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Ie.useId=function(){return Zt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Zt.current.useRef(t)};Ie.useState=function(t){return Zt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Zt.current.useTransition()};Ie.version="18.3.1";iy.exports=Ie;var re=iy.exports;const ol=ty(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1=re,k1=Symbol.for("react.element"),R1=Symbol.for("react.fragment"),L1=Object.prototype.hasOwnProperty,b1=A1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N1={key:!0,ref:!0,__self:!0,__source:!0};function dy(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)L1.call(e,i)&&!N1.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:k1,type:t,key:o,ref:l,props:s,_owner:b1.current}}lh.Fragment=R1;lh.jsx=dy;lh.jsxs=dy;ny.exports=lh;var x=ny.exports,Wd={},fy={exports:{}},hn={},py={exports:{}},my={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,ae){var X=B.length;B.push(ae);e:for(;0<X;){var ue=X-1>>>1,_e=B[ue];if(0<s(_e,ae))B[ue]=ae,B[X]=_e,X=ue;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var ae=B[0],X=B.pop();if(X!==ae){B[0]=X;e:for(var ue=0,_e=B.length,xe=_e>>>1;ue<xe;){var be=2*(ue+1)-1,we=B[be],fe=be+1,it=B[fe];if(0>s(we,X))fe<_e&&0>s(it,we)?(B[ue]=it,B[fe]=X,ue=fe):(B[ue]=we,B[be]=X,ue=be);else if(fe<_e&&0>s(it,X))B[ue]=it,B[fe]=X,ue=fe;else break e}}return ae}function s(B,ae){var X=B.sortIndex-ae.sortIndex;return X!==0?X:B.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,E=null,T=3,N=!1,D=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(B){for(var ae=n(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=B)i(m),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=n(m)}}function H(B){if(z=!1,O(B),!D)if(n(d)!==null)D=!0,Xe(Y);else{var ae=n(m);ae!==null&&ye(H,ae.startTime-B)}}function Y(B,ae){D=!1,z&&(z=!1,b(I),I=-1),N=!0;var X=T;try{for(O(ae),E=n(d);E!==null&&(!(E.expirationTime>ae)||B&&!M());){var ue=E.callback;if(typeof ue=="function"){E.callback=null,T=E.priorityLevel;var _e=ue(E.expirationTime<=ae);ae=t.unstable_now(),typeof _e=="function"?E.callback=_e:E===n(d)&&i(d),O(ae)}else i(d);E=n(d)}if(E!==null)var xe=!0;else{var be=n(m);be!==null&&ye(H,be.startTime-ae),xe=!1}return xe}finally{E=null,T=X,N=!1}}var Q=!1,C=null,I=-1,P=5,A=-1;function M(){return!(t.unstable_now()-A<P)}function V(){if(C!==null){var B=t.unstable_now();A=B;var ae=!0;try{ae=C(!0,B)}finally{ae?R():(Q=!1,C=null)}}else Q=!1}var R;if(typeof S=="function")R=function(){S(V)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,xn=We.port2;We.port1.onmessage=V,R=function(){xn.postMessage(null)}}else R=function(){$(V,0)};function Xe(B){C=B,Q||(Q=!0,R())}function ye(B,ae){I=$(function(){B(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){D||N||(D=!0,Xe(Y))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var X=T;T=ae;try{return B()}finally{T=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,ae){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=T;T=B;try{return ae()}finally{T=X}},t.unstable_scheduleCallback=function(B,ae,X){var ue=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,B){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=X+_e,B={id:v++,callback:ae,priorityLevel:B,startTime:X,expirationTime:_e,sortIndex:-1},X>ue?(B.sortIndex=X,e(m,B),n(d)===null&&B===n(m)&&(z?(b(I),I=-1):z=!0,ye(H,X-ue))):(B.sortIndex=_e,e(d,B),D||N||(D=!0,Xe(Y))),B},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(B){var ae=T;return function(){var X=T;T=ae;try{return B.apply(this,arguments)}finally{T=X}}}})(my);py.exports=my;var O1=py.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=re,cn=O1;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gy=new Set,al={};function ms(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(al[t]=e,t=0;t<e.length;t++)gy.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Lg={};function V1(t){return $d.call(Lg,t)?!0:$d.call(Rg,t)?!1:D1.test(t)?Lg[t]=!0:(Rg[t]=!0,!1)}function z1(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F1(t,e,n,i){if(e===null||typeof e>"u"||z1(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mp=/[\-:]([a-z])/g;function gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mp,gp);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mp,gp);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mp,gp);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _p(t,e,n,i){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F1(e,n,s,i)&&(n=null),i||s===null?V1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fi=M1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ou=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),Hd=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),vy=Symbol.for("react.context"),yp=Symbol.for("react.forward_ref"),qd=Symbol.for("react.suspense"),Zd=Symbol.for("react.suspense_list"),wp=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),yy=Symbol.for("react.offscreen"),bg=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,id;function za(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var rd=!1;function sd(t,e){if(!t||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?za(t):""}function j1(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=sd(t.type,!1),t;case 11:return t=sd(t.type.render,!1),t;case 1:return t=sd(t.type,!0),t;default:return""}}function Gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Zs:return"Portal";case Hd:return"Profiler";case vp:return"StrictMode";case qd:return"Suspense";case Zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vy:return(t.displayName||"Context")+".Consumer";case _y:return(t._context.displayName||"Context")+".Provider";case yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wp:return e=t.displayName||null,e!==null?e:Gd(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return Gd(t(e))}catch{}}return null}function B1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(e);case 8:return e===vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U1(t){var e=wy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mu(t){t._valueTracker||(t._valueTracker=U1(t))}function Ey(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kd(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ng(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ty(t,e){e=e.checked,e!=null&&_p(t,"checked",e,!1)}function Qd(t,e){Ty(t,e);var n=Sr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Og(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||Ic(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function so(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Fa(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function Iy(t,e){var n=Sr(e.value),i=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Dg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Du,Sy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W1=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(t){W1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qa[e]=qa[t]})});function Py(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qa.hasOwnProperty(t)&&qa[t]?(""+e).trim():e+"px"}function Cy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Py(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var $1=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ef(t,e){if(e){if($1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nf=null;function Ep(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rf=null,oo=null,ao=null;function Vg(t){if(t=Vl(t)){if(typeof rf!="function")throw Error(K(280));var e=t.stateNode;e&&(e=fh(e),rf(t.stateNode,t.type,e))}}function Ay(t){oo?ao?ao.push(t):ao=[t]:oo=t}function ky(){if(oo){var t=oo,e=ao;if(ao=oo=null,Vg(t),e)for(t=0;t<e.length;t++)Vg(e[t])}}function Ry(t,e){return t(e)}function Ly(){}var od=!1;function by(t,e,n){if(od)return t(e,n);od=!0;try{return Ry(t,e,n)}finally{od=!1,(oo!==null||ao!==null)&&(Ly(),ky())}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var i=fh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var sf=!1;if(Ri)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){sf=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{sf=!1}function H1(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var Za=!1,xc=null,Sc=!1,of=null,q1={onError:function(t){Za=!0,xc=t}};function Z1(t,e,n,i,s,o,l,h,d){Za=!1,xc=null,H1.apply(q1,arguments)}function G1(t,e,n,i,s,o,l,h,d){if(Z1.apply(this,arguments),Za){if(Za){var m=xc;Za=!1,xc=null}else throw Error(K(198));Sc||(Sc=!0,of=m)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ny(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zg(t){if(gs(t)!==t)throw Error(K(188))}function K1(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return zg(s),t;if(o===i)return zg(s),e;o=o.sibling}throw Error(K(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(K(189))}}if(n.alternate!==i)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Oy(t){return t=K1(t),t!==null?My(t):null}function My(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=My(t);if(e!==null)return e;t=t.sibling}return null}var Dy=cn.unstable_scheduleCallback,Fg=cn.unstable_cancelCallback,Q1=cn.unstable_shouldYield,Y1=cn.unstable_requestPaint,nt=cn.unstable_now,X1=cn.unstable_getCurrentPriorityLevel,Tp=cn.unstable_ImmediatePriority,Vy=cn.unstable_UserBlockingPriority,Pc=cn.unstable_NormalPriority,J1=cn.unstable_LowPriority,zy=cn.unstable_IdlePriority,uh=null,Xn=null;function eI(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(uh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:iI,tI=Math.log,nI=Math.LN2;function iI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var Vu=64,zu=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=ja(h):(o&=l,o!==0&&(i=ja(o)))}else l=n&~s,l!==0?i=ja(l):o!==0&&(i=ja(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mn(e),s=1<<n,i|=t[n],e&=~s;return i}function rI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Mn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=rI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fy(){var t=Vu;return Vu<<=1,!(Vu&4194240)&&(Vu=64),t}function ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ml(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function oI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Ip(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Oe=0;function jy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var By,xp,Uy,Wy,$y,lf=!1,Fu=[],dr=null,fr=null,pr=null,cl=new Map,hl=new Map,rr=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jg(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function La(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Vl(e),e!==null&&xp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lI(t,e,n,i,s){switch(e){case"focusin":return dr=La(dr,t,e,n,i,s),!0;case"dragenter":return fr=La(fr,t,e,n,i,s),!0;case"mouseover":return pr=La(pr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return cl.set(o,La(cl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,hl.set(o,La(hl.get(o)||null,t,e,n,i,s)),!0}return!1}function Hy(t){var e=Kr(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=Ny(n),e!==null){t.blockedOn=e,$y(t.priority,function(){Uy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);nf=i,n.target.dispatchEvent(i),nf=null}else return e=Vl(n),e!==null&&xp(e),t.blockedOn=n,!1;e.shift()}return!0}function Bg(t,e,n){rc(t)&&n.delete(e)}function uI(){lf=!1,dr!==null&&rc(dr)&&(dr=null),fr!==null&&rc(fr)&&(fr=null),pr!==null&&rc(pr)&&(pr=null),cl.forEach(Bg),hl.forEach(Bg)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,lf||(lf=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,uI)))}function dl(t){function e(s){return ba(s,t)}if(0<Fu.length){ba(Fu[0],t);for(var n=1;n<Fu.length;n++){var i=Fu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(dr!==null&&ba(dr,t),fr!==null&&ba(fr,t),pr!==null&&ba(pr,t),cl.forEach(e),hl.forEach(e),n=0;n<rr.length;n++)i=rr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)Hy(n),n.blockedOn===null&&rr.shift()}var lo=Fi.ReactCurrentBatchConfig,Ac=!0;function cI(t,e,n,i){var s=Oe,o=lo.transition;lo.transition=null;try{Oe=1,Sp(t,e,n,i)}finally{Oe=s,lo.transition=o}}function hI(t,e,n,i){var s=Oe,o=lo.transition;lo.transition=null;try{Oe=4,Sp(t,e,n,i)}finally{Oe=s,lo.transition=o}}function Sp(t,e,n,i){if(Ac){var s=uf(t,e,n,i);if(s===null)_d(t,e,i,kc,n),jg(t,i);else if(lI(s,t,e,n,i))i.stopPropagation();else if(jg(t,i),e&4&&-1<aI.indexOf(t)){for(;s!==null;){var o=Vl(s);if(o!==null&&By(o),o=uf(t,e,n,i),o===null&&_d(t,e,i,kc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else _d(t,e,i,null,n)}}var kc=null;function uf(t,e,n,i){if(kc=null,t=Ep(i),t=Kr(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ny(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function qy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X1()){case Tp:return 1;case Vy:return 4;case Pc:case J1:return 16;case zy:return 536870912;default:return 16}default:return 16}}var ur=null,Pp=null,sc=null;function Zy(){if(sc)return sc;var t,e=Pp,n=e.length,i,s="value"in ur?ur.value:ur.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return sc=s.slice(t,1<i?1-i:void 0)}function oc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ju(){return!0}function Ug(){return!1}function dn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ju:Ug,this.isPropagationStopped=Ug,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),e}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cp=dn(No),Dl=Qe({},No,{view:0,detail:0}),dI=dn(Dl),ld,ud,Na,ch=Qe({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ap,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Na&&(Na&&t.type==="mousemove"?(ld=t.screenX-Na.screenX,ud=t.screenY-Na.screenY):ud=ld=0,Na=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),Wg=dn(ch),fI=Qe({},ch,{dataTransfer:0}),pI=dn(fI),mI=Qe({},Dl,{relatedTarget:0}),cd=dn(mI),gI=Qe({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),_I=dn(gI),vI=Qe({},No,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yI=dn(vI),wI=Qe({},No,{data:0}),$g=dn(wI),EI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},II={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=II[t])?!!e[t]:!1}function Ap(){return xI}var SI=Qe({},Dl,{key:function(t){if(t.key){var e=EI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ap,charCode:function(t){return t.type==="keypress"?oc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PI=dn(SI),CI=Qe({},ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hg=dn(CI),AI=Qe({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ap}),kI=dn(AI),RI=Qe({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),LI=dn(RI),bI=Qe({},ch,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NI=dn(bI),OI=[9,13,27,32],kp=Ri&&"CompositionEvent"in window,Ga=null;Ri&&"documentMode"in document&&(Ga=document.documentMode);var MI=Ri&&"TextEvent"in window&&!Ga,Gy=Ri&&(!kp||Ga&&8<Ga&&11>=Ga),qg=String.fromCharCode(32),Zg=!1;function Ky(t,e){switch(t){case"keyup":return OI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ks=!1;function DI(t,e){switch(t){case"compositionend":return Qy(e);case"keypress":return e.which!==32?null:(Zg=!0,qg);case"textInput":return t=e.data,t===qg&&Zg?null:t;default:return null}}function VI(t,e){if(Ks)return t==="compositionend"||!kp&&Ky(t,e)?(t=Zy(),sc=Pp=ur=null,Ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gy&&e.locale!=="ko"?null:e.data;default:return null}}var zI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zI[t.type]:e==="textarea"}function Yy(t,e,n,i){Ay(i),e=Rc(e,"onChange"),0<e.length&&(n=new Cp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ka=null,fl=null;function FI(t){l0(t,0)}function hh(t){var e=Xs(t);if(Ey(e))return t}function jI(t,e){if(t==="change")return e}var Xy=!1;if(Ri){var hd;if(Ri){var dd="oninput"in document;if(!dd){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),dd=typeof Kg.oninput=="function"}hd=dd}else hd=!1;Xy=hd&&(!document.documentMode||9<document.documentMode)}function Qg(){Ka&&(Ka.detachEvent("onpropertychange",Jy),fl=Ka=null)}function Jy(t){if(t.propertyName==="value"&&hh(fl)){var e=[];Yy(e,fl,t,Ep(t)),by(FI,e)}}function BI(t,e,n){t==="focusin"?(Qg(),Ka=e,fl=n,Ka.attachEvent("onpropertychange",Jy)):t==="focusout"&&Qg()}function UI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hh(fl)}function WI(t,e){if(t==="click")return hh(e)}function $I(t,e){if(t==="input"||t==="change")return hh(e)}function HI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:HI;function pl(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!$d.call(e,s)||!jn(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function e0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?e0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function t0(){for(var t=window,e=Ic();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ic(t.document)}return e}function Rp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qI(t){var e=t0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&e0(n.ownerDocument.documentElement,n)){if(i!==null&&Rp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=Xg(n,o);var l=Xg(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZI=Ri&&"documentMode"in document&&11>=document.documentMode,Qs=null,cf=null,Qa=null,hf=!1;function Jg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hf||Qs==null||Qs!==Ic(i)||(i=Qs,"selectionStart"in i&&Rp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&pl(Qa,i)||(Qa=i,i=Rc(cf,"onSelect"),0<i.length&&(e=new Cp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Qs)))}function Bu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},fd={},n0={};Ri&&(n0=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function dh(t){if(fd[t])return fd[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in n0)return fd[t]=e[n];return t}var i0=dh("animationend"),r0=dh("animationiteration"),s0=dh("animationstart"),o0=dh("transitionend"),a0=new Map,e_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){a0.set(t,e),ms(e,[t])}for(var pd=0;pd<e_.length;pd++){var md=e_[pd],GI=md.toLowerCase(),KI=md[0].toUpperCase()+md.slice(1);Rr(GI,"on"+KI)}Rr(i0,"onAnimationEnd");Rr(r0,"onAnimationIteration");Rr(s0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(o0,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function t_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,G1(i,e,void 0,t),t.currentTarget=null}function l0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;t_(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;t_(s,h,m),o=d}}}if(Sc)throw t=of,Sc=!1,of=null,t}function je(t,e){var n=e[gf];n===void 0&&(n=e[gf]=new Set);var i=t+"__bubble";n.has(i)||(u0(e,t,2,!1),n.add(i))}function gd(t,e,n){var i=0;e&&(i|=4),u0(n,t,i,e)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function ml(t){if(!t[Uu]){t[Uu]=!0,gy.forEach(function(n){n!=="selectionchange"&&(QI.has(n)||gd(n,!1,t),gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uu]||(e[Uu]=!0,gd("selectionchange",!1,e))}}function u0(t,e,n,i){switch(qy(e)){case 1:var s=cI;break;case 4:s=hI;break;default:s=Sp}n=s.bind(null,e,n,t),s=void 0,!sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _d(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Kr(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}by(function(){var m=o,v=Ep(n),E=[];e:{var T=a0.get(t);if(T!==void 0){var N=Cp,D=t;switch(t){case"keypress":if(oc(n)===0)break e;case"keydown":case"keyup":N=PI;break;case"focusin":D="focus",N=cd;break;case"focusout":D="blur",N=cd;break;case"beforeblur":case"afterblur":N=cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=kI;break;case i0:case r0:case s0:N=_I;break;case o0:N=LI;break;case"scroll":N=dI;break;case"wheel":N=NI;break;case"copy":case"cut":case"paste":N=yI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Hg}var z=(e&4)!==0,$=!z&&t==="scroll",b=z?T!==null?T+"Capture":null:T;z=[];for(var S=m,O;S!==null;){O=S;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,b!==null&&(H=ul(S,b),H!=null&&z.push(gl(S,H,O)))),$)break;S=S.return}0<z.length&&(T=new N(T,D,null,n,v),E.push({event:T,listeners:z}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",T&&n!==nf&&(D=n.relatedTarget||n.fromElement)&&(Kr(D)||D[Li]))break e;if((N||T)&&(T=v.window===v?v:(T=v.ownerDocument)?T.defaultView||T.parentWindow:window,N?(D=n.relatedTarget||n.toElement,N=m,D=D?Kr(D):null,D!==null&&($=gs(D),D!==$||D.tag!==5&&D.tag!==6)&&(D=null)):(N=null,D=m),N!==D)){if(z=Wg,H="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(z=Hg,H="onPointerLeave",b="onPointerEnter",S="pointer"),$=N==null?T:Xs(N),O=D==null?T:Xs(D),T=new z(H,S+"leave",N,n,v),T.target=$,T.relatedTarget=O,H=null,Kr(v)===m&&(z=new z(b,S+"enter",D,n,v),z.target=O,z.relatedTarget=$,H=z),$=H,N&&D)t:{for(z=N,b=D,S=0,O=z;O;O=Us(O))S++;for(O=0,H=b;H;H=Us(H))O++;for(;0<S-O;)z=Us(z),S--;for(;0<O-S;)b=Us(b),O--;for(;S--;){if(z===b||b!==null&&z===b.alternate)break t;z=Us(z),b=Us(b)}z=null}else z=null;N!==null&&n_(E,T,N,z,!1),D!==null&&$!==null&&n_(E,$,D,z,!0)}}e:{if(T=m?Xs(m):window,N=T.nodeName&&T.nodeName.toLowerCase(),N==="select"||N==="input"&&T.type==="file")var Y=jI;else if(Gg(T))if(Xy)Y=$I;else{Y=UI;var Q=BI}else(N=T.nodeName)&&N.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Y=WI);if(Y&&(Y=Y(t,m))){Yy(E,Y,n,v);break e}Q&&Q(t,T,m),t==="focusout"&&(Q=T._wrapperState)&&Q.controlled&&T.type==="number"&&Yd(T,"number",T.value)}switch(Q=m?Xs(m):window,t){case"focusin":(Gg(Q)||Q.contentEditable==="true")&&(Qs=Q,cf=m,Qa=null);break;case"focusout":Qa=cf=Qs=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":hf=!1,Jg(E,n,v);break;case"selectionchange":if(ZI)break;case"keydown":case"keyup":Jg(E,n,v)}var C;if(kp)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ks?Ky(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Gy&&n.locale!=="ko"&&(Ks||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ks&&(C=Zy()):(ur=v,Pp="value"in ur?ur.value:ur.textContent,Ks=!0)),Q=Rc(m,I),0<Q.length&&(I=new $g(I,t,null,n,v),E.push({event:I,listeners:Q}),C?I.data=C:(C=Qy(n),C!==null&&(I.data=C)))),(C=MI?DI(t,n):VI(t,n))&&(m=Rc(m,"onBeforeInput"),0<m.length&&(v=new $g("onBeforeInput","beforeinput",null,n,v),E.push({event:v,listeners:m}),v.data=C))}l0(E,e)})}function gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ul(t,n),o!=null&&i.unshift(gl(t,o,s)),o=ul(t,e),o!=null&&i.push(gl(t,o,s))),t=t.return}return i}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=ul(n,o),d!=null&&l.unshift(gl(n,d,h))):s||(d=ul(n,o),d!=null&&l.push(gl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var YI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(YI,`
`).replace(XI,"")}function Wu(t,e,n){if(e=i_(e),i_(t)!==e&&n)throw Error(K(425))}function Lc(){}var df=null,ff=null;function pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mf=typeof setTimeout=="function"?setTimeout:void 0,JI=typeof clearTimeout=="function"?clearTimeout:void 0,r_=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof r_<"u"?function(t){return r_.resolve(null).then(t).catch(tx)}:mf;function tx(t){setTimeout(function(){throw t})}function vd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),dl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);dl(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Oo,_l="__reactProps$"+Oo,Li="__reactContainer$"+Oo,gf="__reactEvents$"+Oo,nx="__reactListeners$"+Oo,ix="__reactHandles$"+Oo;function Kr(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s_(t);t!==null;){if(n=t[Yn])return n;t=s_(t)}return e}t=n,n=t.parentNode}return null}function Vl(t){return t=t[Yn]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function fh(t){return t[_l]||null}var _f=[],Js=-1;function Lr(t){return{current:t}}function Ue(t){0>Js||(t.current=_f[Js],_f[Js]=null,Js--)}function ze(t,e){Js++,_f[Js]=t.current,t.current=e}var Pr={},Ut=Lr(Pr),Jt=Lr(!1),rs=Pr;function _o(t,e){var n=t.type.contextTypes;if(!n)return Pr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function en(t){return t=t.childContextTypes,t!=null}function bc(){Ue(Jt),Ue(Ut)}function o_(t,e,n){if(Ut.current!==Pr)throw Error(K(168));ze(Ut,e),ze(Jt,n)}function c0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(K(108,B1(t)||"Unknown",s));return Qe({},n,i)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,rs=Ut.current,ze(Ut,t),ze(Jt,Jt.current),!0}function a_(t,e,n){var i=t.stateNode;if(!i)throw Error(K(169));n?(t=c0(t,e,rs),i.__reactInternalMemoizedMergedChildContext=t,Ue(Jt),Ue(Ut),ze(Ut,t)):Ue(Jt),ze(Jt,n)}var Ei=null,ph=!1,yd=!1;function h0(t){Ei===null?Ei=[t]:Ei.push(t)}function rx(t){ph=!0,h0(t)}function br(){if(!yd&&Ei!==null){yd=!0;var t=0,e=Oe;try{var n=Ei;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ei=null,ph=!1}catch(s){throw Ei!==null&&(Ei=Ei.slice(t+1)),Dy(Tp,br),s}finally{Oe=e,yd=!1}}return null}var eo=[],to=0,Oc=null,Mc=0,vn=[],yn=0,ss=null,Ii=1,xi="";function qr(t,e){eo[to++]=Mc,eo[to++]=Oc,Oc=t,Mc=e}function d0(t,e,n){vn[yn++]=Ii,vn[yn++]=xi,vn[yn++]=ss,ss=t;var i=Ii;t=xi;var s=32-Mn(i)-1;i&=~(1<<s),n+=1;var o=32-Mn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Ii=1<<32-Mn(e)+s|n<<s|i,xi=o+t}else Ii=1<<o|n<<s|i,xi=t}function Lp(t){t.return!==null&&(qr(t,1),d0(t,1,0))}function bp(t){for(;t===Oc;)Oc=eo[--to],eo[to]=null,Mc=eo[--to],eo[to]=null;for(;t===ss;)ss=vn[--yn],vn[yn]=null,xi=vn[--yn],vn[yn]=null,Ii=vn[--yn],vn[yn]=null}var un=null,an=null,He=!1,On=null;function f0(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:Ii,overflow:xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yf(t){if(He){var e=an;if(e){var n=e;if(!l_(t,e)){if(vf(t))throw Error(K(418));e=mr(n.nextSibling);var i=un;e&&l_(t,e)?f0(i,n):(t.flags=t.flags&-4097|2,He=!1,un=t)}}else{if(vf(t))throw Error(K(418));t.flags=t.flags&-4097|2,He=!1,un=t}}}function u_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function $u(t){if(t!==un)return!1;if(!He)return u_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pf(t.type,t.memoizedProps)),e&&(e=an)){if(vf(t))throw p0(),Error(K(418));for(;e;)f0(t,e),e=mr(e.nextSibling)}if(u_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?mr(t.stateNode.nextSibling):null;return!0}function p0(){for(var t=an;t;)t=mr(t.nextSibling)}function vo(){an=un=null,He=!1}function Np(t){On===null?On=[t]:On.push(t)}var sx=Fi.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var i=n.stateNode}if(!i)throw Error(K(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Hu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c_(t){var e=t._init;return e(t._payload)}function m0(t){function e(b,S){if(t){var O=b.deletions;O===null?(b.deletions=[S],b.flags|=16):O.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function i(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function s(b,S){return b=yr(b,S),b.index=0,b.sibling=null,b}function o(b,S,O){return b.index=O,t?(O=b.alternate,O!==null?(O=O.index,O<S?(b.flags|=2,S):O):(b.flags|=2,S)):(b.flags|=1048576,S)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function h(b,S,O,H){return S===null||S.tag!==6?(S=Pd(O,b.mode,H),S.return=b,S):(S=s(S,O),S.return=b,S)}function d(b,S,O,H){var Y=O.type;return Y===Gs?v(b,S,O.props.children,H,O.key):S!==null&&(S.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===nr&&c_(Y)===S.type)?(H=s(S,O.props),H.ref=Oa(b,S,O),H.return=b,H):(H=fc(O.type,O.key,O.props,null,b.mode,H),H.ref=Oa(b,S,O),H.return=b,H)}function m(b,S,O,H){return S===null||S.tag!==4||S.stateNode.containerInfo!==O.containerInfo||S.stateNode.implementation!==O.implementation?(S=Cd(O,b.mode,H),S.return=b,S):(S=s(S,O.children||[]),S.return=b,S)}function v(b,S,O,H,Y){return S===null||S.tag!==7?(S=ts(O,b.mode,H,Y),S.return=b,S):(S=s(S,O),S.return=b,S)}function E(b,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Pd(""+S,b.mode,O),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ou:return O=fc(S.type,S.key,S.props,null,b.mode,O),O.ref=Oa(b,null,S),O.return=b,O;case Zs:return S=Cd(S,b.mode,O),S.return=b,S;case nr:var H=S._init;return E(b,H(S._payload),O)}if(Fa(S)||ka(S))return S=ts(S,b.mode,O,null),S.return=b,S;Hu(b,S)}return null}function T(b,S,O,H){var Y=S!==null?S.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:h(b,S,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ou:return O.key===Y?d(b,S,O,H):null;case Zs:return O.key===Y?m(b,S,O,H):null;case nr:return Y=O._init,T(b,S,Y(O._payload),H)}if(Fa(O)||ka(O))return Y!==null?null:v(b,S,O,H,null);Hu(b,O)}return null}function N(b,S,O,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return b=b.get(O)||null,h(S,b,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ou:return b=b.get(H.key===null?O:H.key)||null,d(S,b,H,Y);case Zs:return b=b.get(H.key===null?O:H.key)||null,m(S,b,H,Y);case nr:var Q=H._init;return N(b,S,O,Q(H._payload),Y)}if(Fa(H)||ka(H))return b=b.get(O)||null,v(S,b,H,Y,null);Hu(S,H)}return null}function D(b,S,O,H){for(var Y=null,Q=null,C=S,I=S=0,P=null;C!==null&&I<O.length;I++){C.index>I?(P=C,C=null):P=C.sibling;var A=T(b,C,O[I],H);if(A===null){C===null&&(C=P);break}t&&C&&A.alternate===null&&e(b,C),S=o(A,S,I),Q===null?Y=A:Q.sibling=A,Q=A,C=P}if(I===O.length)return n(b,C),He&&qr(b,I),Y;if(C===null){for(;I<O.length;I++)C=E(b,O[I],H),C!==null&&(S=o(C,S,I),Q===null?Y=C:Q.sibling=C,Q=C);return He&&qr(b,I),Y}for(C=i(b,C);I<O.length;I++)P=N(C,b,I,O[I],H),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?I:P.key),S=o(P,S,I),Q===null?Y=P:Q.sibling=P,Q=P);return t&&C.forEach(function(M){return e(b,M)}),He&&qr(b,I),Y}function z(b,S,O,H){var Y=ka(O);if(typeof Y!="function")throw Error(K(150));if(O=Y.call(O),O==null)throw Error(K(151));for(var Q=Y=null,C=S,I=S=0,P=null,A=O.next();C!==null&&!A.done;I++,A=O.next()){C.index>I?(P=C,C=null):P=C.sibling;var M=T(b,C,A.value,H);if(M===null){C===null&&(C=P);break}t&&C&&M.alternate===null&&e(b,C),S=o(M,S,I),Q===null?Y=M:Q.sibling=M,Q=M,C=P}if(A.done)return n(b,C),He&&qr(b,I),Y;if(C===null){for(;!A.done;I++,A=O.next())A=E(b,A.value,H),A!==null&&(S=o(A,S,I),Q===null?Y=A:Q.sibling=A,Q=A);return He&&qr(b,I),Y}for(C=i(b,C);!A.done;I++,A=O.next())A=N(C,b,I,A.value,H),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?I:A.key),S=o(A,S,I),Q===null?Y=A:Q.sibling=A,Q=A);return t&&C.forEach(function(V){return e(b,V)}),He&&qr(b,I),Y}function $(b,S,O,H){if(typeof O=="object"&&O!==null&&O.type===Gs&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Ou:e:{for(var Y=O.key,Q=S;Q!==null;){if(Q.key===Y){if(Y=O.type,Y===Gs){if(Q.tag===7){n(b,Q.sibling),S=s(Q,O.props.children),S.return=b,b=S;break e}}else if(Q.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===nr&&c_(Y)===Q.type){n(b,Q.sibling),S=s(Q,O.props),S.ref=Oa(b,Q,O),S.return=b,b=S;break e}n(b,Q);break}else e(b,Q);Q=Q.sibling}O.type===Gs?(S=ts(O.props.children,b.mode,H,O.key),S.return=b,b=S):(H=fc(O.type,O.key,O.props,null,b.mode,H),H.ref=Oa(b,S,O),H.return=b,b=H)}return l(b);case Zs:e:{for(Q=O.key;S!==null;){if(S.key===Q)if(S.tag===4&&S.stateNode.containerInfo===O.containerInfo&&S.stateNode.implementation===O.implementation){n(b,S.sibling),S=s(S,O.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=Cd(O,b.mode,H),S.return=b,b=S}return l(b);case nr:return Q=O._init,$(b,S,Q(O._payload),H)}if(Fa(O))return D(b,S,O,H);if(ka(O))return z(b,S,O,H);Hu(b,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,S!==null&&S.tag===6?(n(b,S.sibling),S=s(S,O),S.return=b,b=S):(n(b,S),S=Pd(O,b.mode,H),S.return=b,b=S),l(b)):n(b,S)}return $}var yo=m0(!0),g0=m0(!1),Dc=Lr(null),Vc=null,no=null,Op=null;function Mp(){Op=no=Vc=null}function Dp(t){var e=Dc.current;Ue(Dc),t._currentValue=e}function wf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){Vc=t,Op=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Op!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Vc===null)throw Error(K(308));no=t,Vc.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var Qr=null;function Vp(t){Qr===null?Qr=[t]:Qr.push(t)}function _0(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Vp(e)):(n.next=s.next,s.next=n),e.interleaved=n,bi(t,i)}function bi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function zp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,bi(t,n)}return s=i.interleaved,s===null?(e.next=e,Vp(i)):(e.next=s.next,s.next=e),i.interleaved=e,bi(t,n)}function ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ip(t,n)}}function h_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,i){var s=t.updateQueue;ir=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var E=s.baseState;l=0,v=m=d=null,h=o;do{var T=h.lane,N=h.eventTime;if((i&T)===T){v!==null&&(v=v.next={eventTime:N,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,z=h;switch(T=e,N=n,z.tag){case 1:if(D=z.payload,typeof D=="function"){E=D.call(N,E,T);break e}E=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=z.payload,T=typeof D=="function"?D.call(N,E,T):D,T==null)break e;E=Qe({},E,T);break e;case 2:ir=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else N={eventTime:N,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=N,d=E):v=v.next=N,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(1);if(v===null&&(d=E),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);as|=l,t.lanes=l,t.memoizedState=E}}function d_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(K(191,s));s.call(i)}}}var zl={},Jn=Lr(zl),vl=Lr(zl),yl=Lr(zl);function Yr(t){if(t===zl)throw Error(K(174));return t}function Fp(t,e){switch(ze(yl,e),ze(vl,t),ze(Jn,zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jd(e,t)}Ue(Jn),ze(Jn,e)}function wo(){Ue(Jn),Ue(vl),Ue(yl)}function y0(t){Yr(yl.current);var e=Yr(Jn.current),n=Jd(e,t.type);e!==n&&(ze(vl,t),ze(Jn,n))}function jp(t){vl.current===t&&(Ue(Jn),Ue(vl))}var Ge=Lr(0);function Fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wd=[];function Bp(){for(var t=0;t<wd.length;t++)wd[t]._workInProgressVersionPrimary=null;wd.length=0}var lc=Fi.ReactCurrentDispatcher,Ed=Fi.ReactCurrentBatchConfig,os=0,Ke=null,ft=null,wt=null,jc=!1,Ya=!1,wl=0,ox=0;function Mt(){throw Error(K(321))}function Up(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function Wp(t,e,n,i,s,o){if(os=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?cx:hx,t=n(i,s),Ya){o=0;do{if(Ya=!1,wl=0,25<=o)throw Error(K(301));o+=1,wt=ft=null,e.updateQueue=null,lc.current=dx,t=n(i,s)}while(Ya)}if(lc.current=Bc,e=ft!==null&&ft.next!==null,os=0,wt=ft=Ke=null,jc=!1,e)throw Error(K(300));return t}function $p(){var t=wl!==0;return wl=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ke.memoizedState=wt=t:wt=wt.next=t,wt}function In(){if(ft===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=wt===null?Ke.memoizedState:wt.next;if(e!==null)wt=e,ft=t;else{if(t===null)throw Error(K(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},wt===null?Ke.memoizedState=wt=t:wt=wt.next=t}return wt}function El(t,e){return typeof e=="function"?e(t):e}function Td(t){var e=In(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=ft,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((os&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var E={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=E,l=i):d=d.next=E,Ke.lanes|=v,as|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,jn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,as|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Id(t){var e=In(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);jn(o,e.memoizedState)||(Xt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function w0(){}function E0(t,e){var n=Ke,i=In(),s=e(),o=!jn(i.memoizedState,s);if(o&&(i.memoizedState=s,Xt=!0),i=i.queue,Hp(x0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Tl(9,I0.bind(null,n,i,s,e),void 0,null),Et===null)throw Error(K(349));os&30||T0(n,e,s)}return s}function T0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I0(t,e,n,i){e.value=n,e.getSnapshot=i,S0(e)&&P0(t)}function x0(t,e,n){return n(function(){S0(e)&&P0(t)})}function S0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function P0(t){var e=bi(t,1);e!==null&&Dn(e,t,1,-1)}function f_(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:t},e.queue=t,t=t.dispatch=ux.bind(null,Ke,t),[e.memoizedState,t]}function Tl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function C0(){return In().memoizedState}function uc(t,e,n,i){var s=Qn();Ke.flags|=t,s.memoizedState=Tl(1|e,n,void 0,i===void 0?null:i)}function mh(t,e,n,i){var s=In();i=i===void 0?null:i;var o=void 0;if(ft!==null){var l=ft.memoizedState;if(o=l.destroy,i!==null&&Up(i,l.deps)){s.memoizedState=Tl(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Tl(1|e,n,o,i)}function p_(t,e){return uc(8390656,8,t,e)}function Hp(t,e){return mh(2048,8,t,e)}function A0(t,e){return mh(4,2,t,e)}function k0(t,e){return mh(4,4,t,e)}function R0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L0(t,e,n){return n=n!=null?n.concat([t]):null,mh(4,4,R0.bind(null,e,t),n)}function qp(){}function b0(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Up(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function N0(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Up(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function O0(t,e,n){return os&21?(jn(n,e)||(n=Fy(),Ke.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function ax(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=Ed.transition;Ed.transition={};try{t(!1),e()}finally{Oe=n,Ed.transition=i}}function M0(){return In().memoizedState}function lx(t,e,n){var i=vr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},D0(t))V0(e,n);else if(n=_0(t,e,n,i),n!==null){var s=qt();Dn(n,t,i,s),z0(n,e,i)}}function ux(t,e,n){var i=vr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(D0(t))V0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,jn(h,l)){var d=e.interleaved;d===null?(s.next=s,Vp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=_0(t,e,s,i),n!==null&&(s=qt(),Dn(n,t,i,s),z0(n,e,i))}}function D0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function V0(t,e){Ya=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ip(t,n)}}var Bc={readContext:Tn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},cx={readContext:Tn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:p_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uc(4194308,4,R0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Qn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=lx.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:f_,useDebugValue:qp,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=f_(!1),e=t[0];return t=ax.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=Qn();if(He){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Et===null)throw Error(K(349));os&30||T0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,p_(x0.bind(null,i,o,t),[t]),i.flags|=2048,Tl(9,I0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Qn(),e=Et.identifierPrefix;if(He){var n=xi,i=Ii;n=(i&~(1<<32-Mn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ox++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hx={readContext:Tn,useCallback:b0,useContext:Tn,useEffect:Hp,useImperativeHandle:L0,useInsertionEffect:A0,useLayoutEffect:k0,useMemo:N0,useReducer:Td,useRef:C0,useState:function(){return Td(El)},useDebugValue:qp,useDeferredValue:function(t){var e=In();return O0(e,ft.memoizedState,t)},useTransition:function(){var t=Td(El)[0],e=In().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:E0,useId:M0,unstable_isNewReconciler:!1},dx={readContext:Tn,useCallback:b0,useContext:Tn,useEffect:Hp,useImperativeHandle:L0,useInsertionEffect:A0,useLayoutEffect:k0,useMemo:N0,useReducer:Id,useRef:C0,useState:function(){return Id(El)},useDebugValue:qp,useDeferredValue:function(t){var e=In();return ft===null?e.memoizedState=t:O0(e,ft.memoizedState,t)},useTransition:function(){var t=Id(El)[0],e=In().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:E0,useId:M0,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ef(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gh={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),s=vr(t),o=ki(i,s);o.payload=e,n!=null&&(o.callback=n),e=gr(t,o,s),e!==null&&(Dn(e,t,s,i),ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),s=vr(t),o=ki(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=gr(t,o,s),e!==null&&(Dn(e,t,s,i),ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=vr(t),s=ki(n,i);s.tag=2,e!=null&&(s.callback=e),e=gr(t,s,i),e!==null&&(Dn(e,t,i,n),ac(e,t,i))}};function m_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!pl(n,i)||!pl(s,o):!0}function F0(t,e,n){var i=!1,s=Pr,o=e.contextType;return typeof o=="object"&&o!==null?o=Tn(o):(s=en(e)?rs:Ut.current,i=e.contextTypes,o=(i=i!=null)?_o(t,s):Pr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function g_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&gh.enqueueReplaceState(e,e.state,null)}function Tf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Tn(o):(o=en(e)?rs:Ut.current,s.context=_o(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ef(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gh.enqueueReplaceState(s,s.state,null),zc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",i=e;do n+=j1(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function If(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fx=typeof WeakMap=="function"?WeakMap:Map;function j0(t,e,n){n=ki(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wc||(Wc=!0,Nf=i),If(t,e)},n}function B0(t,e,n){n=ki(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){If(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){If(t,e),typeof i!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function __(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new fx;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=Cx.bind(null,t,e,n),e.then(t,t))}function v_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ki(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var px=Fi.ReactCurrentOwner,Xt=!1;function Ht(t,e,n,i){e.child=t===null?g0(e,null,n,i):yo(e,t.child,n,i)}function w_(t,e,n,i,s){n=n.render;var o=e.ref;return uo(e,s),i=Wp(t,e,n,i,o,s),n=$p(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ni(t,e,s)):(He&&n&&Lp(e),e.flags|=1,Ht(t,e,i,s),e.child)}function E_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!em(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,U0(t,e,o,i,s)):(t=fc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:pl,n(l,i)&&t.ref===e.ref)return Ni(t,e,s)}return e.flags|=1,t=yr(o,i),t.ref=e.ref,t.return=e,e.child=t}function U0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(pl(o,i)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Ni(t,e,s)}return xf(t,e,n,i,s)}function W0(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ro,on),on|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(ro,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ze(ro,on),on|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ze(ro,on),on|=i;return Ht(t,e,s,n),e.child}function $0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xf(t,e,n,i,s){var o=en(n)?rs:Ut.current;return o=_o(e,o),uo(e,s),n=Wp(t,e,n,i,o,s),i=$p(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ni(t,e,s)):(He&&i&&Lp(e),e.flags|=1,Ht(t,e,n,s),e.child)}function T_(t,e,n,i,s){if(en(n)){var o=!0;Nc(e)}else o=!1;if(uo(e,s),e.stateNode===null)cc(t,e),F0(e,n,i),Tf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Tn(m):(m=en(n)?rs:Ut.current,m=_o(e,m));var v=n.getDerivedStateFromProps,E=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";E||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&g_(e,l,i,m),ir=!1;var T=e.memoizedState;l.state=T,zc(e,i,l,s),d=e.memoizedState,h!==i||T!==d||Jt.current||ir?(typeof v=="function"&&(Ef(e,n,v,i),d=e.memoizedState),(h=ir||m_(e,n,h,i,T,d,m))?(E||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,v0(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:bn(e.type,h),l.props=m,E=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Tn(d):(d=en(n)?rs:Ut.current,d=_o(e,d));var N=n.getDerivedStateFromProps;(v=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==E||T!==d)&&g_(e,l,i,d),ir=!1,T=e.memoizedState,l.state=T,zc(e,i,l,s);var D=e.memoizedState;h!==E||T!==D||Jt.current||ir?(typeof N=="function"&&(Ef(e,n,N,i),D=e.memoizedState),(m=ir||m_(e,n,m,i,T,D,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return Sf(t,e,n,i,o,s)}function Sf(t,e,n,i,s,o){$0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&a_(e,n,!1),Ni(t,e,o);i=e.stateNode,px.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=yo(e,t.child,null,o),e.child=yo(e,null,h,o)):Ht(t,e,h,o),e.memoizedState=i.state,s&&a_(e,n,!0),e.child}function H0(t){var e=t.stateNode;e.pendingContext?o_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o_(t,e.context,!1),Fp(t,e.containerInfo)}function I_(t,e,n,i,s){return vo(),Np(s),e.flags|=256,Ht(t,e,n,i),e.child}var Pf={dehydrated:null,treeContext:null,retryLane:0};function Cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function q0(t,e,n){var i=e.pendingProps,s=Ge.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ze(Ge,s&1),t===null)return yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=yh(l,i,0,null),t=ts(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Cf(n),e.memoizedState=Pf,t):Zp(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return mx(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=yr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=yr(h,o):(o=ts(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Cf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Pf,i}return o=t.child,t=o.sibling,i=yr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Zp(t,e){return e=yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,i){return i!==null&&Np(i),yo(e,t.child,null,n),t=Zp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mx(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=xd(Error(K(422))),qu(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=yh({mode:"visible",children:i.children},s,0,null),o=ts(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&yo(e,t.child,null,l),e.child.memoizedState=Cf(l),e.memoizedState=Pf,o);if(!(e.mode&1))return qu(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(K(419)),i=xd(o,i,void 0),qu(t,e,l,i)}if(h=(l&t.childLanes)!==0,Xt||h){if(i=Et,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,bi(t,s),Dn(i,t,s,-1))}return Jp(),i=xd(Error(K(421))),qu(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ax.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,an=mr(s.nextSibling),un=e,He=!0,On=null,t!==null&&(vn[yn++]=Ii,vn[yn++]=xi,vn[yn++]=ss,Ii=t.id,xi=t.overflow,ss=e),e=Zp(e,i.children),e.flags|=4096,e)}function x_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),wf(t.return,e,n)}function Sd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Z0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ht(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x_(t,n,e);else if(t.tag===19)x_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sd(e,!0,n,null,o);break;case"together":Sd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gx(t,e,n){switch(e.tag){case 3:H0(e),vo();break;case 5:y0(e);break;case 1:en(e.type)&&Nc(e);break;case 4:Fp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ze(Dc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?q0(t,e,n):(ze(Ge,Ge.current&1),t=Ni(t,e,n),t!==null?t.sibling:null);ze(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Z0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,W0(t,e,n)}return Ni(t,e,n)}var G0,Af,K0,Q0;G0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Af=function(){};K0=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Yr(Jn.current);var o=null;switch(n){case"input":s=Kd(t,s),i=Kd(t,i),o=[];break;case"select":s=Qe({},s,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":s=Xd(t,s),i=Xd(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Lc)}ef(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(al.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(al.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&je("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Q0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ma(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function _x(t,e,n){var i=e.pendingProps;switch(bp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return en(e.type)&&bc(),Dt(e),null;case 3:return i=e.stateNode,wo(),Ue(Jt),Ue(Ut),Bp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Df(On),On=null))),Af(t,e),Dt(e),null;case 5:jp(e);var s=Yr(yl.current);if(n=e.type,t!==null&&e.stateNode!=null)K0(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(K(166));return Dt(e),null}if(t=Yr(Jn.current),$u(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Yn]=e,i[_l]=o,t=(e.mode&1)!==0,n){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(s=0;s<Ba.length;s++)je(Ba[s],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":Ng(i,o),je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},je("invalid",i);break;case"textarea":Mg(i,o),je("invalid",i)}ef(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&Wu(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Wu(i.textContent,h,t),s=["children",""+h]):al.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&je("scroll",i)}switch(n){case"input":Mu(i),Og(i,o,!0);break;case"textarea":Mu(i),Dg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Lc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Yn]=e,t[_l]=i,G0(t,e,!1,!1),e.stateNode=t;e:{switch(l=tf(n,i),n){case"dialog":je("cancel",t),je("close",t),s=i;break;case"iframe":case"object":case"embed":je("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ba.length;s++)je(Ba[s],t);s=i;break;case"source":je("error",t),s=i;break;case"img":case"image":case"link":je("error",t),je("load",t),s=i;break;case"details":je("toggle",t),s=i;break;case"input":Ng(t,i),s=Kd(t,i),je("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Qe({},i,{value:void 0}),je("invalid",t);break;case"textarea":Mg(t,i),s=Xd(t,i),je("invalid",t);break;default:s=i}ef(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Cy(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Sy(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ll(t,d):typeof d=="number"&&ll(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(al.hasOwnProperty(o)?d!=null&&o==="onScroll"&&je("scroll",t):d!=null&&_p(t,o,d,l))}switch(n){case"input":Mu(t),Og(t,i,!1);break;case"textarea":Mu(t),Dg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Sr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?so(t,!!i.multiple,o,!1):i.defaultValue!=null&&so(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)Q0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(K(166));if(n=Yr(yl.current),Yr(Jn.current),$u(e)){if(i=e.stateNode,n=e.memoizedProps,i[Yn]=e,(o=i.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Wu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Yn]=e,e.stateNode=i}return Dt(e),null;case 13:if(Ue(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&an!==null&&e.mode&1&&!(e.flags&128))p0(),vo(),e.flags|=98560,o=!1;else if(o=$u(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[Yn]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),o=!1}else On!==null&&(Df(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):Jp())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return wo(),Af(t,e),t===null&&ml(e.stateNode.containerInfo),Dt(e),null;case 10:return Dp(e.type._context),Dt(e),null;case 17:return en(e.type)&&bc(),Dt(e),null;case 19:if(Ue(Ge),o=e.memoizedState,o===null)return Dt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ma(o,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Fc(t),l!==null){for(e.flags|=128,Ma(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>To&&(e.flags|=128,i=!0,Ma(o,!1),e.lanes=4194304)}else{if(!i)if(t=Fc(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ma(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Dt(e),null}else 2*nt()-o.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,i=!0,Ma(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ge.current,ze(Ge,i?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Xp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function vx(t,e){switch(bp(e),e.tag){case 1:return en(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),Ue(Jt),Ue(Ut),Bp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jp(e),null;case 13:if(Ue(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ge),null;case 4:return wo(),null;case 10:return Dp(e.type._context),null;case 22:case 23:return Xp(),null;case 24:return null;default:return null}}var Zu=!1,Ft=!1,yx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function kf(t,e,n){try{n()}catch(i){Je(t,e,i)}}var S_=!1;function wx(t,e){if(df=Ac,t=t0(),Rp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,E=t,T=null;t:for(;;){for(var N;E!==n||s!==0&&E.nodeType!==3||(h=l+s),E!==o||i!==0&&E.nodeType!==3||(d=l+i),E.nodeType===3&&(l+=E.nodeValue.length),(N=E.firstChild)!==null;)T=E,E=N;for(;;){if(E===t)break t;if(T===n&&++m===s&&(h=l),T===o&&++v===i&&(d=l),(N=E.nextSibling)!==null)break;E=T,T=E.parentNode}E=N}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:t,selectionRange:n},Ac=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var z=D.memoizedProps,$=D.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?z:bn(e.type,z),$);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(H){Je(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return D=S_,S_=!1,D}function Xa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&kf(e,n,o)}s=s.next}while(s!==i)}}function _h(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Rf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Y0(t){var e=t.alternate;e!==null&&(t.alternate=null,Y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[_l],delete e[gf],delete e[nx],delete e[ix])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X0(t){return t.tag===5||t.tag===3||t.tag===4}function P_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lc));else if(i!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}function bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}var St=null,Nn=!1;function er(t,e,n){for(n=n.child;n!==null;)J0(t,e,n),n=n.sibling}function J0(t,e,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(uh,n)}catch{}switch(n.tag){case 5:Ft||io(n,e);case 6:var i=St,s=Nn;St=null,er(t,e,n),St=i,Nn=s,St!==null&&(Nn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Nn?(t=St,n=n.stateNode,t.nodeType===8?vd(t.parentNode,n):t.nodeType===1&&vd(t,n),dl(t)):vd(St,n.stateNode));break;case 4:i=St,s=Nn,St=n.stateNode.containerInfo,Nn=!0,er(t,e,n),St=i,Nn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&kf(n,e,l),s=s.next}while(s!==i)}er(t,e,n);break;case 1:if(!Ft&&(io(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(Ft=(i=Ft)||n.memoizedState!==null,er(t,e,n),Ft=i):er(t,e,n);break;default:er(t,e,n)}}function C_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yx),e.forEach(function(i){var s=kx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:St=h.stateNode,Nn=!1;break e;case 3:St=h.stateNode.containerInfo,Nn=!0;break e;case 4:St=h.stateNode.containerInfo,Nn=!0;break e}h=h.return}if(St===null)throw Error(K(160));J0(o,l,s),St=null,Nn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){Je(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ew(e,t),e=e.sibling}function ew(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Kn(t),i&4){try{Xa(3,t,t.return),_h(3,t)}catch(z){Je(t,t.return,z)}try{Xa(5,t,t.return)}catch(z){Je(t,t.return,z)}}break;case 1:Ln(e,t),Kn(t),i&512&&n!==null&&io(n,n.return);break;case 5:if(Ln(e,t),Kn(t),i&512&&n!==null&&io(n,n.return),t.flags&32){var s=t.stateNode;try{ll(s,"")}catch(z){Je(t,t.return,z)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Ty(s,o),tf(h,l);var m=tf(h,o);for(l=0;l<d.length;l+=2){var v=d[l],E=d[l+1];v==="style"?Cy(s,E):v==="dangerouslySetInnerHTML"?Sy(s,E):v==="children"?ll(s,E):_p(s,v,E,m)}switch(h){case"input":Qd(s,o);break;case"textarea":Iy(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var N=o.value;N!=null?so(s,!!o.multiple,N,!1):T!==!!o.multiple&&(o.defaultValue!=null?so(s,!!o.multiple,o.defaultValue,!0):so(s,!!o.multiple,o.multiple?[]:"",!1))}s[_l]=o}catch(z){Je(t,t.return,z)}}break;case 6:if(Ln(e,t),Kn(t),i&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(z){Je(t,t.return,z)}}break;case 3:if(Ln(e,t),Kn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{dl(e.containerInfo)}catch(z){Je(t,t.return,z)}break;case 4:Ln(e,t),Kn(t);break;case 13:Ln(e,t),Kn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Qp=nt())),i&4&&C_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(m=Ft)||v,Ln(e,t),Ft=m):Ln(e,t),Kn(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(ne=t,v=t.child;v!==null;){for(E=ne=v;ne!==null;){switch(T=ne,N=T.child,T.tag){case 0:case 11:case 14:case 15:Xa(4,T,T.return);break;case 1:io(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(z){Je(i,n,z)}}break;case 5:io(T,T.return);break;case 22:if(T.memoizedState!==null){k_(E);continue}}N!==null?(N.return=T,ne=N):k_(E)}v=v.sibling}e:for(v=null,E=t;;){if(E.tag===5){if(v===null){v=E;try{s=E.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=E.stateNode,d=E.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Py("display",l))}catch(z){Je(t,t.return,z)}}}else if(E.tag===6){if(v===null)try{E.stateNode.nodeValue=m?"":E.memoizedProps}catch(z){Je(t,t.return,z)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;v===E&&(v=null),E=E.return}v===E&&(v=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Ln(e,t),Kn(t),i&4&&C_(t);break;case 21:break;default:Ln(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X0(n)){var i=n;break e}n=n.return}throw Error(K(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ll(s,""),i.flags&=-33);var o=P_(t);bf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=P_(t);Lf(t,h,l);break;default:throw Error(K(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ex(t,e,n){ne=t,tw(t)}function tw(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var s=ne,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Zu;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Ft;h=Zu;var m=Ft;if(Zu=l,(Ft=d)&&!m)for(ne=s;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?R_(s):d!==null?(d.return=l,ne=d):R_(s);for(;o!==null;)ne=o,tw(o),o=o.sibling;ne=s,Zu=h,Ft=m}A_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ne=o):A_(t)}}function A_(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||_h(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ft)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&d_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var E=v.dehydrated;E!==null&&dl(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ft||e.flags&512&&Rf(e)}catch(T){Je(e,e.return,T)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function k_(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function R_(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_h(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{Rf(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{Rf(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var Tx=Math.ceil,Uc=Fi.ReactCurrentDispatcher,Gp=Fi.ReactCurrentOwner,En=Fi.ReactCurrentBatchConfig,Re=0,Et=null,lt=null,At=0,on=0,ro=Lr(0),pt=0,Il=null,as=0,vh=0,Kp=0,Ja=null,Qt=null,Qp=0,To=1/0,wi=null,Wc=!1,Nf=null,_r=null,Gu=!1,cr=null,$c=0,el=0,Of=null,hc=-1,dc=0;function qt(){return Re&6?nt():hc!==-1?hc:hc=nt()}function vr(t){return t.mode&1?Re&2&&At!==0?At&-At:sx.transition!==null?(dc===0&&(dc=Fy()),dc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:qy(t.type)),t):1}function Dn(t,e,n,i){if(50<el)throw el=0,Of=null,Error(K(185));Ml(t,n,i),(!(Re&2)||t!==Et)&&(t===Et&&(!(Re&2)&&(vh|=n),pt===4&&sr(t,At)),tn(t,i),n===1&&Re===0&&!(e.mode&1)&&(To=nt()+500,ph&&br()))}function tn(t,e){var n=t.callbackNode;sI(t,e);var i=Cc(t,t===Et?At:0);if(i===0)n!==null&&Fg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Fg(n),e===1)t.tag===0?rx(L_.bind(null,t)):h0(L_.bind(null,t)),ex(function(){!(Re&6)&&br()}),n=null;else{switch(jy(i)){case 1:n=Tp;break;case 4:n=Vy;break;case 16:n=Pc;break;case 536870912:n=zy;break;default:n=Pc}n=uw(n,nw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nw(t,e){if(hc=-1,dc=0,Re&6)throw Error(K(327));var n=t.callbackNode;if(co()&&t.callbackNode!==n)return null;var i=Cc(t,t===Et?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Hc(t,i);else{e=i;var s=Re;Re|=2;var o=rw();(Et!==t||At!==e)&&(wi=null,To=nt()+500,es(t,e));do try{Sx();break}catch(h){iw(t,h)}while(1);Mp(),Uc.current=o,Re=s,lt!==null?e=0:(Et=null,At=0,e=pt)}if(e!==0){if(e===2&&(s=af(t),s!==0&&(i=s,e=Mf(t,s))),e===1)throw n=Il,es(t,0),sr(t,i),tn(t,nt()),n;if(e===6)sr(t,i);else{if(s=t.current.alternate,!(i&30)&&!Ix(s)&&(e=Hc(t,i),e===2&&(o=af(t),o!==0&&(i=o,e=Mf(t,o))),e===1))throw n=Il,es(t,0),sr(t,i),tn(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(K(345));case 2:Zr(t,Qt,wi);break;case 3:if(sr(t,i),(i&130023424)===i&&(e=Qp+500-nt(),10<e)){if(Cc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mf(Zr.bind(null,t,Qt,wi),e);break}Zr(t,Qt,wi);break;case 4:if(sr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Mn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tx(i/1960))-i,10<i){t.timeoutHandle=mf(Zr.bind(null,t,Qt,wi),i);break}Zr(t,Qt,wi);break;case 5:Zr(t,Qt,wi);break;default:throw Error(K(329))}}}return tn(t,nt()),t.callbackNode===n?nw.bind(null,t):null}function Mf(t,e){var n=Ja;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=Hc(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Df(e)),t}function Df(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function Ix(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!jn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~Kp,e&=~vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),i=1<<n;t[n]=-1,e&=~i}}function L_(t){if(Re&6)throw Error(K(327));co();var e=Cc(t,0);if(!(e&1))return tn(t,nt()),null;var n=Hc(t,e);if(t.tag!==0&&n===2){var i=af(t);i!==0&&(e=i,n=Mf(t,i))}if(n===1)throw n=Il,es(t,0),sr(t,e),tn(t,nt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Qt,wi),tn(t,nt()),null}function Yp(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(To=nt()+500,ph&&br())}}function ls(t){cr!==null&&cr.tag===0&&!(Re&6)&&co();var e=Re;Re|=1;var n=En.transition,i=Oe;try{if(En.transition=null,Oe=1,t)return t()}finally{Oe=i,En.transition=n,Re=e,!(Re&6)&&br()}}function Xp(){on=ro.current,Ue(ro)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JI(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(bp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bc();break;case 3:wo(),Ue(Jt),Ue(Ut),Bp();break;case 5:jp(i);break;case 4:wo();break;case 13:Ue(Ge);break;case 19:Ue(Ge);break;case 10:Dp(i.type._context);break;case 22:case 23:Xp()}n=n.return}if(Et=t,lt=t=yr(t.current,null),At=on=e,pt=0,Il=null,Kp=vh=as=0,Qt=Ja=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Qr=null}return t}function iw(t,e){do{var n=lt;try{if(Mp(),lc.current=Bc,jc){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}jc=!1}if(os=0,wt=ft=Ke=null,Ya=!1,wl=0,Gp.current=null,n===null||n.return===null){pt=1,Il=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,E=v.tag;if(!(v.mode&1)&&(E===0||E===11||E===15)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var N=v_(l);if(N!==null){N.flags&=-257,y_(N,l,h,o,e),N.mode&1&&__(o,m,e),e=N,d=m;var D=e.updateQueue;if(D===null){var z=new Set;z.add(d),e.updateQueue=z}else D.add(d);break e}else{if(!(e&1)){__(o,m,e),Jp();break e}d=Error(K(426))}}else if(He&&h.mode&1){var $=v_(l);if($!==null){!($.flags&65536)&&($.flags|=256),y_($,l,h,o,e),Np(Eo(d,h));break e}}o=d=Eo(d,h),pt!==4&&(pt=2),Ja===null?Ja=[o]:Ja.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=j0(o,d,e);h_(o,b);break e;case 1:h=d;var S=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(_r===null||!_r.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=B0(o,h,e);h_(o,H);break e}}o=o.return}while(o!==null)}ow(n)}catch(Y){e=Y,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(1)}function rw(){var t=Uc.current;return Uc.current=Bc,t===null?Bc:t}function Jp(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(as&268435455)&&!(vh&268435455)||sr(Et,At)}function Hc(t,e){var n=Re;Re|=2;var i=rw();(Et!==t||At!==e)&&(wi=null,es(t,e));do try{xx();break}catch(s){iw(t,s)}while(1);if(Mp(),Re=n,Uc.current=i,lt!==null)throw Error(K(261));return Et=null,At=0,pt}function xx(){for(;lt!==null;)sw(lt)}function Sx(){for(;lt!==null&&!Q1();)sw(lt)}function sw(t){var e=lw(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?ow(t):lt=e,Gp.current=null}function ow(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vx(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,lt=null;return}}else if(n=_x(n,e,on),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);pt===0&&(pt=5)}function Zr(t,e,n){var i=Oe,s=En.transition;try{En.transition=null,Oe=1,Px(t,e,n,i)}finally{En.transition=s,Oe=i}return null}function Px(t,e,n,i){do co();while(cr!==null);if(Re&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(oI(t,o),t===Et&&(lt=Et=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,uw(Pc,function(){return co(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=En.transition,En.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,Gp.current=null,wx(t,n),ew(n,t),qI(ff),Ac=!!df,ff=df=null,t.current=n,Ex(n),Y1(),Re=h,Oe=l,En.transition=o}else t.current=n;if(Gu&&(Gu=!1,cr=t,$c=s),o=t.pendingLanes,o===0&&(_r=null),eI(n.stateNode),tn(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Wc)throw Wc=!1,t=Nf,Nf=null,t;return $c&1&&t.tag!==0&&co(),o=t.pendingLanes,o&1?t===Of?el++:(el=0,Of=t):el=0,br(),null}function co(){if(cr!==null){var t=jy($c),e=En.transition,n=Oe;try{if(En.transition=null,Oe=16>t?16:t,cr===null)var i=!1;else{if(t=cr,cr=null,$c=0,Re&6)throw Error(K(331));var s=Re;for(Re|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(ne=m;ne!==null;){var v=ne;switch(v.tag){case 0:case 11:case 15:Xa(8,v,o)}var E=v.child;if(E!==null)E.return=v,ne=E;else for(;ne!==null;){v=ne;var T=v.sibling,N=v.return;if(Y0(v),v===m){ne=null;break}if(T!==null){T.return=N,ne=T;break}ne=N}}}var D=o.alternate;if(D!==null){var z=D.child;if(z!==null){D.child=null;do{var $=z.sibling;z.sibling=null,z=$}while(z!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xa(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ne=b;break e}ne=o.return}}var S=t.current;for(ne=S;ne!==null;){l=ne;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ne=O;else e:for(l=S;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:_h(9,h)}}catch(Y){Je(h,h.return,Y)}if(h===l){ne=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ne=H;break e}ne=h.return}}if(Re=s,br(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(uh,t)}catch{}i=!0}return i}finally{Oe=n,En.transition=e}}return!1}function b_(t,e,n){e=Eo(n,e),e=j0(t,e,1),t=gr(t,e,1),e=qt(),t!==null&&(Ml(t,1,e),tn(t,e))}function Je(t,e,n){if(t.tag===3)b_(t,t,n);else for(;e!==null;){if(e.tag===3){b_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_r===null||!_r.has(i))){t=Eo(n,t),t=B0(e,t,1),e=gr(e,t,1),t=qt(),e!==null&&(Ml(e,1,t),tn(e,t));break}}e=e.return}}function Cx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(At&n)===n&&(pt===4||pt===3&&(At&130023424)===At&&500>nt()-Qp?es(t,0):Kp|=n),tn(t,e)}function aw(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var n=qt();t=bi(t,e),t!==null&&(Ml(t,e,n),tn(t,n))}function Ax(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aw(t,n)}function kx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(e),aw(t,n)}var lw;lw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,gx(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,He&&e.flags&1048576&&d0(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;cc(t,e),t=e.pendingProps;var s=_o(e,Ut.current);uo(e,n),s=Wp(null,e,i,t,s,n);var o=$p();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(i)?(o=!0,Nc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zp(e),s.updater=gh,e.stateNode=s,s._reactInternals=e,Tf(e,i,t,n),e=Sf(null,e,i,!0,o,n)):(e.tag=0,He&&o&&Lp(e),Ht(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Lx(i),t=bn(i,t),s){case 0:e=xf(null,e,i,t,n);break e;case 1:e=T_(null,e,i,t,n);break e;case 11:e=w_(null,e,i,t,n);break e;case 14:e=E_(null,e,i,bn(i.type,t),n);break e}throw Error(K(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:bn(i,s),xf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:bn(i,s),T_(t,e,i,s,n);case 3:e:{if(H0(e),t===null)throw Error(K(387));i=e.pendingProps,o=e.memoizedState,s=o.element,v0(t,e),zc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Eo(Error(K(423)),e),e=I_(t,e,i,n,s);break e}else if(i!==s){s=Eo(Error(K(424)),e),e=I_(t,e,i,n,s);break e}else for(an=mr(e.stateNode.containerInfo.firstChild),un=e,He=!0,On=null,n=g0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),i===s){e=Ni(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return y0(e),t===null&&yf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,pf(i,s)?l=null:o!==null&&pf(i,o)&&(e.flags|=32),$0(t,e),Ht(t,e,l,n),e.child;case 6:return t===null&&yf(e),null;case 13:return q0(t,e,n);case 4:return Fp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=yo(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:bn(i,s),w_(t,e,i,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,ze(Dc,i._currentValue),i._currentValue=l,o!==null)if(jn(o.value,l)){if(o.children===s.children&&!Jt.current){e=Ni(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=ki(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),wf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(K(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),wf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,uo(e,n),s=Tn(s),i=i(s),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,s=bn(i,e.pendingProps),s=bn(i.type,s),E_(t,e,i,s,n);case 15:return U0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:bn(i,s),cc(t,e),e.tag=1,en(i)?(t=!0,Nc(e)):t=!1,uo(e,n),F0(e,i,s),Tf(e,i,s,n),Sf(null,e,i,!0,t,n);case 19:return Z0(t,e,n);case 22:return W0(t,e,n)}throw Error(K(156,e.tag))};function uw(t,e){return Dy(t,e)}function Rx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,i){return new Rx(t,e,n,i)}function em(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lx(t){if(typeof t=="function")return em(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yp)return 11;if(t===wp)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")em(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Gs:return ts(n.children,s,o,e);case vp:l=8,s|=8;break;case Hd:return t=wn(12,n,e,s|2),t.elementType=Hd,t.lanes=o,t;case qd:return t=wn(13,n,e,s),t.elementType=qd,t.lanes=o,t;case Zd:return t=wn(19,n,e,s),t.elementType=Zd,t.lanes=o,t;case yy:return yh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _y:l=10;break e;case vy:l=9;break e;case yp:l=11;break e;case wp:l=14;break e;case nr:l=16,i=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=wn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function ts(t,e,n,i){return t=wn(7,t,i,e),t.lanes=n,t}function yh(t,e,n,i){return t=wn(22,t,i,e),t.elementType=yy,t.lanes=n,t.stateNode={isHidden:!1},t}function Pd(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Cd(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bx(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ad(0),this.expirationTimes=ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ad(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tm(t,e,n,i,s,o,l,h,d){return t=new bx(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=wn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(o),t}function Nx(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function cw(t){if(!t)return Pr;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(en(n))return c0(t,n,e)}return e}function hw(t,e,n,i,s,o,l,h,d){return t=tm(n,i,!0,t,s,o,l,h,d),t.context=cw(null),n=t.current,i=qt(),s=vr(n),o=ki(i,s),o.callback=e??null,gr(n,o,s),t.current.lanes=s,Ml(t,s,i),tn(t,i),t}function wh(t,e,n,i){var s=e.current,o=qt(),l=vr(s);return n=cw(n),e.context===null?e.context=n:e.pendingContext=n,e=ki(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=gr(s,e,l),t!==null&&(Dn(t,s,l,o),ac(t,s,l)),l}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nm(t,e){N_(t,e),(t=t.alternate)&&N_(t,e)}function Ox(){return null}var dw=typeof reportError=="function"?reportError:function(t){console.error(t)};function im(t){this._internalRoot=t}Eh.prototype.render=im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));wh(t,e,null,null)};Eh.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){wh(null,t,null,null)}),e[Li]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&Hy(t)}};function rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function O_(){}function Mx(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=qc(l);o.call(m)}}var l=hw(e,i,t,0,null,!1,!1,"",O_);return t._reactRootContainer=l,t[Li]=l.current,ml(t.nodeType===8?t.parentNode:t),ls(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=qc(d);h.call(m)}}var d=tm(t,0,!1,null,null,!1,!1,"",O_);return t._reactRootContainer=d,t[Li]=d.current,ml(t.nodeType===8?t.parentNode:t),ls(function(){wh(e,d,n,i)}),d}function Ih(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=qc(l);h.call(d)}}wh(e,l,t,s)}else l=Mx(n,e,t,s,i);return qc(l)}By=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ja(e.pendingLanes);n!==0&&(Ip(e,n|1),tn(e,nt()),!(Re&6)&&(To=nt()+500,br()))}break;case 13:ls(function(){var i=bi(t,1);if(i!==null){var s=qt();Dn(i,t,1,s)}}),nm(t,1)}};xp=function(t){if(t.tag===13){var e=bi(t,134217728);if(e!==null){var n=qt();Dn(e,t,134217728,n)}nm(t,134217728)}};Uy=function(t){if(t.tag===13){var e=vr(t),n=bi(t,e);if(n!==null){var i=qt();Dn(n,t,e,i)}nm(t,e)}};Wy=function(){return Oe};$y=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};rf=function(t,e,n){switch(e){case"input":if(Qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=fh(i);if(!s)throw Error(K(90));Ey(i),Qd(i,s)}}}break;case"textarea":Iy(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};Ry=Yp;Ly=ls;var Dx={usingClientEntryPoint:!1,Events:[Vl,Xs,fh,Ay,ky,Yp]},Da={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oy(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||Ox,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{uh=Ku.inject(Vx),Xn=Ku}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rm(e))throw Error(K(200));return Nx(t,e,null,n)};hn.createRoot=function(t,e){if(!rm(t))throw Error(K(299));var n=!1,i="",s=dw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tm(t,1,!1,null,null,n,!1,i,s),t[Li]=e.current,ml(t.nodeType===8?t.parentNode:t),new im(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Oy(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ls(t)};hn.hydrate=function(t,e,n){if(!Th(e))throw Error(K(200));return Ih(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!rm(t))throw Error(K(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=dw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=hw(e,null,t,1,n??null,s,!1,o,l),t[Li]=e.current,ml(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eh(e)};hn.render=function(t,e,n){if(!Th(e))throw Error(K(200));return Ih(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Th(t))throw Error(K(40));return t._reactRootContainer?(ls(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};hn.unstable_batchedUpdates=Yp;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Th(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Ih(t,e,n,!1,i)};hn.version="18.3.1-next-f1338f8080-20240426";function fw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fw)}catch(t){console.error(t)}}fw(),fy.exports=hn;var pw=fy.exports,M_=pw;Wd.createRoot=M_.createRoot,Wd.hydrateRoot=M_.hydrateRoot;function mw(t,e){const n=re.useRef(e);re.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const zx=1;function Fx(t){return Object.freeze({__version:zx,map:t})}function jx(t,e){return Object.freeze({...t,...e})}const gw=re.createContext(null),_w=gw.Provider;function sm(){const t=re.useContext(gw);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Bx(t){function e(n,i){const{instance:s,context:o}=t(n).current;return re.useImperativeHandle(i,()=>s),n.children==null?null:ol.createElement(_w,{value:o},n.children)}return re.forwardRef(e)}function Ux(t){function e(n,i){const[s,o]=re.useState(!1),{instance:l}=t(n,o).current;re.useImperativeHandle(i,()=>l),re.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?pw.createPortal(n.children,h):null}return re.forwardRef(e)}function Wx(t){function e(n,i){const{instance:s}=t(n).current;return re.useImperativeHandle(i,()=>s),null}return re.forwardRef(e)}function vw(t,e){const n=re.useRef();re.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function om(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function $x(t,e){return function(i,s){const o=sm(),l=t(om(i,o),o);return mw(o.map,i.attribution),vw(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Vf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(d1,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,y,k;return k=function(){f=!1,g&&(y.apply(c,g),g=!1)},y=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(k,a),f=!0)},y}function v(r,a,c){var f=a[1],g=a[0],y=f-g;return r===f&&c?r:((r-g)%y+y)%y+g}function E(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function N(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function D(r){return N(r).split(/\s+/)}function z(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function $(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function S(r,a){return r.replace(b,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var O=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function H(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Q(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var C=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(r,c)}var P=window.requestAnimationFrame||Q("RequestAnimationFrame")||I,A=window.cancelAnimationFrame||Q("CancelAnimationFrame")||Q("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function M(r,a,c){if(c&&P===I)r.call(a);else return P.call(window,l(r,a))}function V(r){r&&A.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:E,formatNum:T,trim:N,splitWords:D,setOptions:z,getParamString:$,template:S,isArray:O,indexOf:H,emptyImageUrl:Y,requestFn:P,cancelFn:A,requestAnimFrame:M,cancelAnimFrame:V};function We(){}We.extend=function(r){var a=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(xn(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,k=f._initHooks.length;y<k;y++)f._initHooks[y].call(this)}},a},We.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},We.mergeOptions=function(r){return s(this.prototype.options,r),this},We.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function xn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=O(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Xe={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=D(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=D(r);for(var g=arguments.length===1,y=0,k=r.length;y<k;y++)g?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,y;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,y=f.length;g<y;g++)f[g].fn=E;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var j=f[k];this._firingCount&&(j.fn=E,this._events[r]=f=f.slice()),f.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var y=0,k=g.length;y<k;y++){var j=g[y],U=j.fn;j.once&&this.off(r,U,j.ctx),U.call(j.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,y=f.length;g<y;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=D(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Xe.addEventListener=Xe.on,Xe.removeEventListener=Xe.clearAllEventListeners=Xe.off,Xe.addOneTimeEventListener=Xe.once,Xe.fireEvent=Xe.fire,Xe.hasEventListeners=Xe.listens;var ye=We.extend(Xe);function B(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ae=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new B(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new B(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function X(r,a,c){return r instanceof B?r:O(r)?new B(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new B(r.x,r.y):new B(r,a,c)}function ue(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ue.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof B||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=_e(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof B?r=X(r):r=_e(r),r instanceof ue?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=_e(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return y&&k},overlaps:function(r){r=_e(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return y&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return _e(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=_e(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function _e(r,a){return!r||r instanceof ue?r:new ue(r,a)}function xe(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}xe.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof we)f=r,g=r;else if(r instanceof xe){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(fe(r)||be(r)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new xe(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof we||"lat"in r?r=fe(r):r=be(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof xe?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=be(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return y&&k},overlaps:function(r){r=be(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return y&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=be(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(r,a){return r instanceof xe?r:new xe(r,a)}function we(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return Un.distance(this,fe(r))},wrap:function(){return Un.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return be([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof we?r:O(r)&&typeof r[0]!="object"?r.length===3?new we(r[0],r[1],r[2]):r.length===2?new we(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new we(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new we(r,a,c)}var it={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ue(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new we(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var y=r.getSouthWest(),k=r.getNorthEast(),j=new we(y.lat-f,y.lng-g),U=new we(k.lat-f,k.lng-g);return new xe(j,U)}},Un=s({},it,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),j=y*y+Math.cos(f)*Math.cos(g)*k*k,U=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*U}}),Xl=6378137,Bi={R:Xl,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new B(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=Xl*Math.PI;return new ue([-r,-r],[r,r])}()};function Ui(r,a,c,f){if(O(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Ui.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new B((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function si(r,a,c,f){return new Ui(r,a,c,f)}var Or=s({},Un,{code:"EPSG:3857",projection:Bi,transformation:function(){var r=.5/(Math.PI*Bi.R);return si(r,.5,-r,.5)}()}),Uo=s({},Or,{code:"EPSG:900913"});function ws(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Wo(r,a){var c="",f,g,y,k,j,U;for(f=0,y=r.length;f<y;f++){for(j=r[f],g=0,k=j.length;g<k;g++)U=j[g],c+=(g?"L":"M")+U.x+" "+U.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var Es=document.documentElement.style,Ts="ActiveXObject"in window,Jl=Ts&&!document.addEventListener,$o="msLaunchUri"in navigator&&!("documentMode"in document),Mr=bt("webkit"),Ho=bt("android"),eu=bt("android 2")||bt("android 3"),qo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zo=Ho&&bt("Google")&&qo<537&&!("AudioNode"in window),Dr=!!window.opera,ct=!$o&&bt("chrome"),gt=bt("gecko")&&!Mr&&!Dr&&!Ts,Is=!ct&&bt("safari"),Go=bt("phantom"),Ko="OTransition"in Es,Zh=navigator.platform.indexOf("Win")===0,Wi=Ts&&"transition"in Es,xs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!eu,Qo="MozPerspective"in Es,Yo=!window.L_DISABLE_3D&&(Wi||xs||Qo)&&!Ko&&!Go,Vr=typeof orientation<"u"||bt("mobile"),Gh=Vr&&Mr,Xo=Vr&&xs,Jo=!window.PointerEvent&&window.MSPointerEvent,ea=!!(window.PointerEvent||Jo),$i="ontouchstart"in window||!!window.TouchEvent,ta=!window.L_NO_TOUCH&&($i||ea),na=Vr&&Dr,oi=Vr&&gt,tu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ss=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",E,a),window.removeEventListener("testPassiveEventSupport",E,a)}catch{}return r}(),nu=function(){return!!document.createElement("canvas").getContext}(),ai=!!(document.createElementNS&&ws("svg").createSVGRect),iu=!!ai&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),It=!ai&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),ru=navigator.platform.indexOf("Mac")===0,zr=navigator.platform.indexOf("Linux")===0;function bt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var se={ie:Ts,ielt9:Jl,edge:$o,webkit:Mr,android:Ho,android23:eu,androidStock:Zo,opera:Dr,chrome:ct,gecko:gt,safari:Is,phantom:Go,opera12:Ko,win:Zh,ie3d:Wi,webkit3d:xs,gecko3d:Qo,any3d:Yo,mobile:Vr,mobileWebkit:Gh,mobileWebkit3d:Xo,msPointer:Jo,pointer:ea,touch:ta,touchNative:$i,mobileOpera:na,mobileGecko:oi,retina:tu,passiveEvents:Ss,canvas:nu,svg:ai,vml:It,inlineSvg:iu,mac:ru,linux:zr},su=se.msPointer?"MSPointerDown":"pointerdown",li=se.msPointer?"MSPointerMove":"pointermove",ou=se.msPointer?"MSPointerUp":"pointerup",au=se.msPointer?"MSPointerCancel":"pointercancel",Hi={touchstart:su,touchmove:li,touchend:ou,touchcancel:au},ia={touchstart:Kh,touchmove:jr,touchend:jr,touchcancel:jr},Wn={},Fr=!1;function $n(r,a,c){return a==="touchstart"&&cu(),ia[a]?(c=ia[a].bind(this,c),r.addEventListener(Hi[a],c,!1),c):(console.warn("wrong event specified:",a),E)}function lu(r,a,c){if(!Hi[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Hi[a],c,!1)}function uu(r){Wn[r.pointerId]=r}function ra(r){Wn[r.pointerId]&&(Wn[r.pointerId]=r)}function Ps(r){delete Wn[r.pointerId]}function cu(){Fr||(document.addEventListener(su,uu,!0),document.addEventListener(li,ra,!0),document.addEventListener(ou,Ps,!0),document.addEventListener(au,Ps,!0),Fr=!0)}function jr(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Wn)a.touches.push(Wn[c]);a.changedTouches=[a],r(a)}}function Kh(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&st(a),jr(r,a)}function Cs(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var hu=200;function sa(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var k=Ki(y);if(!(k.some(function(U){return U instanceof HTMLLabelElement&&U.attributes.for})&&!k.some(function(U){return U instanceof HTMLInputElement||U instanceof HTMLSelectElement}))){var j=Date.now();j-c<=hu?(f++,f===2&&a(Cs(y))):f=1,c=j}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Br(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Sn=di(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ui=di(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),du=ui==="webkitTransition"||ui==="OTransition"?ui+"End":"transitionend";function oa(r){return typeof r=="string"?document.getElementById(r):r}function qi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function Zi(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ci(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function hi(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function aa(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=ks(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(r,a){if(r.classList!==void 0)for(var c=D(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!aa(r,a)){var y=ks(r);As(r,(y?y+" ":"")+a)}}function $e(r,a){r.classList!==void 0?r.classList.remove(a):As(r,N((" "+ks(r)+" ").replace(" "+a+" "," ")))}function As(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function ks(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function rt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Pn(r,a)}function Pn(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function di(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function fn(r,a,c){var f=a||new B(0,0);r.style[Sn]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function qe(r,a){r._leaflet_pos=a,se.any3d?fn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function ke(r){return r._leaflet_pos||new B(0,0)}var Hn,Cn,fi;if("onselectstart"in document)Hn=function(){de(window,"selectstart",st)},Cn=function(){De(window,"selectstart",st)};else{var Ur=di(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if(Ur){var r=document.documentElement.style;fi=r[Ur],r[Ur]="none"}},Cn=function(){Ur&&(document.documentElement.style[Ur]=fi,fi=void 0)}}function Rs(){de(window,"dragstart",st)}function la(){De(window,"dragstart",st)}var Ls,ua;function ca(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(qn(),Ls=r,ua=r.style.outlineStyle,r.style.outlineStyle="none",de(window,"keydown",qn))}function qn(){Ls&&(Ls.style.outlineStyle=ua,Ls=void 0,ua=void 0,De(window,"keydown",qn))}function An(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function bs(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var fu={__proto__:null,TRANSFORM:Sn,TRANSITION:ui,TRANSITION_END:du,get:oa,getStyle:qi,create:Pe,remove:Ve,empty:Zi,toFront:ci,toBack:hi,hasClass:aa,addClass:ve,removeClass:$e,setClass:As,getClass:ks,setOpacity:rt,testProp:di,setTransform:fn,setPosition:qe,getPosition:ke,get disableTextSelection(){return Hn},get enableTextSelection(){return Cn},disableImageDrag:Rs,enableImageDrag:la,preventOutline:ca,restoreOutline:qn,getSizedParentNode:An,getScale:bs};function de(r,a,c,f){if(a&&typeof a=="object")for(var g in a)pn(r,g,a[g],c);else{a=D(a);for(var y=0,k=a.length;y<k;y++)pn(r,a[y],c,f)}return this}var xt="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)pu(r),delete r[xt];else if(a&&typeof a=="object")for(var g in a)da(r,g,a[g],c);else if(a=D(a),arguments.length===2)pu(r,function(j){return H(a,j)!==-1});else for(var y=0,k=a.length;y<k;y++)da(r,a[y],c,f);return this}function pu(r,a){for(var c in r[xt]){var f=c.split(/\d/)[0];(!a||a(f))&&da(r,f,null,null,c)}}var ha={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pn(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[xt]&&r[xt][g])return this;var y=function(j){return c.call(f||r,j||window.event)},k=y;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?y=$n(r,a,y):se.touch&&a==="dblclick"?y=sa(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(ha[a]||a,y,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(j){j=j||window.event,ma(r,j)&&k(j)},r.addEventListener(ha[a],y,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,y),r[xt]=r[xt]||{},r[xt][g]=y}function da(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var y=r[xt]&&r[xt][g];if(!y)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?lu(r,a,y):se.touch&&a==="dblclick"?Br(r,y):"removeEventListener"in r?r.removeEventListener(ha[a]||a,y,!1):r.detachEvent("on"+a,y),r[xt][g]=null}function pi(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Gi(r){return pn(r,"wheel",pi),this}function Zn(r){return de(r,"mousedown touchstart dblclick contextmenu",pi),r._leaflet_disable_click=!0,this}function st(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function rn(r){return st(r),pi(r),this}function Ki(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function fa(r,a){if(!a)return new B(r.clientX,r.clientY);var c=bs(a),f=c.boundingClientRect;return new B((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var pa=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fe(r){return se.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/pa:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ma(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Qh={__proto__:null,on:de,off:De,stopPropagation:pi,disableScrollPropagation:Gi,disableClickPropagation:Zn,preventDefault:st,stop:rn,getPropagationPath:Ki,getMousePosition:fa,getWheelDelta:Fe,isExternalTarget:ma,addListener:de,removeListener:De},ga=ye.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ke(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),qe(this._el,c),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Te=ye.extend({options:{crs:Or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=z(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ui&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,du,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),y=r instanceof B?r:this.latLngToContainerPoint(r),k=y.subtract(g).multiplyBy(1-1/f),j=this.containerPointToLatLng(g.add(k));return this.setView(j,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():be(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var y=f.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),g),j=this.project(r.getNorthEast(),g),U=this.unproject(k.add(j).divideBy(2).add(y),g);return{center:U,zoom:g}},fitBounds:function(r,a){if(r=be(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ga,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),y=this.getSize(),k=this._zoom;r=fe(r),a=a===void 0?k:a;var j=Math.max(y.x,y.y),U=j*this.getZoomScale(k,a),Z=g.distanceTo(f)||1,ee=1.42,le=ee*ee;function Ee(ot){var bu=ot?-1:1,l1=ot?U:j,u1=U*U-j*j+bu*le*le*Z*Z,c1=2*l1*le*Z,td=u1/c1,Pg=Math.sqrt(td*td+1)-td,h1=Pg<1e-9?-18:Math.log(Pg);return h1}function $t(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function vt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function _n(ot){return $t(ot)/vt(ot)}var Kt=Ee(0);function Bs(ot){return j*(vt(Kt)/vt(Kt+ee*ot))}function r1(ot){return j*(vt(Kt)*_n(Kt+ee*ot)-$t(Kt))/le}function s1(ot){return 1-Math.pow(1-ot,1.5)}var o1=Date.now(),xg=(Ee(1)-Kt)/ee,a1=c.duration?1e3*c.duration:1e3*xg*.8;function Sg(){var ot=(Date.now()-o1)/a1,bu=s1(ot)*xg;ot<=1?(this._flyToFrame=M(Sg,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(r1(bu)/Z)),k),this.getScaleZoom(j/Bs(bu),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Sg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=be(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,be(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),y=this.project(r),k=this.getPixelBounds(),j=_e([k.min.add(c),k.max.subtract(f)]),U=j.getSize();if(!j.contains(y)){this._enforcingBounds=!0;var Z=y.subtract(j.getCenter()),ee=j.extend(y).getSize().subtract(U);g.x+=Z.x<0?-ee.x:ee.x,g.y+=Z.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),y=f.subtract(g);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new we(a,c),g=f.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var k=this.getBoundsZoom(g);this.setView(f,y.maxZoom?Math.min(k,y.maxZoom):k)}var j={latlng:f,bounds:g,timestamp:r.timestamp};for(var U in r.coords)typeof r.coords[U]=="number"&&(j[U]=r.coords[U]);this.fire("locationfound",j)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new xe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=be(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),y=this.getMaxZoom(),k=r.getNorthWest(),j=r.getSouthEast(),U=this.getSize().subtract(c),Z=_e(this.project(j,f),this.project(k,f)).getSize(),ee=se.any3d?this.options.zoomSnap:1,le=U.x/Z.x,Ee=U.y/Z.y,$t=a?Math.max(le,Ee):Math.min(le,Ee);return f=this.getScaleZoom($t,f),ee&&(f=Math.round(f/(ee/100))*(ee/100),f=a?Math.ceil(f/ee)*ee:Math.floor(f/ee)*ee),Math.max(g,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ue(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(be(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return fa(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=oa(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");de(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(r,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=qi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qe(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(r.markerPane,"leaflet-zoom-hide"),ve(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){qe(this._mapPane,new B(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){qe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:de;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,k=!1;y;){if(f=this._targets[d(y)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!ma(y,r)||(c.push(f),g))||y===this._container)break;y=y.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ca(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var y=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&y.push(c[k]);g=y.concat(g)}if(g.length){a==="contextmenu"&&st(r);var j=g[0],U={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Z=j.getLatLng&&(!j._radius||j._radius<=10);U.containerPoint=Z?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(r),U.layerPoint=this.containerPointToLayerPoint(U.containerPoint),U.latlng=Z?j.getLatLng():this.layerPointToLatLng(U.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,U,!0),U.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return ke(this._mapPane)||new B(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return _e([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),y=new ue(f.subtract(g),f.add(g)),k=this._getBoundsOffset(y,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(f.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ue(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=_e(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),y=f.max.subtract(r.max),k=this._rebound(g.x,-y.x),j=this._rebound(g.y,-y.y);return new B(k,j)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Sn,f=this._proxy.style[c];fn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();fn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mu(r,a){return new Te(r,a)}var Nt=We.extend({options:{position:"topright"},initialize:function(r){z(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Qi=function(r){return new Nt(r)};Te.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(g,y){var k=a+g+" "+a+y;r[g+y]=Pe("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mn=Nt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Nt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Zn(a),Gi(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),de(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Pe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),de(g,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){st(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zi(this._baseLayersList),Zi(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),de(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(f),y.appendChild(g);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(y=0;y<g.length;y++)this._map.hasLayer(g[y])&&this._map.removeLayer(g[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,de(r,"click",st),this.expand();var a=this;setTimeout(function(){De(r,"click",st),a._preventClick=!1})}}),gu=function(r,a,c){return new mn(r,a,c)},_a=Nt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var y=Pe("a",c,f);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),Zn(y),de(y,"click",rn),de(y,"click",g,this),de(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";$e(this._zoomInButton,a),$e(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _a,this.addControl(this.zoomControl))});var Wr=function(r){return new _a(r)},va=Nt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),ya=function(r){return new va(r)},Ns='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Os=Nt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Ns+" ":"")+"Leaflet</a>"},initialize:function(r){z(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Zn(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Os().addTo(this)});var Ms=function(r){return new Os(r)};Nt.Layers=mn,Nt.Zoom=_a,Nt.Scale=va,Nt.Attribution=Os,Qi.layers=gu,Qi.zoom=Wr,Qi.scale=ya,Qi.attribution=Ms;var gn=We.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(r,a){return r.addHandler(a,this),this};var _u={Events:Xe},Yi=se.touch?"touchstart mousedown":"mousedown",kn=ye.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){z(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(de(this._dragStartTarget,Yi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(kn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Yi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!aa(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){kn._dragging===this&&this.finishDrag();return}if(!(kn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(kn._dragging=this,this._preventOutline&&ca(this._element),Rs(),Hn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=An(this._element);this._startPoint=new B(a.clientX,a.clientY),this._startPos=ke(this._element),this._parentScale=bs(c);var f=r.type==="mousedown";de(document,f?"mousemove":"touchmove",this._onMove,this),de(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new B(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,st(r),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),qe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),la(),Cn();var a=this._moved&&this._moving;this._moving=!1,kn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function wa(r,a,c){var f,g=[1,4,2,8],y,k,j,U,Z,ee,le,Ee;for(y=0,ee=r.length;y<ee;y++)r[y]._code=et(r[y],a);for(j=0;j<4;j++){for(le=g[j],f=[],y=0,ee=r.length,k=ee-1;y<ee;k=y++)U=r[y],Z=r[k],U._code&le?Z._code&le||(Ee=gi(Z,U,le,a,c),Ee._code=et(Ee,a),f.push(Ee)):(Z._code&le&&(Ee=gi(Z,U,le,a,c),Ee._code=et(Ee,a),f.push(Ee)),f.push(U));r=f}return r}function Ds(r,a){var c,f,g,y,k,j,U,Z,ee;if(!r||r.length===0)throw new Error("latlngs not passed");ht(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var le=fe([0,0]),Ee=be(r),$t=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());$t<1700&&(le=$r(r));var vt=r.length,_n=[];for(c=0;c<vt;c++){var Kt=fe(r[c]);_n.push(a.project(fe([Kt.lat-le.lat,Kt.lng-le.lng])))}for(j=U=Z=0,c=0,f=vt-1;c<vt;f=c++)g=_n[c],y=_n[f],k=g.y*y.x-y.y*g.x,U+=(g.x+y.x)*k,Z+=(g.y+y.y)*k,j+=k*3;j===0?ee=_n[0]:ee=[U/j,Z/j];var Bs=a.unproject(X(ee));return fe([Bs.lat+le.lat,Bs.lng+le.lng])}function $r(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var y=fe(r[g]);a+=y.lat,c+=y.lng,f++}return fe([a/f,c/f])}var vu={__proto__:null,clipPolygon:wa,polygonCenter:Ds,centroid:$r};function Hr(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=wu(r,c),r=mi(r,c),r}function Ea(r,a,c){return Math.sqrt(Xi(r,a,c,!0))}function yu(r,a,c){return Xi(r,a,c)}function mi(r,a){var c=r.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,Vs(r,g,a,0,c-1);var y,k=[];for(y=0;y<c;y++)g[y]&&k.push(r[y]);return k}function Vs(r,a,c,f,g){var y=0,k,j,U;for(j=f+1;j<=g-1;j++)U=Xi(r[j],r[f],r[g],!0),U>y&&(k=j,y=U);y>c&&(a[k]=1,Vs(r,a,c,f,k),Vs(r,a,c,k,g))}function wu(r,a){for(var c=[r[0]],f=1,g=0,y=r.length;f<y;f++)Eu(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<y-1&&c.push(r[y-1]),c}var Ta;function Ia(r,a,c,f,g){var y=f?Ta:et(r,c),k=et(a,c),j,U,Z;for(Ta=k;;){if(!(y|k))return[r,a];if(y&k)return!1;j=y||k,U=gi(r,a,j,c,g),Z=et(U,c),j===y?(r=U,y=Z):(a=U,k=Z)}}function gi(r,a,c,f,g){var y=a.x-r.x,k=a.y-r.y,j=f.min,U=f.max,Z,ee;return c&8?(Z=r.x+y*(U.y-r.y)/k,ee=U.y):c&4?(Z=r.x+y*(j.y-r.y)/k,ee=j.y):c&2?(Z=U.x,ee=r.y+k*(U.x-r.x)/y):c&1&&(Z=j.x,ee=r.y+k*(j.x-r.x)/y),new B(Z,ee,g)}function et(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Eu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function Xi(r,a,c,f){var g=a.x,y=a.y,k=c.x-g,j=c.y-y,U=k*k+j*j,Z;return U>0&&(Z=((r.x-g)*k+(r.y-y)*j)/U,Z>1?(g=c.x,y=c.y):Z>0&&(g+=k*Z,y+=j*Z)),k=r.x-g,j=r.y-y,f?k*k+j*j:new B(g,y)}function ht(r){return!O(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function u(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ht(r)}function p(r,a){var c,f,g,y,k,j,U,Z;if(!r||r.length===0)throw new Error("latlngs not passed");ht(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=fe([0,0]),le=be(r),Ee=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());Ee<1700&&(ee=$r(r));var $t=r.length,vt=[];for(c=0;c<$t;c++){var _n=fe(r[c]);vt.push(a.project(fe([_n.lat-ee.lat,_n.lng-ee.lng])))}for(c=0,f=0;c<$t-1;c++)f+=vt[c].distanceTo(vt[c+1])/2;if(f===0)Z=vt[0];else for(c=0,y=0;c<$t-1;c++)if(k=vt[c],j=vt[c+1],g=k.distanceTo(j),y+=g,y>f){U=(y-f)/g,Z=[j.x-U*(j.x-k.x),j.y-U*(j.y-k.y)];break}var Kt=a.unproject(X(Z));return fe([Kt.lat+ee.lat,Kt.lng+ee.lng])}var _={__proto__:null,simplify:Hr,pointToSegmentDistance:Ea,closestPointOnSegment:yu,clipSegment:Ia,_getEdgeIntersection:gi,_getBitCode:et,_sqClosestPointOnSegment:Xi,isFlat:ht,_flat:u,polylineCenter:p},w={project:function(r){return new B(r.lng,r.lat)},unproject:function(r){return new we(r.y,r.x)},bounds:new ue([-180,-90],[180,90])},F={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,y=Math.sqrt(1-g*g),k=y*Math.sin(f),j=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),y/2);return f=-c*Math.log(Math.max(j,1e-10)),new B(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),y=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(y),j=0,U=.1,Z;j<15&&Math.abs(U)>1e-7;j++)Z=g*Math.sin(k),Z=Math.pow((1-Z)/(1+Z),g/2),U=Math.PI/2-2*Math.atan(y*Z)-k,k+=U;return new we(k*a,r.x*a/c)}},W={__proto__:null,LonLat:w,Mercator:F,SphericalMercator:Bi},J=s({},Un,{code:"EPSG:3395",projection:F,transformation:function(){var r=.5/(Math.PI*F.R);return si(r,.5,-r,.5)}()}),Ne=s({},Un,{code:"EPSG:4326",projection:w,transformation:si(1/180,1,-1/180,.5)}),dt=s({},it,{projection:w,transformation:si(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});it.Earth=Un,it.EPSG3395=J,it.EPSG3857=Or,it.EPSG900913=Uo,it.EPSG4326=Ne,it.Simple=dt;var pe=ye.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?O(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ze=pe.extend({initialize:function(r,a){z(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),_t=function(r,a){return new Ze(r,a)},Ot=Ze.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Ze.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Ze.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new xe;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),sn=function(r,a){return new Ot(r,a)},Rn=We.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){z(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),y=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return se.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function xa(r){return new Rn(r)}var Sa=Rn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Sa.imagePath!="string"&&(Sa.imagePath=this._detectIconPath()),(this.options.imagePath||Sa.imagePath)+Rn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var y=f.exec(c);return y&&y[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=qi(r,"background-image")||qi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),sg=gn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new kn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,y=ke(a._icon),k=c.getPixelBounds(),j=c.getPixelOrigin(),U=_e(k.min._subtract(j).add(g),k.max._subtract(j).subtract(g));if(!U.contains(y)){var Z=X((Math.max(U.max.x,y.x)-U.max.x)/(k.max.x-U.max.x)-(Math.min(U.min.x,y.x)-U.min.x)/(k.min.x-U.min.x),(Math.max(U.max.y,y.y)-U.max.y)/(k.max.y-U.max.y)-(Math.min(U.min.y,y.y)-U.min.y)/(k.min.y-U.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),qe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=M(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=ke(a._icon),g=a._map.layerPointToLatLng(f);c&&qe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Tu=pe.extend({options:{icon:new Sa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){z(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ve(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),y=!1;g!==this._shadow&&(this._removeShadow(),y=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&qe(this._icon,r),this._shadow&&qe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&rt(this._icon,r),this._shadow&&rt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function jT(r,a){return new Tu(r,a)}var Ji=pe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return z(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Iu=Ji.extend({options:{fill:!0,radius:10},initialize:function(r,a){z(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Ji.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ue(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function BT(r,a){return new Iu(r,a)}var Yh=Iu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),z(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Ji.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Un.distance){var g=Math.PI/180,y=this._mRadius/Un.R/g,k=c.project([a+y,r]),j=c.project([a-y,r]),U=k.add(j).divideBy(2),Z=c.unproject(U).lat,ee=Math.acos((Math.cos(y*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(ee)||ee===0)&&(ee=y/Math.cos(Math.PI/180*a)),this._point=U.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:U.x-c.project([Z,r-ee]).x,this._radiusY=U.y-k.y}else{var le=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(le).x}this._updateBounds()}});function UT(r,a,c){return new Yh(r,a,c)}var _i=Ji.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){z(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=Xi,g,y,k=0,j=this._parts.length;k<j;k++)for(var U=this._parts[k],Z=1,ee=U.length;Z<ee;Z++){g=U[Z-1],y=U[Z];var le=f(r,g,y,!0);le<a&&(a=le,c=f(r,g,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return p(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new xe,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return ht(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=ht(r),f=0,g=r.length;f<g;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new B(r,r);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof we,g=r.length,y,k;if(f){for(k=[],y=0;y<g;y++)k[y]=this._map.latLngToLayerPoint(r[y]),c.extend(k[y]);a.push(k)}else for(y=0;y<g;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,y,k,j,U;for(c=0,g=0,y=this._rings.length;c<y;c++)for(U=this._rings[c],f=0,k=U.length;f<k-1;f++)j=Ia(U[f],U[f+1],r,f,!0),j&&(a[g]=a[g]||[],a[g].push(j[0]),(j[1]!==U[f+1]||f===k-2)&&(a[g].push(j[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Hr(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,y,k,j,U=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(j=this._parts[c],f=0,k=j.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&Ea(r,j[g],j[f])<=U)return!0;return!1}});function WT(r,a){return new _i(r,a)}_i._flat=u;var zs=_i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ds(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=_i.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){_i.prototype._setLatLngs.call(this,r),ht(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ht(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new B(a,a);if(r=new ue(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,y;f<g;f++)y=wa(this._rings[f],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,y,k,j,U,Z;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,U=this._parts.length;y<U;y++)for(c=this._parts[y],k=0,Z=c.length,j=Z-1;k<Z;j=k++)f=c[k],g=c[j],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||_i.prototype._containsPoint.call(this,r,!0)}});function $T(r,a){return new zs(r,a)}var vi=Ot.extend({initialize:function(r,a){z(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=O(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var k=xu(r,y);return k?(k.feature=Cu(r),k.defaultOptions=k.options,this.resetStyle(k),y.onEachFeature&&y.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function xu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],y=a&&a.pointToLayer,k=a&&a.coordsToLatLng||Xh,j,U,Z,ee;if(!f&&!c)return null;switch(c.type){case"Point":return j=k(f),og(y,r,j,a);case"MultiPoint":for(Z=0,ee=f.length;Z<ee;Z++)j=k(f[Z]),g.push(og(y,r,j,a));return new Ot(g);case"LineString":case"MultiLineString":return U=Su(f,c.type==="LineString"?0:1,k),new _i(U,a);case"Polygon":case"MultiPolygon":return U=Su(f,c.type==="Polygon"?1:2,k),new zs(U,a);case"GeometryCollection":for(Z=0,ee=c.geometries.length;Z<ee;Z++){var le=xu({geometry:c.geometries[Z],type:"Feature",properties:r.properties},a);le&&g.push(le)}return new Ot(g);case"FeatureCollection":for(Z=0,ee=c.features.length;Z<ee;Z++){var Ee=xu(c.features[Z],a);Ee&&g.push(Ee)}return new Ot(g);default:throw new Error("Invalid GeoJSON object.")}}function og(r,a,c,f){return r?r(a,c):new Tu(c,f&&f.markersInheritOptions&&f)}function Xh(r){return new we(r[1],r[0],r[2])}function Su(r,a,c){for(var f=[],g=0,y=r.length,k;g<y;g++)k=a?Su(r[g],a-1,c):(c||Xh)(r[g]),f.push(k);return f}function Jh(r,a){return r=fe(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function Pu(r,a,c,f){for(var g=[],y=0,k=r.length;y<k;y++)g.push(a?Pu(r[y],ht(r[y])?0:a-1,c,f):Jh(r[y],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function Fs(r,a){return r.feature?s({},r.feature,{geometry:a}):Cu(a)}function Cu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var ed={toGeoJSON:function(r){return Fs(this,{type:"Point",coordinates:Jh(this.getLatLng(),r)})}};Tu.include(ed),Yh.include(ed),Iu.include(ed),_i.include({toGeoJSON:function(r){var a=!ht(this._latlngs),c=Pu(this._latlngs,a?1:0,!1,r);return Fs(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),zs.include({toGeoJSON:function(r){var a=!ht(this._latlngs),c=a&&!ht(this._latlngs[0]),f=Pu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),Fs(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ze.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Fs(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var y=g.toGeoJSON(r);if(c)f.push(y.geometry);else{var k=Cu(y);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?Fs(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function ag(r,a){return new vi(r,a)}var HT=ag,Au=pe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=be(a),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ci(this._image),this},bringToBack:function(){return this._map&&hi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=be(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;fn(this._image,c,a)},_reset:function(){var r=this._image,a=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();qe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){rt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),qT=function(r,a,c){return new Au(r,a,c)},lg=Au.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var k=Pe("source");k.src=this._url[y],a.appendChild(k)}}});function ZT(r,a,c){return new lg(r,a,c)}var ug=Au.extend({_initImage:function(){var r=this._image=this._url;ve(r,"leaflet-image-layer"),this._zoomAnimated&&ve(r,"leaflet-zoom-animated"),this.options.className&&ve(r,this.options.className),r.onselectstart=E,r.onmousemove=E}});function GT(r,a,c){return new ug(r,a,c)}var Gn=pe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof we||O(r))?(this._latlng=fe(r),z(this,a)):(z(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&rt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&rt(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(rt(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ci(this._container),this},bringToBack:function(){return this._map&&hi(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ot){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?qe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),pe.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(z(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var ku=Gn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Gn.prototype.openOn.call(this,r)},onAdd:function(r){Gn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ji||this._source.on("preclick",pi))},onRemove:function(r){Gn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ji||this._source.off("preclick",pi))},getEvents:function(){var r=Gn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),Zn(a),Gi(this._contentNode),de(a,"contextmenu",pi),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',de(f,"click",function(g){st(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,y="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(r,y)):$e(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();qe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(qi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new B(this._containerLeft,-c-this._containerBottom);g._add(ke(this._container));var y=r.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),j=X(this.options.autoPanPaddingTopLeft||k),U=X(this.options.autoPanPaddingBottomRight||k),Z=r.getSize(),ee=0,le=0;y.x+f+U.x>Z.x&&(ee=y.x+f-Z.x+U.x),y.x-ee-j.x<0&&(ee=y.x-j.x),y.y+c+U.y>Z.y&&(le=y.y+c-Z.y+U.y),y.y-le-j.y<0&&(le=y.y-j.y),(ee||le)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,le]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),KT=function(r,a){return new ku(r,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(r,a,c){return this._initOverlay(ku,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),pe.include({bindPopup:function(r,a){return this._popup=this._initOverlay(ku,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ot||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){rn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Ji)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ru=Gn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Gn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Gn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Gn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,y=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(r),j=this.options.direction,U=g.offsetWidth,Z=g.offsetHeight,ee=X(this.options.offset),le=this._getAnchor();j==="top"?(a=U/2,c=Z):j==="bottom"?(a=U/2,c=0):j==="center"?(a=U/2,c=Z/2):j==="right"?(a=0,c=Z/2):j==="left"?(a=U,c=Z/2):k.x<y.x?(j="right",a=0,c=Z/2):(j="left",a=U+(ee.x+le.x)*2,c=Z/2),r=r.subtract(X(a,c,!0)).add(ee).add(le),$e(g,"leaflet-tooltip-right"),$e(g,"leaflet-tooltip-left"),$e(g,"leaflet-tooltip-top"),$e(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+j),qe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&rt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),QT=function(r,a){return new Ru(r,a)};Te.include({openTooltip:function(r,a,c){return this._initOverlay(Ru,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),pe.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ru,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ot||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(de(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),de(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var cg=Rn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Zi(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function YT(r){return new cg(r)}Rn.Default=Sa;var Pa=pe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){z(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(hi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof B?r:new B(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,y;f<g;f++)y=a[f].style.zIndex,a[f]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){rt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var y=Math.min(1,(r-g.loaded)/200);rt(g.el,y),y<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),E(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),y=Math.floor(a/2),k=c-1,j=new B(+g,+y);j.z=+k;var U=this._tileCoordsToKey(j),Z=this._tiles[U];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),k>f?this._retainParent(g,y,k,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var y=2*a;y<2*a+2;y++){var k=new B(g,y);k.z=c+1;var j=this._tileCoordsToKey(k),U=this._tiles[j];if(U&&U.active){U.retain=!0;continue}else U&&U.loaded&&(U.retain=!0);c+1<f&&this._retainChildren(g,y,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var y=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||y)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?fn(r.el,g,f):qe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(f*2);return new ue(g.subtract(y),g.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),y=g.getCenter(),k=[],j=this.options.keepBuffer,U=new ue(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var ee=this._tiles[Z].coords;(ee.z!==this._tileZoom||!U.contains(new B(ee.x,ee.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var le=g.min.y;le<=g.max.y;le++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var $t=new B(Ee,le);if($t.z=this._tileZoom,!!this._isValidTile($t)){var vt=this._tiles[this._tileCoordsToKey($t)];vt?vt.current=!0:k.push($t)}}if(k.sort(function(Kt,Bs){return Kt.distanceTo(y)-Bs.distanceTo(y)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(Ee=0;Ee<k.length;Ee++)this._addTile(k[Ee],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return be(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),y=a.unproject(f,r.z),k=a.unproject(g,r.z);return[y,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new xe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new B(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ve(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=E,r.onmousemove=E,se.ielt9&&this.options.opacity<1&&rt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&M(l(this._tileReady,this,r,null,g)),qe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(rt(c.el,0),V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new B(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ue(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function XT(r){return new Pa(r)}var js=Pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=z(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return de(c,"load",l(this._tileOnLoad,this,a,c)),de(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:se.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return S(this._url,s(a,this.options))},_tileOnLoad:function(r,a){se.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=E,a.onerror=E,!a.complete)){a.src=Y;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),Pa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Pa.prototype._tileReady.call(this,r,a,c)}});function hg(r,a){return new js(r,a)}var dg=js.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=z(this,a);var g=a.detectRetina&&se.retina?2:1,y=this.getTileSize();c.width=y.x*g,c.height=y.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,js.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=_e(c.project(a[0]),c.project(a[1])),g=f.min,y=f.max,k=(this._wmsVersion>=1.3&&this._crs===Ne?[g.y,g.x,y.y,y.x]:[g.x,g.y,y.x,y.y]).join(","),j=js.prototype.getTileUrl.call(this,r);return j+$(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function JT(r,a){return new dg(r,a)}js.WMS=dg,hg.wms=JT;var yi=pe.extend({options:{padding:.1},initialize:function(r){z(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),y=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));se.any3d?fn(this._container,y,c):qe(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ue(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fg=yi.extend({options:{tolerance:0},getEvents:function(){var r=yi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");de(r,"mousemove",this._onMouseMove,this),de(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,Ve(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=se.retina?2:1;qe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,y,k=r._parts,j=k.length,U=this._ctx;if(j){for(U.beginPath(),c=0;c<j;c++){for(f=0,g=k[c].length;f<g;f++)y=k[c][f],U[f?"lineTo":"moveTo"](y.x,y.y);a&&U.closePath()}this._fillStroke(U,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&($e(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function pg(r){return se.canvas?new fg(r):null}var Ca=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),e1={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ca("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ca("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Ca("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=O(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Ca("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){ci(r._container)},_bringToBack:function(r){hi(r._container)}},Lu=se.vml?Ca:ws,Aa=yi.extend({_initContainer:function(){this._container=Lu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Lu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),qe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Lu("path");r.options.className&&ve(a,r.options.className),r.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Wo(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){ci(r._path)},_bringToBack:function(r){hi(r._path)}});se.vml&&Aa.include(e1);function mg(r){return se.svg||se.vml?new Aa(r):null}Te.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&pg(r)||mg(r)}});var gg=zs.extend({initialize:function(r,a){zs.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=be(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function t1(r,a){return new gg(r,a)}Aa.create=Lu,Aa.pointsToPath=Wo,vi.geometryToLayer=xu,vi.coordsToLatLng=Xh,vi.coordsToLatLngs=Su,vi.latLngToCoords=Jh,vi.latLngsToCoords=Pu,vi.getFeature=Fs,vi.asFeature=Cu,Te.mergeOptions({boxZoom:!0});var _g=gn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Rs(),this._startPoint=this._map.mouseEventToContainerPoint(r),de(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ue(this._point,this._startPoint),c=a.getSize();qe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),$e(this._container,"leaflet-crosshair")),Cn(),la(),De(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",_g),Te.mergeOptions({doubleClickZoom:!0});var vg=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",vg),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yg=gn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new kn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=be(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,y=(f+a+c)%r-a-c,k=Math.abs(g+c)<Math.abs(y+c)?g:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,j=g.multiplyBy(k/y),U=j.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,U),ee=j.multiplyBy(Z/U),le=Z/(c.inertiaDeceleration*k),Ee=ee.multiplyBy(-le/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),M(function(){a.panBy(Ee,{duration:le,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",yg),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wg=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),de(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;rn(r)}}});Te.addInitHook("addHandler","keyboard",wg),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Eg=gn.extend({addHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Fe(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),rn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=c?Math.ceil(g/c)*c:g,k=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});Te.addInitHook("addHandler","scrollWheelZoom",Eg);var n1=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Tg=gn.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new B(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(de(document,"touchend",st),de(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),n1),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",st),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new B(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",Tg),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Ig=gn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),st(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var y=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(k,this,!0),st(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",Ig),Te.BoxZoom=_g,Te.DoubleClickZoom=vg,Te.Drag=yg,Te.Keyboard=wg,Te.ScrollWheelZoom=Eg,Te.TapHold=Tg,Te.TouchZoom=Ig,n.Bounds=ue,n.Browser=se,n.CRS=it,n.Canvas=fg,n.Circle=Yh,n.CircleMarker=Iu,n.Class=We,n.Control=Nt,n.DivIcon=cg,n.DivOverlay=Gn,n.DomEvent=Qh,n.DomUtil=fu,n.Draggable=kn,n.Evented=ye,n.FeatureGroup=Ot,n.GeoJSON=vi,n.GridLayer=Pa,n.Handler=gn,n.Icon=Rn,n.ImageOverlay=Au,n.LatLng=we,n.LatLngBounds=xe,n.Layer=pe,n.LayerGroup=Ze,n.LineUtil=_,n.Map=Te,n.Marker=Tu,n.Mixin=_u,n.Path=Ji,n.Point=B,n.PolyUtil=vu,n.Polygon=zs,n.Polyline=_i,n.Popup=ku,n.PosAnimation=ga,n.Projection=W,n.Rectangle=gg,n.Renderer=yi,n.SVG=Aa,n.SVGOverlay=ug,n.TileLayer=js,n.Tooltip=Ru,n.Transformation=Ui,n.Util=R,n.VideoOverlay=lg,n.bind=l,n.bounds=_e,n.canvas=pg,n.circle=UT,n.circleMarker=BT,n.control=Qi,n.divIcon=YT,n.extend=s,n.featureGroup=sn,n.geoJSON=ag,n.geoJson=HT,n.gridLayer=XT,n.icon=xa,n.imageOverlay=qT,n.latLng=fe,n.latLngBounds=be,n.layerGroup=_t,n.map=mu,n.marker=jT,n.point=X,n.polygon=$T,n.polyline=WT,n.popup=KT,n.rectangle=t1,n.setOptions=z,n.stamp=d,n.svg=mg,n.svgOverlay=GT,n.tileLayer=hg,n.tooltip=QT,n.transformation=si,n.version=i,n.videoOverlay=ZT;var i1=window.L;n.noConflict=function(){return window.L=i1,this},window.L=n})})(Vf,Vf.exports);var Fl=Vf.exports;const am=ty(Fl);function lm(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function um(t,e){return e==null?function(i,s){const o=re.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=re.useRef();o.current||(o.current=t(i,s));const l=re.useRef(i),{instance:h}=o.current;return re.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function Hx(t,e){re.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function yw(t){return function(n){const i=sm(),s=t(om(n,i),i);return mw(i.map,n.attribution),vw(s.current,n.eventHandlers),Hx(s.current,i),s}}function qx(t,e){const n=um(t,e),i=yw(n);return Bx(i)}function Zx(t,e){const n=um(t),i=$x(n,e);return Ux(i)}function Gx(t,e){const n=um(t,e),i=yw(n);return Wx(i)}function Kx(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Qx(){return sm().map}function zf(){return zf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zf.apply(this,arguments)}function Yx({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:m,...v},E){const[T]=re.useState({className:s,id:o,style:h}),[N,D]=re.useState(null);re.useImperativeHandle(E,()=>(N==null?void 0:N.map)??null,[N]);const z=re.useCallback(b=>{if(b!==null&&N===null){const S=new Fl.Map(b,v);n!=null&&m!=null?S.setView(n,m):t!=null&&S.fitBounds(t,e),d!=null&&S.whenReady(d),D(Fx(S))}},[]);re.useEffect(()=>()=>{N==null||N.map.remove()},[N]);const $=N?ol.createElement(_w,{value:N},i):l??null;return ol.createElement("div",zf({},T,{ref:z}),$)}const Xx=re.forwardRef(Yx),D_=qx(function({position:e,...n},i){const s=new Fl.Marker(e,n);return lm(s,jx(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Jx=Zx(function(e,n){const i=new Fl.Popup(e,n.overlayContainer);return lm(i,n)},function(e,n,{position:i},s){re.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function d(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),eS=Gx(function({url:e,...n},i){const s=new Fl.TileLayer(e,om(n,i));return lm(s,i)},function(e,n,i){Kx(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});delete am.Icon.Default.prototype._getIconUrl;am.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const tS=({center:t})=>{const e=Qx();return re.useEffect(()=>{t&&e.setView(t)},[t,e]),null};function V_({center:t,vehicles:e,selectedVehicle:n,onVehicleSelect:i}){const s=new am.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/3097/3097180.png",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});return x.jsxs(Xx,{center:t,zoom:15,scrollWheelZoom:!0,zoomControl:!1,style:{height:"100%",width:"100%"},children:[x.jsx(eS,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.jsx(tS,{center:t}),e.map(o=>x.jsx(D_,{position:[o.lat,o.lng],icon:s,eventHandlers:{click:()=>i(o)}},o.id)),x.jsx(D_,{position:t,children:x.jsx(Jx,{children:"You are here"})})]})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nS=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,N=m&63;d||(N=64,l||(T=64)),i.push(n[v],n[E],n[T],n[N])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ww(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||E==null)throw new iS;const T=o<<2|h>>4;if(i.push(T),m!==64){const N=h<<4&240|m>>2;if(i.push(N),E!==64){const D=m<<6&192|E;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rS=function(t){const e=ww(t);return Ew.encodeByteArray(e,!0)},Zc=function(t){return rS(t).replace(/\./g,"")},Tw=function(t){try{return Ew.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=()=>sS().__FIREBASE_DEFAULTS__,aS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tw(t[1]);return e&&JSON.parse(e)},xh=()=>{try{return oS()||aS()||lS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Iw=t=>{var e,n;return(n=(e=xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uS=t=>{const e=Iw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xw=()=>{var t;return(t=xh())===null||t===void 0?void 0:t.config},Sw=t=>{var e;return(e=xh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),h="";return[Zc(JSON.stringify(n)),Zc(JSON.stringify(l)),h].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function fS(){var t;const e=(t=xh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _S(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vS(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yS(){try{return typeof indexedDB=="object"}catch{return!1}}function wS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ES,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jl.prototype.create)}}class jl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?TS(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ji(s,h,i)}}function TS(t,e){return t.replace(IS,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const IS=/\{\$([^}]+)}/g;function xS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(z_(o)&&z_(l)){if(!Gc(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function z_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function SS(t,e){const n=new PS(t,e);return n.subscribe.bind(n)}class PS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");CS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ad),s.error===void 0&&(s.error=Ad),s.complete===void 0&&(s.complete=Ad);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new cS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RS(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kS(t){return t===Gr?void 0:t}function RS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const bS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},NS=Ce.INFO,OS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},MS=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=OS[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=NS,this._logHandler=MS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const DS=(t,e)=>e.some(n=>t instanceof n);let F_,j_;function VS(){return F_||(F_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zS(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,Ff=new WeakMap,Cw=new WeakMap,kd=new WeakMap,hm=new WeakMap;function FS(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(wr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Pw.set(n,t)}).catch(()=>{}),hm.set(e,t),e}function jS(t){if(Ff.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ff.set(t,e)}let jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ff.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BS(t){jf=t(jf)}function US(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rd(this),e,...n);return Cw.set(i,e.sort?e.sort():[e]),wr(i)}:zS().includes(t)?function(...e){return t.apply(Rd(this),e),wr(Pw.get(this))}:function(...e){return wr(t.apply(Rd(this),e))}}function WS(t){return typeof t=="function"?US(t):(t instanceof IDBTransaction&&jS(t),DS(t,VS())?new Proxy(t,jf):t)}function wr(t){if(t instanceof IDBRequest)return FS(t);if(kd.has(t))return kd.get(t);const e=WS(t);return e!==t&&(kd.set(t,e),hm.set(e,t)),e}const Rd=t=>hm.get(t);function $S(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=wr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(wr(l.result),d.oldVersion,d.newVersion,wr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const HS=["get","getKey","getAll","getAllKeys","count"],qS=["put","add","delete","clear"],Ld=new Map;function B_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=qS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HS.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Ld.set(e,o),o}BS(t=>({...t,get:(e,n,i)=>B_(e,n)||t.get(e,n,i),has:(e,n)=>!!B_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function GS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bf="@firebase/app",U_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new cm("@firebase/app"),KS="@firebase/app-compat",QS="@firebase/analytics-compat",YS="@firebase/analytics",XS="@firebase/app-check-compat",JS="@firebase/app-check",eP="@firebase/auth",tP="@firebase/auth-compat",nP="@firebase/database",iP="@firebase/data-connect",rP="@firebase/database-compat",sP="@firebase/functions",oP="@firebase/functions-compat",aP="@firebase/installations",lP="@firebase/installations-compat",uP="@firebase/messaging",cP="@firebase/messaging-compat",hP="@firebase/performance",dP="@firebase/performance-compat",fP="@firebase/remote-config",pP="@firebase/remote-config-compat",mP="@firebase/storage",gP="@firebase/storage-compat",_P="@firebase/firestore",vP="@firebase/vertexai-preview",yP="@firebase/firestore-compat",wP="firebase",EP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]",TP={[Bf]:"fire-core",[KS]:"fire-core-compat",[YS]:"fire-analytics",[QS]:"fire-analytics-compat",[JS]:"fire-app-check",[XS]:"fire-app-check-compat",[eP]:"fire-auth",[tP]:"fire-auth-compat",[nP]:"fire-rtdb",[iP]:"fire-data-connect",[rP]:"fire-rtdb-compat",[sP]:"fire-fn",[oP]:"fire-fn-compat",[aP]:"fire-iid",[lP]:"fire-iid-compat",[uP]:"fire-fcm",[cP]:"fire-fcm-compat",[hP]:"fire-perf",[dP]:"fire-perf-compat",[fP]:"fire-rc",[pP]:"fire-rc-compat",[mP]:"fire-gcs",[gP]:"fire-gcs-compat",[_P]:"fire-fst",[yP]:"fire-fst-compat",[vP]:"fire-vertex","fire-js":"fire-js",[wP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,IP=new Map,Wf=new Map;function W_(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Io(t){const e=t.name;if(Wf.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,t);for(const n of Kc.values())W_(n,t);for(const n of IP.values())W_(n,t);return!0}function dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new jl("app","Firebase",xP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=EP;function Aw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Uf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=xw()),!n)throw Er.create("no-options");const o=Kc.get(s);if(o){if(Gc(n,o.options)&&Gc(i,o.config))return o;throw Er.create("duplicate-app",{appName:s})}const l=new LS(s);for(const d of Wf.values())l.addComponent(d);const h=new SP(n,i,l);return Kc.set(s,h),h}function kw(t=Uf){const e=Kc.get(t);if(!e&&t===Uf&&xw())return Aw();if(!e)throw Er.create("no-app",{appName:t});return e}function Tr(t,e,n){var i;let s=(i=TP[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(h.join(" "));return}Io(new us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="firebase-heartbeat-database",CP=1,xl="firebase-heartbeat-store";let bd=null;function Rw(){return bd||(bd=$S(PP,CP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),bd}async function AP(t){try{const n=(await Rw()).transaction(xl),i=await n.objectStore(xl).get(Lw(t));return await n.done,i}catch(e){if(e instanceof ji)Oi.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function $_(t,e){try{const i=(await Rw()).transaction(xl,"readwrite");await i.objectStore(xl).put(e,Lw(t)),await i.done}catch(n){if(n instanceof ji)Oi.warn(n.message);else{const i=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(i.message)}}}function Lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=1024,RP=30*24*60*60*1e3;class LP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=H_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=RP}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Oi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=H_(),{heartbeatsToSend:i,unsentEntries:s}=bP(this._heartbeatsCache.heartbeats),o=Zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Oi.warn(n),""}}}function H_(){return new Date().toISOString().substring(0,10)}function bP(t,e=kP){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),q_(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),q_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class NP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yS()?wS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function q_(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){Io(new us("platform-logger",e=>new ZS(e),"PRIVATE")),Io(new us("heartbeat",e=>new LP(e),"PRIVATE")),Tr(Bf,U_,t),Tr(Bf,U_,"esm2017"),Tr("fire-js","")}OP("");var MP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(MP,DP,"app");var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function P(){}P.prototype=I.prototype,C.D=I.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(A,M,V){for(var R=Array(arguments.length-2),We=2;We<arguments.length;We++)R[We-2]=arguments[We];return I.prototype[M].apply(A,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,P){P||(P=0);var A=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)A[M]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(M=0;16>M;++M)A[M]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=C.g[0],P=C.g[1],M=C.g[2];var V=C.g[3],R=I+(V^P&(M^V))+A[0]+3614090360&4294967295;I=P+(R<<7&4294967295|R>>>25),R=V+(M^I&(P^M))+A[1]+3905402710&4294967295,V=I+(R<<12&4294967295|R>>>20),R=M+(P^V&(I^P))+A[2]+606105819&4294967295,M=V+(R<<17&4294967295|R>>>15),R=P+(I^M&(V^I))+A[3]+3250441966&4294967295,P=M+(R<<22&4294967295|R>>>10),R=I+(V^P&(M^V))+A[4]+4118548399&4294967295,I=P+(R<<7&4294967295|R>>>25),R=V+(M^I&(P^M))+A[5]+1200080426&4294967295,V=I+(R<<12&4294967295|R>>>20),R=M+(P^V&(I^P))+A[6]+2821735955&4294967295,M=V+(R<<17&4294967295|R>>>15),R=P+(I^M&(V^I))+A[7]+4249261313&4294967295,P=M+(R<<22&4294967295|R>>>10),R=I+(V^P&(M^V))+A[8]+1770035416&4294967295,I=P+(R<<7&4294967295|R>>>25),R=V+(M^I&(P^M))+A[9]+2336552879&4294967295,V=I+(R<<12&4294967295|R>>>20),R=M+(P^V&(I^P))+A[10]+4294925233&4294967295,M=V+(R<<17&4294967295|R>>>15),R=P+(I^M&(V^I))+A[11]+2304563134&4294967295,P=M+(R<<22&4294967295|R>>>10),R=I+(V^P&(M^V))+A[12]+1804603682&4294967295,I=P+(R<<7&4294967295|R>>>25),R=V+(M^I&(P^M))+A[13]+4254626195&4294967295,V=I+(R<<12&4294967295|R>>>20),R=M+(P^V&(I^P))+A[14]+2792965006&4294967295,M=V+(R<<17&4294967295|R>>>15),R=P+(I^M&(V^I))+A[15]+1236535329&4294967295,P=M+(R<<22&4294967295|R>>>10),R=I+(M^V&(P^M))+A[1]+4129170786&4294967295,I=P+(R<<5&4294967295|R>>>27),R=V+(P^M&(I^P))+A[6]+3225465664&4294967295,V=I+(R<<9&4294967295|R>>>23),R=M+(I^P&(V^I))+A[11]+643717713&4294967295,M=V+(R<<14&4294967295|R>>>18),R=P+(V^I&(M^V))+A[0]+3921069994&4294967295,P=M+(R<<20&4294967295|R>>>12),R=I+(M^V&(P^M))+A[5]+3593408605&4294967295,I=P+(R<<5&4294967295|R>>>27),R=V+(P^M&(I^P))+A[10]+38016083&4294967295,V=I+(R<<9&4294967295|R>>>23),R=M+(I^P&(V^I))+A[15]+3634488961&4294967295,M=V+(R<<14&4294967295|R>>>18),R=P+(V^I&(M^V))+A[4]+3889429448&4294967295,P=M+(R<<20&4294967295|R>>>12),R=I+(M^V&(P^M))+A[9]+568446438&4294967295,I=P+(R<<5&4294967295|R>>>27),R=V+(P^M&(I^P))+A[14]+3275163606&4294967295,V=I+(R<<9&4294967295|R>>>23),R=M+(I^P&(V^I))+A[3]+4107603335&4294967295,M=V+(R<<14&4294967295|R>>>18),R=P+(V^I&(M^V))+A[8]+1163531501&4294967295,P=M+(R<<20&4294967295|R>>>12),R=I+(M^V&(P^M))+A[13]+2850285829&4294967295,I=P+(R<<5&4294967295|R>>>27),R=V+(P^M&(I^P))+A[2]+4243563512&4294967295,V=I+(R<<9&4294967295|R>>>23),R=M+(I^P&(V^I))+A[7]+1735328473&4294967295,M=V+(R<<14&4294967295|R>>>18),R=P+(V^I&(M^V))+A[12]+2368359562&4294967295,P=M+(R<<20&4294967295|R>>>12),R=I+(P^M^V)+A[5]+4294588738&4294967295,I=P+(R<<4&4294967295|R>>>28),R=V+(I^P^M)+A[8]+2272392833&4294967295,V=I+(R<<11&4294967295|R>>>21),R=M+(V^I^P)+A[11]+1839030562&4294967295,M=V+(R<<16&4294967295|R>>>16),R=P+(M^V^I)+A[14]+4259657740&4294967295,P=M+(R<<23&4294967295|R>>>9),R=I+(P^M^V)+A[1]+2763975236&4294967295,I=P+(R<<4&4294967295|R>>>28),R=V+(I^P^M)+A[4]+1272893353&4294967295,V=I+(R<<11&4294967295|R>>>21),R=M+(V^I^P)+A[7]+4139469664&4294967295,M=V+(R<<16&4294967295|R>>>16),R=P+(M^V^I)+A[10]+3200236656&4294967295,P=M+(R<<23&4294967295|R>>>9),R=I+(P^M^V)+A[13]+681279174&4294967295,I=P+(R<<4&4294967295|R>>>28),R=V+(I^P^M)+A[0]+3936430074&4294967295,V=I+(R<<11&4294967295|R>>>21),R=M+(V^I^P)+A[3]+3572445317&4294967295,M=V+(R<<16&4294967295|R>>>16),R=P+(M^V^I)+A[6]+76029189&4294967295,P=M+(R<<23&4294967295|R>>>9),R=I+(P^M^V)+A[9]+3654602809&4294967295,I=P+(R<<4&4294967295|R>>>28),R=V+(I^P^M)+A[12]+3873151461&4294967295,V=I+(R<<11&4294967295|R>>>21),R=M+(V^I^P)+A[15]+530742520&4294967295,M=V+(R<<16&4294967295|R>>>16),R=P+(M^V^I)+A[2]+3299628645&4294967295,P=M+(R<<23&4294967295|R>>>9),R=I+(M^(P|~V))+A[0]+4096336452&4294967295,I=P+(R<<6&4294967295|R>>>26),R=V+(P^(I|~M))+A[7]+1126891415&4294967295,V=I+(R<<10&4294967295|R>>>22),R=M+(I^(V|~P))+A[14]+2878612391&4294967295,M=V+(R<<15&4294967295|R>>>17),R=P+(V^(M|~I))+A[5]+4237533241&4294967295,P=M+(R<<21&4294967295|R>>>11),R=I+(M^(P|~V))+A[12]+1700485571&4294967295,I=P+(R<<6&4294967295|R>>>26),R=V+(P^(I|~M))+A[3]+2399980690&4294967295,V=I+(R<<10&4294967295|R>>>22),R=M+(I^(V|~P))+A[10]+4293915773&4294967295,M=V+(R<<15&4294967295|R>>>17),R=P+(V^(M|~I))+A[1]+2240044497&4294967295,P=M+(R<<21&4294967295|R>>>11),R=I+(M^(P|~V))+A[8]+1873313359&4294967295,I=P+(R<<6&4294967295|R>>>26),R=V+(P^(I|~M))+A[15]+4264355552&4294967295,V=I+(R<<10&4294967295|R>>>22),R=M+(I^(V|~P))+A[6]+2734768916&4294967295,M=V+(R<<15&4294967295|R>>>17),R=P+(V^(M|~I))+A[13]+1309151649&4294967295,P=M+(R<<21&4294967295|R>>>11),R=I+(M^(P|~V))+A[4]+4149444226&4294967295,I=P+(R<<6&4294967295|R>>>26),R=V+(P^(I|~M))+A[11]+3174756917&4294967295,V=I+(R<<10&4294967295|R>>>22),R=M+(I^(V|~P))+A[2]+718787259&4294967295,M=V+(R<<15&4294967295|R>>>17),R=P+(V^(M|~I))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var P=I-this.blockSize,A=this.B,M=this.h,V=0;V<I;){if(M==0)for(;V<=P;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<I;)if(A[M++]=C.charCodeAt(V++),M==this.blockSize){s(this,A),M=0;break}}else for(;V<I;)if(A[M++]=C[V++],M==this.blockSize){s(this,A),M=0;break}}this.h=M,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var P=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=P&255,P/=256;for(this.u(C),C=Array(16),I=P=0;4>I;++I)for(var A=0;32>A;A+=8)C[P++]=this.g[I]>>>A&255;return C};function o(C,I){var P=h;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=I(C)}function l(C,I){this.h=I;for(var P=[],A=!0,M=C.length-1;0<=M;M--){var V=C[M]|0;A&&V==I||(P[M]=V,A=!1)}this.g=P}var h={};function d(C){return-128<=C&&128>C?o(C,function(I){return new l([I|0],0>I?-1:0)}):new l([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return E;if(0>C)return $(m(-C));for(var I=[],P=1,A=0;C>=P;A++)I[A]=C/P|0,P*=4294967296;return new l(I,0)}function v(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return $(v(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(I,8)),A=E,M=0;M<C.length;M+=8){var V=Math.min(8,C.length-M),R=parseInt(C.substring(M,M+V),I);8>V?(V=m(Math.pow(I,V)),A=A.j(V).add(m(R))):(A=A.j(P),A=A.add(m(R)))}return A}var E=d(0),T=d(1),N=d(16777216);t=l.prototype,t.m=function(){if(z(this))return-$(this).m();for(var C=0,I=1,P=0;P<this.g.length;P++){var A=this.i(P);C+=(0<=A?A:4294967296+A)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(z(this))return"-"+$(this).toString(C);for(var I=m(Math.pow(C,6)),P=this,A="";;){var M=H(P,I).g;P=b(P,M.j(I));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=M,D(P))return V+A;for(;6>V.length;)V="0"+V;A=V+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function z(C){return C.h==-1}t.l=function(C){return C=b(this,C),z(C)?-1:D(C)?0:1};function $(C){for(var I=C.g.length,P=[],A=0;A<I;A++)P[A]=~C.g[A];return new l(P,~C.h).add(T)}t.abs=function(){return z(this)?$(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],A=0,M=0;M<=I;M++){var V=A+(this.i(M)&65535)+(C.i(M)&65535),R=(V>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);A=R>>>16,V&=65535,R&=65535,P[M]=R<<16|V}return new l(P,P[P.length-1]&-2147483648?-1:0)};function b(C,I){return C.add($(I))}t.j=function(C){if(D(this)||D(C))return E;if(z(this))return z(C)?$(this).j($(C)):$($(this).j(C));if(z(C))return $(this.j($(C)));if(0>this.l(N)&&0>C.l(N))return m(this.m()*C.m());for(var I=this.g.length+C.g.length,P=[],A=0;A<2*I;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<C.g.length;M++){var V=this.i(A)>>>16,R=this.i(A)&65535,We=C.i(M)>>>16,xn=C.i(M)&65535;P[2*A+2*M]+=R*xn,S(P,2*A+2*M),P[2*A+2*M+1]+=V*xn,S(P,2*A+2*M+1),P[2*A+2*M+1]+=R*We,S(P,2*A+2*M+1),P[2*A+2*M+2]+=V*We,S(P,2*A+2*M+2)}for(A=0;A<I;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=I;A<2*I;A++)P[A]=0;return new l(P,0)};function S(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function O(C,I){this.g=C,this.h=I}function H(C,I){if(D(I))throw Error("division by zero");if(D(C))return new O(E,E);if(z(C))return I=H($(C),I),new O($(I.g),$(I.h));if(z(I))return I=H(C,$(I)),new O($(I.g),I.h);if(30<C.g.length){if(z(C)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var P=T,A=I;0>=A.l(C);)P=Y(P),A=Y(A);var M=Q(P,1),V=Q(A,1);for(A=Q(A,2),P=Q(P,2);!D(A);){var R=V.add(A);0>=R.l(C)&&(M=M.add(P),V=R),A=Q(A,1),P=Q(P,1)}return I=b(C,M.j(I)),new O(M,I)}for(M=E;0<=C.l(I);){for(P=Math.max(1,Math.floor(C.m()/I.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),V=m(P),R=V.j(I);z(R)||0<R.l(C);)P-=A,V=m(P),R=V.j(I);D(V)&&(V=T),M=M.add(V),C=b(C,R)}return new O(M,C)}t.A=function(C){return H(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)&C.i(A);return new l(P,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)|C.i(A);return new l(P,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)^C.i(A);return new l(P,this.h^C.h)};function Y(C){for(var I=C.g.length+1,P=[],A=0;A<I;A++)P[A]=C.i(A)<<1|C.i(A-1)>>>31;return new l(P,C.h)}function Q(C,I){var P=I>>5;I%=32;for(var A=C.g.length-P,M=[],V=0;V<A;V++)M[V]=0<I?C.i(V+P)>>>I|C.i(V+P+1)<<32-I:C.i(V+P);return new l(M,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,bw=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,ns=l}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nw,Ua,Ow,pc,$f,Mw,Dw,Vw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qu=="object"&&Qu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in _))break e;_=_[F]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,w=!1,F={next:function(){if(!w&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function T(u,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,T.apply(null,arguments)}function N(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function D(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,F,W){for(var J=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)J[Ne-2]=arguments[Ne];return p.prototype[F].apply(w,J)}}function z(u){const p=u.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function $(u,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(d(w)){const F=u.length||0,W=w.length||0;u.length=F+W;for(let J=0;J<W;J++)u[F+J]=w[J]}else u.push(w)}}class b{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var Y=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Q(u,p,_){for(const w in u)p.call(_,u[w],w,u)}function C(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function I(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let _,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(_ in w)u[_]=w[_];for(let W=0;W<P.length;W++)_=P[W],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function M(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function V(u){h.setTimeout(()=>{throw u},0)}function R(){var u=ae;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class We{constructor(){this.h=this.g=null}add(p,_){const w=xn.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var xn=new b(()=>new Xe,u=>u.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,B=!1,ae=new We,X=()=>{const u=h.Promise.resolve(void 0);ye=()=>{u.then(ue)}};var ue=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){V(_)}var p=xn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function we(u,p){if(xe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Y){e:{try{H(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}D(we,xe);var fe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Un=0;function Xl(u,p,_,w,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=F,this.key=++Un,this.da=this.fa=!1}function Bi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ui(u){this.src=u,this.g={},this.h=0}Ui.prototype.add=function(u,p,_,w,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var J=Or(u,p,w,F);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new Xl(p,this.src,W,!!w,F),p.fa=_,u.push(p)),p};function si(u,p){var _=p.type;if(_ in u.g){var w=u.g[_],F=Array.prototype.indexOf.call(w,p,void 0),W;(W=0<=F)&&Array.prototype.splice.call(w,F,1),W&&(Bi(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Or(u,p,_,w){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==w)return F}return-1}var Uo="closure_lm_"+(1e6*Math.random()|0),ws={};function Wo(u,p,_,w,F){if(w&&w.once)return Jl(u,p,_,w,F);if(Array.isArray(p)){for(var W=0;W<p.length;W++)Wo(u,p[W],_,w,F);return null}return _=Dr(_),u&&u[it]?u.K(p,_,m(w)?!!w.capture:!!w,F):Es(u,p,_,!1,w,F)}function Es(u,p,_,w,F,W){if(!p)throw Error("Invalid event type");var J=m(F)?!!F.capture:!!F,Ne=qo(u);if(Ne||(u[Uo]=Ne=new Ui(u)),_=Ne.add(p,_,w,J,W),_.proxy)return _;if(w=Ts(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)be||(F=J),F===void 0&&(F=!1),u.addEventListener(p.toString(),w,F);else if(u.attachEvent)u.attachEvent(Ho(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ts(){function u(_){return p.call(u.src,u.listener,_)}const p=eu;return u}function Jl(u,p,_,w,F){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Jl(u,p[W],_,w,F);return null}return _=Dr(_),u&&u[it]?u.L(p,_,m(w)?!!w.capture:!!w,F):Es(u,p,_,!0,w,F)}function $o(u,p,_,w,F){if(Array.isArray(p))for(var W=0;W<p.length;W++)$o(u,p[W],_,w,F);else w=m(w)?!!w.capture:!!w,_=Dr(_),u&&u[it]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=Or(W,_,w,F),-1<_&&(Bi(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=qo(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Or(p,_,w,F)),(_=-1<u?p[u]:null)&&Mr(_))}function Mr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[it])si(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(Ho(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=qo(p))?(si(_,u),_.h==0&&(_.src=null,p[Uo]=null)):Bi(u)}}}function Ho(u){return u in ws?ws[u]:ws[u]="on"+u}function eu(u,p){if(u.da)u=!0;else{p=new we(p,this);var _=u.listener,w=u.ha||u.src;u.fa&&Mr(u),u=_.call(w,p)}return u}function qo(u){return u=u[Uo],u instanceof Ui?u:null}var Zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(u){return typeof u=="function"?u:(u[Zo]||(u[Zo]=function(p){return u.handleEvent(p)}),u[Zo])}function ct(){_e.call(this),this.i=new Ui(this),this.M=this,this.F=null}D(ct,_e),ct.prototype[it]=!0,ct.prototype.removeEventListener=function(u,p,_,w){$o(this,u,p,_,w)};function gt(u,p){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new xe(p,u);else if(p instanceof xe)p.target=p.target||u;else{var F=p;p=new xe(w,u),A(p,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var J=p.g=_[W];F=Is(J,w,!0,p)&&F}if(J=p.g=u,F=Is(J,w,!0,p)&&F,F=Is(J,w,!1,p)&&F,_)for(W=0;W<_.length;W++)J=p.g=_[W],F=Is(J,w,!1,p)&&F}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],w=0;w<_.length;w++)Bi(_[w]);delete u.g[p],u.h--}}this.F=null},ct.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},ct.prototype.L=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function Is(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,W=0;W<p.length;++W){var J=p[W];if(J&&!J.da&&J.capture==_){var Ne=J.listener,dt=J.ha||J.src;J.fa&&si(u.i,J),F=Ne.call(dt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Go(u,p,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Ko(u){u.g=Go(()=>{u.g=null,u.i&&(u.i=!1,Ko(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Zh extends _e{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(u){_e.call(this),this.h=u,this.g={}}D(Wi,_e);var xs=[];function Qo(u){Q(u.g,function(p,_){this.g.hasOwnProperty(_)&&Mr(p)},u),u.g={}}Wi.prototype.N=function(){Wi.aa.N.call(this),Qo(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yo=h.JSON.stringify,Vr=h.JSON.parse,Gh=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Xo(){}Xo.prototype.h=null;function Jo(u){return u.h||(u.h=u.i())}function ea(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ta(){xe.call(this,"d")}D(ta,xe);function na(){xe.call(this,"c")}D(na,xe);var oi={},tu=null;function Ss(){return tu=tu||new ct}oi.La="serverreachability";function nu(u){xe.call(this,oi.La,u)}D(nu,xe);function ai(u){const p=Ss();gt(p,new nu(p))}oi.STAT_EVENT="statevent";function iu(u,p){xe.call(this,oi.STAT_EVENT,u),this.stat=p}D(iu,xe);function It(u){const p=Ss();gt(p,new iu(p,u))}oi.Ma="timingevent";function ru(u,p){xe.call(this,oi.Ma,u),this.size=p}D(ru,xe);function zr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function bt(){this.g=!0}bt.prototype.xa=function(){this.g=!1};function se(u,p,_,w,F,W){u.info(function(){if(u.g)if(W)for(var J="",Ne=W.split("&"),dt=0;dt<Ne.length;dt++){var pe=Ne[dt].split("=");if(1<pe.length){var Ze=pe[0];pe=pe[1];var _t=Ze.split("_");J=2<=_t.length&&_t[1]=="type"?J+(Ze+"="+pe+"&"):J+(Ze+"=redacted&")}}else J=null;else J=W;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+p+`
`+_+`
`+J})}function su(u,p,_,w,F,W,J){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+p+`
`+_+`
`+W+" "+J})}function li(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+au(u,_)+(w?" "+w:"")})}function ou(u,p){u.info(function(){return"TIMEOUT: "+p})}bt.prototype.info=function(){};function au(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return Yo(_)}catch{return p}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ia={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wn;function Fr(){}D(Fr,Xo),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Wn=new Fr;function $n(u,p,_,w){this.j=u,this.i=p,this.l=_,this.R=w||1,this.U=new Wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lu}function lu(){this.i=null,this.g="",this.h=!1}var uu={},ra={};function Ps(u,p,_){u.L=1,u.v=Hn(Pn(p)),u.m=_,u.P=!0,cu(u,null)}function cu(u,p){u.F=Date.now(),Cs(u),u.A=Pn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),de(_.i,"t",w),u.C=0,_=u.j.J,u.h=new lu,u.g=Ta(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Zh(T(u.Y,u,u.g),u.O)),p=u.U,_=u.g,w=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(xs[0]=F.toString()),F=xs);for(var W=0;W<F.length;W++){var J=Wo(_,F[W],w||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),ai(),se(u.i,u.u,u.A,u.l,u.R,u.m)}$n.prototype.ca=function(u){u=u.target;const p=this.M;p&&mn(u)==3?p.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const _t=mn(this.g);var p=this.g.Ba();const Ot=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||gu(this.g)))){this.J||_t!=4||p==7||(p==8||0>=Ot?ai(3):ai(2)),sa(this);var _=this.g.Z();this.X=_;t:if(jr(this)){var w=gu(this.g);u="";var F=w.length,W=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),Br(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(W&&p==F-1)});w.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,su(this.i,this.u,this.A,this.l,this.R,_t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,dt=this.g;if((Ne=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Ne)){var pe=Ne;break t}}pe=null}if(_=pe)li(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,_);else{this.o=!1,this.s=3,It(12),Sn(this),Br(this);break e}}if(this.P){_=!0;let sn;for(;!this.J&&this.C<J.length;)if(sn=Kh(this,J),sn==ra){_t==4&&(this.s=4,It(14),_=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==uu){this.s=4,It(15),li(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else li(this.i,this.l,sn,null),ui(this,sn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||J.length!=0||this.h.h||(this.s=1,It(16),_=!1),this.o=this.o&&_,!_)li(this.i,this.l,J,"[Invalid Chunked Response]"),Sn(this),Br(this);else if(0<J.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),$r(Ze),Ze.M=!0,It(11))}}else li(this.i,this.l,J,null),ui(this,J);_t==4&&Sn(this),this.o&&!this.J&&(_t==4?Ea(this.j,this):(this.o=!1,Cs(this)))}else _a(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Sn(this),Br(this)}}}catch{}finally{}};function jr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kh(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?ra:(_=Number(p.substring(_,w)),isNaN(_)?uu:(w+=1,w+_>p.length?ra:(p=p.slice(w,w+_),u.C=w+_,p)))}$n.prototype.cancel=function(){this.J=!0,Sn(this)};function Cs(u){u.S=Date.now()+u.I,hu(u,u.I)}function hu(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zr(T(u.ba,u),p)}function sa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}$n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ou(this.i,this.A),this.L!=2&&(ai(),It(17)),Sn(this),this.s=2,Br(this)):hu(this,this.S-u)};function Br(u){u.j.G==0||u.J||Ea(u.j,u)}function Sn(u){sa(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Qo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ui(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Ve(_.h,u))){if(!u.K&&Ve(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Hr(_),Ns(_);else break e;Ds(_),It(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=zr(T(_.Za,_),6e3));if(1>=Pe(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else mi(_,11)}else if((u.K||_.g==u)&&Hr(_),!S(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let pe=F[p];if(_.T=pe[0],pe=pe[1],_.G==2)if(pe[0]=="c"){_.K=pe[1],_.ia=pe[2];const Ze=pe[3];Ze!=null&&(_.la=Ze,_.j.info("VER="+_.la));const _t=pe[4];_t!=null&&(_.Aa=_t,_.j.info("SVER="+_.Aa));const Ot=pe[5];Ot!=null&&typeof Ot=="number"&&0<Ot&&(w=1.5*Ot,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const sn=u.g;if(sn){const Rn=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rn){var W=w.h;W.g||Rn.indexOf("spdy")==-1&&Rn.indexOf("quic")==-1&&Rn.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Zi(W,W.h),W.h=null))}if(w.D){const xa=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(w.ya=xa,ke(w.I,w.D,xa))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var J=u;if(w.qa=wu(w,w.J?w.ia:null,w.W),J.K){ci(w.h,J);var Ne=J,dt=w.L;dt&&(Ne.I=dt),Ne.B&&(sa(Ne),Cs(Ne)),w.g=J}else wa(w);0<_.i.length&&Ms(_)}else pe[0]!="stop"&&pe[0]!="close"||mi(_,7);else _.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?mi(_,7):ya(_):pe[0]!="noop"&&_.l&&_.l.ta(pe),_.v=0)}}ai(4)}catch{}}var du=class{constructor(u,p){this.g=u,this.map=p}};function oa(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pe(u){return u.h?1:u.g?u.g.size:0}function Ve(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Zi(u,p){u.g?u.g.add(p):u.h=p}function ci(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}oa.prototype.cancel=function(){if(this.i=hi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function hi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return z(u.i)}function aa(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,w=0;w<_;w++)p.push(u[w]);return p}p=[],_=0;for(w in u)p[_++]=u[w];return p}function ve(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const w in u)p[_++]=w;return p}}}function $e(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ve(u),w=aa(u),F=w.length,W=0;W<F;W++)p.call(void 0,w[W],_&&_[W],u)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ks(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),F=null;if(0<=w){var W=u[_].substring(0,w);F=u[_].substring(w+1)}else W=u[_];p(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function rt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rt){this.h=u.h,di(this,u.j),this.o=u.o,this.g=u.g,fn(this,u.s),this.l=u.l;var p=u.i,_=new qn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),qe(this,_),this.m=u.m}else u&&(p=String(u).match(As))?(this.h=!1,di(this,p[1]||"",!0),this.o=Cn(p[2]||""),this.g=Cn(p[3]||"",!0),fn(this,p[4]),this.l=Cn(p[5]||"",!0),qe(this,p[6]||"",!0),this.m=Cn(p[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}rt.prototype.toString=function(){var u=[],p=this.j;p&&u.push(fi(p,Rs,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(fi(p,Rs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(fi(_,_.charAt(0)=="/"?Ls:la,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",fi(_,ca)),u.join("")};function Pn(u){return new rt(u)}function di(u,p,_){u.j=_?Cn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fn(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function qe(u,p,_){p instanceof qn?(u.i=p,De(u.i,u.h)):(_||(p=fi(p,ua)),u.i=new qn(p,u.h))}function ke(u,p,_){u.i.set(p,_)}function Hn(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ur),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ur(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Rs=/[#\/\?@]/g,la=/[#\?:]/g,Ls=/[#\?]/g,ua=/[#\?@]/g,ca=/#/g;function qn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&ks(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=qn.prototype,t.add=function(u,p){An(this),this.i=null,u=xt(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function bs(u,p){An(u),p=xt(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function fu(u,p){return An(u),p=xt(u,p),u.g.has(p)}t.forEach=function(u,p){An(this),this.g.forEach(function(_,w){_.forEach(function(F){u.call(p,F,w,this)},this)},this)},t.na=function(){An(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const F=u[w];for(let W=0;W<F.length;W++)_.push(p[w])}return _},t.V=function(u){An(this);let p=[];if(typeof u=="string")fu(this,u)&&(p=p.concat(this.g.get(xt(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return An(this),this.i=null,u=xt(this,u),fu(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function de(u,p,_){bs(u,p),0<_.length&&(u.i=null,u.g.set(xt(u,p),z(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const W=encodeURIComponent(String(w)),J=this.V(w);for(w=0;w<J.length;w++){var F=W;J[w]!==""&&(F+="="+encodeURIComponent(String(J[w]))),u.push(F)}}return this.i=u.join("&")};function xt(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function De(u,p){p&&!u.j&&(An(u),u.i=null,u.g.forEach(function(_,w){var F=w.toLowerCase();w!=F&&(bs(this,w),de(this,F,_))},u)),u.j=p}function pu(u,p){const _=new bt;if(h.Image){const w=new Image;w.onload=N(pn,_,"TestLoadImage: loaded",!0,p,w),w.onerror=N(pn,_,"TestLoadImage: error",!1,p,w),w.onabort=N(pn,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=N(pn,_,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function ha(u,p){const _=new bt,w=new AbortController,F=setTimeout(()=>{w.abort(),pn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(W=>{clearTimeout(F),W.ok?pn(_,"TestPingServer: ok",!0,p):pn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),pn(_,"TestPingServer: error",!1,p)})}function pn(u,p,_,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(_)}catch{}}function da(){this.g=new Gh}function pi(u,p,_){const w=_||"";try{$e(u,function(F,W){let J=F;m(F)&&(J=Yo(F)),p.push(w+W+"="+encodeURIComponent(J))})}catch(F){throw p.push(w+"type="+encodeURIComponent("_badmap")),F}}function Gi(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Gi,Xo),Gi.prototype.g=function(){return new Zn(this.l,this.j)},Gi.prototype.i=function(u){return function(){return u}}({});function Zn(u,p){ct.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Zn,ct),t=Zn.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ki(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rn(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;st(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function st(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?rn(this):Ki(this),this.readyState==3&&st(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,rn(this))},t.Qa=function(u){this.g&&(this.response=u,rn(this))},t.ga=function(){this.g&&rn(this)};function rn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ki(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Ki(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fa(u){let p="";return Q(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function pa(u,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=fa(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ke(u,p,_))}function Fe(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Fe,ct);var ma=/^https?$/i,Qh=["POST","PUT"];t=Fe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wn.g(),this.v=this.o?Jo(this.o):Jo(Wn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){ga(this,W);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)_.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())_.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Qh,p,void 0))||w||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,J]of _)this.g.setRequestHeader(W,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qi(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){ga(this,W)}};function ga(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Te(u),Nt(u)}function Te(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),Nt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nt(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mu(this):this.bb())},t.bb=function(){mu(this)};function mu(u){if(u.h&&typeof l<"u"&&(!u.v[1]||mn(u)!=4||u.Z()!=2)){if(u.u&&mn(u)==4)Go(u.Ea,0,u);else if(gt(u,"readystatechange"),mn(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=J===0){var F=String(u.D).match(As)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),w=!ma.test(F?F.toLowerCase():"")}_=w}if(_)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var W=2<mn(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Te(u)}}finally{Nt(u)}}}}function Nt(u,p){if(u.g){Qi(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||gt(u,"ready");try{_.onreadystatechange=w}catch{}}}function Qi(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function mn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Vr(p)}};function gu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _a(u){const p={};u=(u.g&&2<=mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(S(u[w]))continue;var _=M(u[w]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[F]||[];p[F]=W,W.push(_)}C(p,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function va(u){this.Aa=0,this.i=[],this.j=new bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,u),this.cb=Wr("retryDelaySeedMs",1e4,u),this.Wa=Wr("forwardChannelMaxRetries",2,u),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new oa(u&&u.concurrentRequestLimit),this.Da=new da,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=va.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,w){It(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=wu(this,null,this.W),Ms(this)};function ya(u){if(Os(u),u.G==3){var p=u.U++,_=Pn(u.I);if(ke(_,"SID",u.K),ke(_,"RID",p),ke(_,"TYPE","terminate"),Yi(u,_),p=new $n(u,u.j,p),p.L=2,p.v=Hn(Pn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Ta(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Cs(p)}Vs(u)}function Ns(u){u.g&&($r(u),u.g.cancel(),u.g=null)}function Os(u){Ns(u),u.u&&(h.clearTimeout(u.u),u.u=null),Hr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Ms(u){if(!qi(u.h)&&!u.s){u.s=!0;var p=u.Ga;ye||X(),B||(ye(),B=!0),ae.add(p,u),u.B=0}}function gn(u,p){return Pe(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zr(T(u.Ga,u,p),yu(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new $n(this,this.j,u);let W=this.o;if(this.S&&(W?(W=I(W),A(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=kn(this,F,p),_=Pn(this.I),ke(_,"RID",u),ke(_,"CVER",22),this.D&&ke(_,"X-HTTP-Session-Id",this.D),Yi(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(fa(W)))+"&"+p:this.m&&pa(_,this.m,W)),Zi(this.h,F),this.Ua&&ke(_,"TYPE","init"),this.P?(ke(_,"$req",p),ke(_,"SID","null"),F.T=!0,Ps(F,_,null)):Ps(F,_,p),this.G=2}}else this.G==3&&(u?_u(this,u):this.i.length==0||qi(this.h)||_u(this))};function _u(u,p){var _;p?_=p.l:_=u.U++;const w=Pn(u.I);ke(w,"SID",u.K),ke(w,"RID",_),ke(w,"AID",u.T),Yi(u,w),u.m&&u.o&&pa(w,u.m,u.o),_=new $n(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=kn(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zi(u.h,_),Ps(_,w,p)}function Yi(u,p){u.H&&Q(u.H,function(_,w){ke(p,w,_)}),u.l&&$e({},function(_,w){ke(p,w,_)})}function kn(u,p,_){_=Math.min(u.i.length,_);var w=u.l?T(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const J=["count="+_];W==-1?0<_?(W=F[0].g,J.push("ofs="+W)):W=0:J.push("ofs="+W);let Ne=!0;for(let dt=0;dt<_;dt++){let pe=F[dt].g;const Ze=F[dt].map;if(pe-=W,0>pe)W=Math.max(0,F[dt].g-100),Ne=!1;else try{pi(Ze,J,"req"+pe+"_")}catch{w&&w(Ze)}}if(Ne){w=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,w}function wa(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ye||X(),B||(ye(),B=!0),ae.add(p,u),u.v=0}}function Ds(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zr(T(u.Fa,u),yu(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zr(T(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ns(this),vu(this))};function $r(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function vu(u){u.g=new $n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Pn(u.qa);ke(p,"RID","rpc"),ke(p,"SID",u.K),ke(p,"AID",u.T),ke(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(p,"TO",u.ja),ke(p,"TYPE","xmlhttp"),Yi(u,p),u.m&&u.o&&pa(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Hn(Pn(p)),_.m=null,_.P=!0,cu(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Ns(this),Ds(this),It(19))};function Hr(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ea(u,p){var _=null;if(u.g==p){Hr(u),$r(u),u.g=null;var w=2}else if(Ve(u.h,p))_=p.D,ci(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;w=Ss(),gt(w,new ru(w,_)),Ms(u)}else wa(u);else if(F=p.s,F==3||F==0&&0<p.X||!(w==1&&gn(u,p)||w==2&&Ds(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:mi(u,5);break;case 4:mi(u,10);break;case 3:mi(u,6);break;default:mi(u,2)}}}function yu(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function mi(u,p){if(u.j.info("Error code "+p),p==2){var _=T(u.fb,u),w=u.Xa;const F=!w;w=new rt(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||di(w,"https"),Hn(w),F?pu(w.toString(),_):ha(w.toString(),_)}else It(2);u.G=0,u.l&&u.l.sa(p),Vs(u),Os(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Vs(u){if(u.G=0,u.ka=[],u.l){const p=hi(u.h);(p.length!=0||u.i.length!=0)&&($(u.ka,p),$(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function wu(u,p,_){var w=_ instanceof rt?Pn(_):new rt(_);if(w.g!="")p&&(w.g=p+"."+w.g),fn(w,w.s);else{var F=h.location;w=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var W=new rt(null);w&&di(W,w),p&&(W.g=p),F&&fn(W,F),_&&(W.l=_),w=W}return _=u.D,p=u.ya,_&&p&&ke(w,_,p),ke(w,"VER",u.la),Yi(u,w),w}function Ta(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Fe(new Gi({eb:_})):new Fe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}t=Ia.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gi(){}gi.prototype.g=function(u,p){return new et(u,p)};function et(u,p){ct.call(this),this.g=new va(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!S(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ht(this)}D(et,ct),et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},et.prototype.close=function(){ya(this.g)},et.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Yo(u),u=_);p.i.push(new du(p.Ya++,u)),p.G==3&&Ms(p)},et.prototype.N=function(){this.g.l=null,delete this.j,ya(this.g),delete this.g,et.aa.N.call(this)};function Eu(u){ta.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}D(Eu,ta);function Xi(){na.call(this),this.status=1}D(Xi,na);function ht(u){this.g=u}D(ht,Ia),ht.prototype.ua=function(){gt(this.g,"a")},ht.prototype.ta=function(u){gt(this.g,new Eu(u))},ht.prototype.sa=function(u){gt(this.g,new Xi)},ht.prototype.ra=function(){gt(this.g,"b")},gi.prototype.createWebChannel=gi.prototype.g,et.prototype.send=et.prototype.o,et.prototype.open=et.prototype.m,et.prototype.close=et.prototype.close,Vw=function(){return new gi},Dw=function(){return Ss()},Mw=oi,$f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,pc=Hi,ia.COMPLETE="complete",Ow=ia,ea.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Ua=ea,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Nw=Fe}).apply(typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{});const G_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new cm("@firebase/firestore");function Va(){return cs.logLevel}function ie(t,...e){if(cs.logLevel<=Ce.DEBUG){const n=e.map(fm);cs.debug(`Firestore (${Do}): ${t}`,...n)}}function Mi(t,...e){if(cs.logLevel<=Ce.ERROR){const n=e.map(fm);cs.error(`Firestore (${Do}): ${t}`,...n)}}function xo(t,...e){if(cs.logLevel<=Ce.WARN){const n=e.map(fm);cs.warn(`Firestore (${Do}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw Mi(e),new Error(e)}function Me(t,e){t||he()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class zP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FP{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string"),new zw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new zt(e)}}class jP{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BP{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new jP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new UP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=$P(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function So(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new mt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new mt(0,0))}static max(){return new me(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,i){n===void 0?n=0:n>e.length&&he(),i===void 0?i=e.length-n:i>e.length-n&&he(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Sl{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const HP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Sl{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return HP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Be.fromString(e))}static fromName(e){return new oe(Be.fromString(e).popFirst(5))}static empty(){return new oe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Be(e.slice()))}}function qP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(i===1e9?new mt(n+1,0):new mt(n,i));return new Cr(s,oe.empty(),e)}function ZP(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Cr(me.min(),oe.empty(),-1)}static max(){return new Cr(me.max(),oe.empty(),-1)}}function GP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==KP)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(s=>s?G.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new G((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function YP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pm.oe=-1;function Sh(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Pt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,i,s,o){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q_(this.data.getIterator())}getIteratorFrom(e){return new Q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new ln([])}unionWith(e){let n=new kt(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bw("Invalid base64 string: "+o):o}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const JP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Me(!!t),typeof t=="string"){let e=0;const n=JP.exec(t);if(Me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gm(t){const e=t.mapValue.fields.__previous_value__;return mm(e)?gm(e):e}function Pl(t){const e=Ar(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,i,s,o,l,h,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}class Cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mm(t)?4:nC(t)?9007199254740991:tC(t)?10:11:he()}function ii(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pl(t).isEqual(Pl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ar(s.timestampValue),h=Ar(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return hs(s.bytesValue).isEqual(hs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?Qc(l)===Qc(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(K_(l)!==K_(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ii(l[d],h[d])))return!1;return!0}(t,e);default:return he()}}function Al(t,e){return(t.values||[]).find(n=>ii(n,e))!==void 0}function Po(t,e){if(t===e)return 0;const n=ds(t),i=ds(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Y_(t.timestampValue,e.timestampValue);case 4:return Y_(Pl(t),Pl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,l){const h=hs(o),d=hs(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=Le(h[m],d[m]);if(v!==0)return v}return Le(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Le(tt(o.latitude),tt(l.latitude));return h!==0?h:Le(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X_(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const E=o.fields||{},T=l.fields||{},N=(h=E.value)===null||h===void 0?void 0:h.arrayValue,D=(d=T.value)===null||d===void 0?void 0:d.arrayValue,z=Le(((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0,((v=D==null?void 0:D.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:X_(N,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Xu.mapValue&&l===Xu.mapValue)return 0;if(o===Xu.mapValue)return 1;if(l===Xu.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let E=0;E<d.length&&E<v.length;++E){const T=Le(d[E],v[E]);if(T!==0)return T;const N=Po(h[d[E]],m[v[E]]);if(N!==0)return N}return Le(d.length,v.length)}(t.mapValue,e.mapValue);default:throw he()}}function Y_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Ar(t),i=Ar(e),s=Le(n.seconds,i.seconds);return s!==0?s:Le(n.nanos,i.nanos)}function X_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Po(n[s],i[s]);if(o)return o}return Le(n.length,i.length)}function Co(t){return Hf(t)}function Hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ar(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Hf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Hf(n.fields[l])}`;return s+"}"}(t.mapValue):he()}function J_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qf(t){return!!t&&"integerValue"in t}function _m(t){return!!t&&"arrayValue"in t}function ev(t){return!!t&&"nullValue"in t}function tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mc(t){return!!t&&"mapValue"in t}function tC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _s(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=tl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(n)}setAll(e){let n=Ct.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=tl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];mc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){_s(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Yt(tl(this.value))}}function Uw(t){const e=[];return _s(t.fields,(n,i)=>{const s=new Ct([n]);if(mc(i)){const o=Uw(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new jt(e,0,me.min(),me.min(),me.min(),Yt.empty(),0)}static newFoundDocument(e,n,i,s){return new jt(e,1,n,me.min(),i,s,0)}static newNoDocument(e,n){return new jt(e,2,n,me.min(),me.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,me.min(),me.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.position=e,this.inclusive=n}}function nv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=Po(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function iv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function iC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class ut extends Ww{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sC(e,n,i):n==="array-contains"?new lC(e,i):n==="in"?new uC(e,i):n==="not-in"?new cC(e,i):n==="array-contains-any"?new hC(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oC(e,i):new aC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Po(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(Po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends Ww{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bn(e,n)}matches(e){return $w(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $w(t){return t.op==="and"}function Hw(t){return rC(t)&&$w(t)}function rC(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function Zf(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(Hw(t))return t.filters.map(e=>Zf(e)).join(",");{const e=t.filters.map(n=>Zf(n)).join(",");return`${t.op}(${e})`}}function qw(t,e){return t instanceof ut?function(i,s){return s instanceof ut&&i.op===s.op&&i.field.isEqual(s.field)&&ii(i.value,s.value)}(t,e):t instanceof Bn?function(i,s){return s instanceof Bn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&qw(l,s.filters[h]),!0):!1}(t,e):void he()}function Zw(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Co(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(Zw).join(" ,")+"}"}(t):"Filter"}class sC extends ut{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class oC extends ut{constructor(e,n){super(e,"in",n),this.keys=Gw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aC extends ut{constructor(e,n){super(e,"not-in",n),this.keys=Gw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class lC extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _m(n)&&Al(n.arrayValue,this.value)}}class uC extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Al(this.value.arrayValue,n)}}class cC extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Al(this.value.arrayValue,n)}}class hC extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Al(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function rv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new dC(t,e,n,i,s,o,l)}function vm(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Zf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Co(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Co(i)).join(",")),e.ue=n}return e.ue}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iv(t.startAt,e.startAt)&&iv(t.endAt,e.endAt)}function Gf(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fC(t,e,n,i,s,o,l,h){return new Vo(t,e,n,i,s,o,l,h)}function Ph(t){return new Vo(t)}function sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kw(t){return t.collectionGroup!==null}function nl(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new kt(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new kl(o,i))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new kl(Ct.keyField(),i))}return e.ce}function ei(t){const e=ge(t);return e.le||(e.le=pC(e,nl(t))),e.le}function pC(t,e){if(t.limitType==="F")return rv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new kl(s.field,o)});const n=t.endAt?new Yc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Yc(t.startAt.position,t.startAt.inclusive):null;return rv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Kf(t,e){const n=t.filters.concat([e]);return new Vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qf(t,e,n){return new Vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ch(t,e){return ym(ei(t),ei(e))&&t.limitType===e.limitType}function Qw(t){return`${vm(ei(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Zw(s)).join(", ")}]`),Sh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Co(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Co(s)).join(",")),`Target(${i})`}(ei(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of nl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=nv(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,nl(i),s)||i.endAt&&!function(l,h,d){const m=nv(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,nl(i),s))}(t,e)}function mC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yw(t){return(e,n)=>{let i=!1;for(const s of nl(t)){const o=gC(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function gC(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Po(d,m):he()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Ye(oe.comparator);function Di(){return _C}const Xw=new Ye(oe.comparator);function Wa(...t){let e=Xw;for(const n of t)e=e.insert(n.key,n);return e}function Jw(t){let e=Xw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Xr(){return il()}function eE(){return il()}function il(){return new zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const vC=new Ye(oe.comparator),yC=new kt(oe.comparator);function Se(...t){let e=yC;for(const n of t)e=e.add(n);return e}const wC=new kt(Le);function EC(){return wC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function tE(t){return{integerValue:""+t}}function TC(t,e){return XP(e)?tE(e):wm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function IC(t,e,n){return t instanceof Rl?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&mm(o)&&(o=gm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Ll?iE(t,e):t instanceof bl?rE(t,e):function(s,o){const l=nE(s,o),h=ov(l)+ov(s.Pe);return qf(l)&&qf(s.Pe)?tE(h):wm(s.serializer,h)}(t,e)}function xC(t,e,n){return t instanceof Ll?iE(t,e):t instanceof bl?rE(t,e):n}function nE(t,e){return t instanceof Xc?function(i){return qf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Rl extends kh{}class Ll extends kh{constructor(e){super(),this.elements=e}}function iE(t,e){const n=sE(e);for(const i of t.elements)n.some(s=>ii(s,i))||n.push(i);return{arrayValue:{values:n}}}class bl extends kh{constructor(e){super(),this.elements=e}}function rE(t,e){let n=sE(e);for(const i of t.elements)n=n.filter(s=>!ii(s,i));return{arrayValue:{values:n}}}class Xc extends kh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ov(t){return tt(t.integerValue||t.doubleValue)}function sE(t){return _m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.field=e,this.transform=n}}function PC(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Ll&&s instanceof Ll||i instanceof bl&&s instanceof bl?So(i.elements,s.elements,ii):i instanceof Xc&&s instanceof Xc?ii(i.Pe,s.Pe):i instanceof Rl&&s instanceof Rl}(t.transform,e.transform)}class CC{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rh{}function oE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lE(t.key,Vn.none()):new $l(t.key,t.data,Vn.none());{const n=t.data,i=Yt.empty();let s=new kt(Ct.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Nr(t.key,i,new ln(s.toArray()),Vn.none())}}function AC(t,e,n){t instanceof $l?function(s,o,l){const h=s.value.clone(),d=lv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(s,o,l){if(!gc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=lv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(aE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function rl(t,e,n,i){return t instanceof $l?function(o,l,h,d){if(!gc(o.precondition,l))return h;const m=o.value.clone(),v=uv(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Nr?function(o,l,h,d){if(!gc(o.precondition,l))return h;const m=uv(o.fieldTransforms,d,l),v=l.data;return v.setAll(aE(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(o,l,h){return gc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function kC(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=nE(i.transform,s||null);o!=null&&(n===null&&(n=Yt.empty()),n.set(i.field,o))}return n||null}function av(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&So(i,s,(o,l)=>PC(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $l extends Rh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends Rh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function aE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lv(t,e,n){const i=new Map;Me(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,xC(l,h,n[s]))}return i}function uv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,IC(o,l,e))}return i}class lE extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&AC(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=eE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=oE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(n,i)=>av(n,i))&&So(this.baseMutations,e.baseMutations,(n,i)=>av(n,i))}}class Em{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Me(e.mutations.length===i.length);let s=function(){return vC}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Em(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ae;function OC(t){switch(t){default:return he();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function uE(t){if(t===void 0)return Mi("GRPC error has no .code"),q.UNKNOWN;switch(t){case at.OK:return q.OK;case at.CANCELLED:return q.CANCELLED;case at.UNKNOWN:return q.UNKNOWN;case at.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case at.INTERNAL:return q.INTERNAL;case at.UNAVAILABLE:return q.UNAVAILABLE;case at.UNAUTHENTICATED:return q.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case at.NOT_FOUND:return q.NOT_FOUND;case at.ALREADY_EXISTS:return q.ALREADY_EXISTS;case at.PERMISSION_DENIED:return q.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case at.ABORTED:return q.ABORTED;case at.OUT_OF_RANGE:return q.OUT_OF_RANGE;case at.UNIMPLEMENTED:return q.UNIMPLEMENTED;case at.DATA_LOSS:return q.DATA_LOSS;default:return he()}}(Ae=at||(at={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new ns([4294967295,4294967295],0);function cv(t){const e=MC().encode(t),n=new bw;return n.update(e),new Uint8Array(n.digest())}function hv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ns([n,i],0),new ns([s,o],0)]}class Tm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ns.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(ns.fromNumber(i)));return s.compare(DC)===1&&(s=new ns([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cv(e),[i,s]=hv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Tm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=cv(e),[i,s]=hv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Lh(me.min(),s,new Ye(Le),Di(),Se())}}class Hl{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Hl(i,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class cE{constructor(e,n){this.targetId=e,this.me=n}}class hE{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class dv{constructor(){this.fe=0,this.ge=pv(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),i=Se();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:he()}}),new Hl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=pv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=fv(),this.Qe=new Ye(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(Gf(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,jt.newNoDocument(l,me.min()))}else Me(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=hs(i).toUint8Array()}catch(d){if(d instanceof Bw)return xo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Tm(l,s,o)}catch(d){return xo(d instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&Gf(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,jt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Se();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new Lh(e,n,this.Qe,this.ke,i);return this.ke=Di(),this.qe=fv(),this.Qe=new Ye(Le),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fv(){return new Ye(oe.comparator)}function pv(){return new Ye(oe.comparator)}const zC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),FC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jC=(()=>({and:"AND",or:"OR"}))();class BC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yf(t,e){return t.useProto3Json||Sh(e)?e:{value:e}}function Jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UC(t,e){return Jc(t,e.toTimestamp())}function ti(t){return Me(!!t),me.fromTimestamp(function(n){const i=Ar(n);return new mt(i.seconds,i.nanos)}(t))}function Im(t,e){return Xf(t,e).canonicalString()}function Xf(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fE(t){const e=Be.fromString(t);return Me(vE(e)),e}function Jf(t,e){return Im(t.databaseId,e.path)}function Nd(t,e){const n=fE(e);if(n.get(1)!==t.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(mE(n))}function pE(t,e){return Im(t.databaseId,e)}function WC(t){const e=fE(t);return e.length===4?Be.emptyPath():mE(e)}function ep(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mE(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mv(t,e,n){return{name:Jf(t,e),fields:n.value.mapValue.fields}}function $C(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Me(v===void 0||typeof v=="string"),Lt.fromBase64String(v||"")):(Me(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Lt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?q.UNKNOWN:uE(m.code);return new te(v,m.message||"")}(l);n=new hE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Nd(t,i.document.name),o=ti(i.document.updateTime),l=i.document.createTime?ti(i.document.createTime):me.min(),h=new Yt({mapValue:{fields:i.document.fields}}),d=jt.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new _c(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Nd(t,i.document),o=i.readTime?ti(i.readTime):me.min(),l=jt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new _c([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Nd(t,i.document),o=i.removedTargetIds||[];n=new _c([],o,s,null)}else{if(!("filter"in e))return he();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new NC(s,o),h=i.targetId;n=new cE(h,l)}}return n}function HC(t,e){let n;if(e instanceof $l)n={update:mv(t,e.key,e.value)};else if(e instanceof lE)n={delete:Jf(t,e.key)};else if(e instanceof Nr)n={update:mv(t,e.key,e.data),updateMask:eA(e.fieldMask)};else{if(!(e instanceof RC))return he();n={verify:Jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Rl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ll)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof bl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Xc)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw he()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:UC(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(t,e.precondition)),n}function qC(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?ti(s.updateTime):ti(o);return l.isEqual(me.min())&&(l=ti(o)),new CC(l,s.transformResults||[])}(n,e))):[]}function ZC(t,e){return{documents:[pE(t,e.path)]}}function GC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=pE(t,s);const o=function(m){if(m.length!==0)return _E(Bn.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:$s(T.field),direction:YC(T.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Yf(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:s}}function KC(t){let e=WC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Me(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(E){const T=gE(E);return T instanceof Bn&&Hw(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(E){return E.map(T=>function(D){return new kl(Hs(D.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,Sh(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(E){const T=!!E.before,N=E.values||[];return new Yc(N,T)}(n.startAt));let m=null;return n.endAt&&(m=function(E){const T=!E.before,N=E.values||[];return new Yc(N,T)}(n.endAt)),fC(e,s,l,o,h,"F",d,m)}function QC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hs(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Hs(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hs(n.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Hs(n.unaryFilter.field);return ut.create(l,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return ut.create(Hs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(i=>gE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function YC(t){return zC[t]}function XC(t){return FC[t]}function JC(t){return jC[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Hs(t){return Ct.fromServerFormat(t.fieldPath)}function _E(t){return t instanceof ut?function(n){if(n.op==="=="){if(tv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(ev(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(ev(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:XC(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const i=n.getFilters().map(s=>_E(s));return i.length===1?i[0]:{compositeFilter:{op:JC(n.op),filters:i}}}(t):he()}function eA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,s,o=me.min(),l=me.min(),h=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.ct=e}}function nA(t){const e=KC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.un=new rA}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Cr.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class rA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new kt(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new kt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.changes=new zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&rl(i.mutation,s,ln.empty(),mt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Se()){const s=Xr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=Wa();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Se()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Di();const l=il(),h=function(){return il()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Nr)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),rl(v.mutation,m,v.mutation.getFieldMask(),mt.now())):l.set(m.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var E;return h.set(m,new oA(v,(E=l.get(m))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=il();let s=new Ye((l,h)=>l-h),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||ln.empty();v=h.applyToLocalView(m,v),i.set(d,v);const E=(s.get(h.batchId)||Se()).add(d);s=s.insert(h.batchId,E)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,E=eE();v.forEach(T=>{if(!o.has(T)){const N=oE(n.get(T),i.get(T));N!==null&&E.set(T,N),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,E))}return G.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):G.resolve(Xr());let h=-1,d=o;return l.next(m=>G.forEach(m,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{d=d.insert(v,T)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Se())).next(v=>({batchId:h,changes:Jw(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let s=Wa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=Wa();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const m=function(E,T){return new Vo(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((E,T)=>{l=l.insert(E,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,jt.newInvalidDocument(v)))});let h=Wa();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&rl(v.mutation,m,ln.empty(),mt.now()),Ah(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ti(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nA(s.bundledQuery),readTime:ti(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.overlays=new Ye(oe.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Xr();return G.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const s=Xr(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ye((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=Xr(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Xr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return G.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new bC(n,i));let o=this.Ir.get(n);o===void 0&&(o=Se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Tr=new kt(yt.Er),this.dr=new kt(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new yt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Be([])),i=new yt(n,e),s=new yt(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Be([])),i=new yt(n,e),s=new yt(n,e+1);let o=Se();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new yt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(yt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new LC(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new yt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Le);return n.forEach(s=>{const o=new yt(s,0),l=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new yt(new oe(o),0);let h=new kt(Le);return this.br.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.wr)),!0)},l),G.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(n.mutations,s=>{const o=new yt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new yt(n,0),s=this.br.firstAfterOrEqual(i);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.Mr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let i=Di();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():jt.newInvalidDocument(s))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Di();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||GP(ZP(v),i)<=0||(s.has(v.key)||Ah(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,s){he()}Or(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new fA(this)}getSize(e){return G.resolve(this.size)}}class fA extends sA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.persistence=e,this.Nr=new zo(n=>vm(n),ym),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xm,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pm(0),this.Kr=!1,this.Kr=!0,this.$r=new cA,this.referenceDelegate=e(this),this.Ur=new pA(this),this.indexManager=new iA,this.remoteDocumentCache=function(s){return new dA(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new tA(n),this.Gr=new lA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new hA(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const s=new gA(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class gA extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Jr=new xm,this.Yr=null}static Zr(e){return new Sm(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{const s=oe.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Se(),s=Se();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Pm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vS()?8:YP(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new _A;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Va()<=Ce.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Va()<=Ce.DEBUG&&ie("QueryEngine","Query:",Ws(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Va()<=Ce.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):G.resolve())}Yi(e,n){if(sv(n))return G.resolve(null);let i=ei(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qf(n,null,"F"),i=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Se(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.ts(n,h);return this.ns(n,m,l,d.readTime)?this.Yi(e,Qf(n,null,"F")):this.rs(e,m,n,d)}))})))}Zi(e,n,i,s){return sv(n)||s.isEqual(me.min())?G.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?G.resolve(null):(Va()<=Ce.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ws(n)),this.rs(e,l,n,qP(s,-1)).next(h=>h))})}ts(e,n){let i=new kt(Yw(e));return n.forEach((s,o)=>{Ah(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return Va()<=Ce.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cr.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ye(Le),this._s=new zo(o=>vm(o),ym),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wA(t,e,n,i){return new yA(t,e,n,i)}async function yE(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Se();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({hs:m,removedBatchIds:l,addedBatchIds:h}))})})}function EA(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const E=m.batch,T=E.keys();let N=G.resolve();return T.forEach(D=>{N=N.next(()=>v.getEntry(d,D)).next(z=>{const $=m.docVersions.get(D);Me($!==null),z.version.compareTo($)<0&&(E.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(d,E))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Se();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function wE(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function TA(t,e){const n=ge(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((v,E)=>{const T=s.get(E);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,E)));let N=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Lt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),s=s.insert(E,N),function(z,$,b){return z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(T,N,v)&&h.push(n.Ur.updateTargetData(o,N))});let d=Di(),m=Se();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(IA(o,l,e.documentUpdates).next(v=>{d=v.Ps,m=v.Is})),!i.isEqual(me.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(E=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return G.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.os=s,o))}function IA(t,e,n){let i=Se(),s=Se();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Di();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(me.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function xA(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function SA(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,G.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new hr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function tp(t,e,n){const i=ge(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Wl(l))throw l;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function gv(t,e,n){const i=ge(t);let s=me.min(),o=Se();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const E=ge(d),T=E._s.get(v);return T!==void 0?G.resolve(E.os.get(T)):E.Ur.getTargetData(m,v)}(i,l,ei(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:me.min(),n?o:Se())).next(h=>(PA(i,mC(e),h),{documents:h,Ts:o})))}function PA(t,e,n){let i=t.us.get(e)||me.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class _v{constructor(){this.activeTargetIds=EC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CA{constructor(){this.so=new _v,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _v,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Od(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class LA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=Od(),d=this.xo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then(v=>(ie("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw xo("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=kA[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=Od();return new Promise((l,h)=>{const d=new Nw;d.setWithCredentials(!0),d.listenOnce(Ow.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pc.NO_ERROR:const v=d.getResponseJson();ie(Vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case pc.TIMEOUT:ie(Vt,`RPC '${e}' ${o} timed out`),h(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const E=d.getStatus();if(ie(Vt,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const D=function($){const b=$.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(N.status);h(new te(D,N.message))}else h(new te(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new te(q.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ie(Vt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ie(Vt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,i,15)})}Bo(e,n,i){const s=Od(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Vw(),h=Dw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ie(Vt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const E=l.createWebChannel(v,d);let T=!1,N=!1;const D=new RA({Io:$=>{N?ie(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(T||(ie(Vt,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),ie(Vt,`RPC '${e}' stream ${s} sending:`,$),E.send($))},To:()=>E.close()}),z=($,b,S)=>{$.listen(b,O=>{try{S(O)}catch(H){setTimeout(()=>{throw H},0)}})};return z(E,Ua.EventType.OPEN,()=>{N||(ie(Vt,`RPC '${e}' stream ${s} transport opened.`),D.yo())}),z(E,Ua.EventType.CLOSE,()=>{N||(N=!0,ie(Vt,`RPC '${e}' stream ${s} transport closed`),D.So())}),z(E,Ua.EventType.ERROR,$=>{N||(N=!0,xo(Vt,`RPC '${e}' stream ${s} transport errored:`,$),D.So(new te(q.UNAVAILABLE,"The operation could not be completed")))}),z(E,Ua.EventType.MESSAGE,$=>{var b;if(!N){const S=$.data[0];Me(!!S);const O=S,H=O.error||((b=O[0])===null||b===void 0?void 0:b.error);if(H){ie(Vt,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let Q=function(P){const A=at[P];if(A!==void 0)return uE(A)}(Y),C=H.message;Q===void 0&&(Q=q.INTERNAL,C="Unknown error status: "+Y+" with message "+H.message),N=!0,D.So(new te(Q,C)),E.close()}else ie(Vt,`RPC '${e}' stream ${s} received:`,S),D.bo(S)}}),z(h,Mw.STAT_EVENT,$=>{$.stat===$f.PROXY?ie(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===$f.NOPROXY&&ie(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){return new BC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new EE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new te(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bA extends TE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$C(this.serializer,e),i=function(o){if(!("targetChange"in o))return me.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?me.min():l.readTime?ti(l.readTime):me.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=ep(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Gf(d)?{documents:ZC(o,d)}:{query:GC(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=dE(o,l.resumeToken);const m=Yf(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(me.min())>0){h.readTime=Jc(o,l.snapshotVersion.toTimestamp());const m=Yf(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=QC(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=ep(this.serializer),n.removeTarget=e,this.a_(n)}}class NA extends TE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qC(e.writeResults,e.commitTime),i=ti(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=ep(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>HC(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Xf(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(q.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Xf(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(q.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class MA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mi(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{vs(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=ge(d);m.L_.add(4),await ql(m),m.q_.set("Unknown"),m.L_.delete(4),await Nh(m)}(this))})}),this.q_=new MA(i,s)}}async function Nh(t){if(vs(t))for(const e of t.B_)await e(!0)}async function ql(t){for(const e of t.B_)await e(!1)}function IE(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rm(n)?km(n):Fo(n).r_()&&Am(n,e))}function Cm(t,e){const n=ge(t),i=Fo(n);n.N_.delete(e),i.r_()&&xE(n,e),n.N_.size===0&&(i.r_()?i.o_():vs(n)&&n.q_.set("Unknown"))}function Am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(t).A_(e)}function xE(t,e){t.Q_.xe(e),Fo(t).R_(e)}function km(t){t.Q_=new VC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fo(t).start(),t.q_.v_()}function Rm(t){return vs(t)&&!Fo(t).n_()&&t.N_.size>0}function vs(t){return ge(t).L_.size===0}function SE(t){t.Q_=void 0}async function VA(t){t.q_.set("Online")}async function zA(t){t.N_.forEach((e,n)=>{Am(t,e)})}async function FA(t,e){SE(t),Rm(t)?(t.q_.M_(e),km(t)):t.q_.set("Unknown")}async function jA(t,e,n){if(t.q_.set("Online"),e instanceof hE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await eh(t,i)}else if(e instanceof _c?t.Q_.Ke(e):e instanceof cE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const i=await wE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(m);v&&o.N_.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(Lt.EMPTY_BYTE_STRING,v.snapshotVersion)),xE(o,d);const E=new hr(v.target,d,m,v.sequenceNumber);Am(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await eh(t,i)}}async function eh(t,e,n){if(!Wl(e))throw e;t.L_.add(1),await ql(t),t.q_.set("Offline"),n||(n=()=>wE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Nh(t)})}function PE(t,e){return e().catch(n=>eh(t,n,e))}async function Oh(t){const e=ge(t),n=kr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BA(e);)try{const s=await xA(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,UA(e,s)}catch(s){await eh(e,s)}CE(e)&&AE(e)}function BA(t){return vs(t)&&t.O_.length<10}function UA(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function CE(t){return vs(t)&&!kr(t).n_()&&t.O_.length>0}function AE(t){kr(t).start()}async function WA(t){kr(t).p_()}async function $A(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function HA(t,e,n){const i=t.O_.shift(),s=Em.from(i,e,n);await PE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Oh(t)}async function qA(t,e){e&&kr(t).V_&&await async function(i,s){if(function(l){return OC(l)&&l!==q.ABORTED}(s.code)){const o=i.O_.shift();kr(i).s_(),await PE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Oh(i)}}(t,e),CE(t)&&AE(t)}async function yv(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=vs(n);n.L_.add(3),await ql(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Nh(n)}async function ZA(t,e){const n=ge(t);e?(n.L_.delete(2),await Nh(n)):e||(n.L_.add(2),await ql(n),n.q_.set("Unknown"))}function Fo(t){return t.K_||(t.K_=function(n,i,s){const o=ge(n);return o.w_(),new bA(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VA.bind(null,t),Ro:zA.bind(null,t),mo:FA.bind(null,t),d_:jA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rm(t)?km(t):t.q_.set("Unknown")):(await t.K_.stop(),SE(t))})),t.K_}function kr(t){return t.U_||(t.U_=function(n,i,s){const o=ge(n);return o.w_(),new NA(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WA.bind(null,t),mo:qA.bind(null,t),f_:$A.bind(null,t),g_:HA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Oh(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Lm(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(Mi("AsyncQueue",`${e}: ${t}`),Wl(t))return new te(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=Wa(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.W_=new Ye(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ko{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ko(e,n,ho.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class KA{constructor(){this.queries=Ev(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=ge(n),o=s.queries;s.queries=Ev(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new te(q.ABORTED,"Firestore shutting down"))}}function Ev(){return new zo(t=>Qw(t),Ch)}async function kE(t,e){const n=ge(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new GA,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=bm(l,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Nm(n)}async function RE(t,e){const n=ge(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function QA(t,e){const n=ge(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&Nm(n)}function YA(t,e,n){const i=ge(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function Nm(t){t.Y_.forEach(e=>{e.next()})}var np,Tv;(Tv=np||(np={})).ea="default",Tv.Cache="cache";class LE{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.key=e}}class NE{constructor(e){this.key=e}}class XA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=Yw(e),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new wv,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,E)=>{const T=s.get(v),N=Ah(this.query,E)?E:null,D=!!T&&this.mutatedKeys.has(T.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let $=!1;T&&N?T.data.isEqual(N.data)?D!==z&&(i.track({type:3,doc:N}),$=!0):this.ga(T,N)||(i.track({type:2,doc:N}),$=!0,(d&&this.Aa(N,d)>0||m&&this.Aa(N,m)<0)&&(h=!0)):!T&&N?(i.track({type:0,doc:N}),$=!0):T&&!N&&(i.track({type:1,doc:T}),$=!0,(d||m)&&(h=!0)),$&&(N?(l=l.add(N),o=z?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,E)=>function(N,D){const z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return z(N)-z(D)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new ko(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new NE(i))}),this.da.forEach(i=>{e.has(i)||n.push(new bE(i))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JA{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ek{constructor(e){this.key=e,this.va=!1}}class tk{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new zo(h=>Qw(h),Ch),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(oe.comparator),this.Na=new Map,this.La=new xm,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nk(t,e,n=!0){const i=FE(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await OE(i,e,n,!0),s}async function ik(t,e){const n=FE(t);await OE(n,e,!0,!1)}async function OE(t,e,n,i){const s=await SA(t.localStore,ei(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await rk(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&IE(t.remoteStore,s),h}async function rk(t,e,n,i,s){t.Ka=(E,T,N)=>async function(z,$,b,S){let O=$.view.ma(b);O.ns&&(O=await gv(z.localStore,$.query,!1).then(({documents:C})=>$.view.ma(C,O)));const H=S&&S.targetChanges.get($.targetId),Y=S&&S.targetMismatches.get($.targetId)!=null,Q=$.view.applyChanges(O,z.isPrimaryClient,H,Y);return xv(z,$.targetId,Q.wa),Q.snapshot}(t,E,T,N);const o=await gv(t.localStore,e,!0),l=new XA(e,o.Ts),h=l.ma(o.documents),d=Hl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);xv(t,n,m.wa);const v=new JA(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function sk(t,e,n){const i=ge(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Ch(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await tp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Cm(i.remoteStore,s.targetId),ip(i,s.targetId)}).catch(Ul)):(ip(i,s.targetId),await tp(i.localStore,s.targetId,!0))}async function ok(t,e){const n=ge(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cm(n.remoteStore,i.targetId))}async function ak(t,e,n){const i=pk(t);try{const s=await function(l,h){const d=ge(l),m=mt.now(),v=h.reduce((N,D)=>N.add(D.key),Se());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",N=>{let D=Di(),z=Se();return d.cs.getEntries(N,v).next($=>{D=$,D.forEach((b,S)=>{S.isValidDocument()||(z=z.add(b))})}).next(()=>d.localDocuments.getOverlayedDocuments(N,D)).next($=>{E=$;const b=[];for(const S of h){const O=kC(S,E.get(S.key).overlayedDocument);O!=null&&b.push(new Nr(S.key,O,Uw(O.value.mapValue),Vn.exists(!0)))}return d.mutationQueue.addMutationBatch(N,m,b,h)}).next($=>{T=$;const b=$.applyToLocalDocumentSet(E,z);return d.documentOverlayCache.saveOverlays(N,$.batchId,b)})}).then(()=>({batchId:T.batchId,changes:Jw(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Ye(Le)),m=m.insert(h,d),l.Ba[l.currentUser.toKey()]=m}(i,s.batchId,n),await Zl(i,s.changes),await Oh(i.remoteStore)}catch(s){const o=bm(s,"Failed to persist write");n.reject(o)}}async function ME(t,e){const n=ge(t);try{const i=await TA(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Me(l.va):s.removedDocuments.size>0&&(Me(l.va),l.va=!1))}),await Zl(n,i,e)}catch(i){await Ul(i)}}function Iv(t,e,n){const i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ge(l);d.onlineState=h;let m=!1;d.queries.forEach((v,E)=>{for(const T of E.j_)T.Z_(h)&&(m=!0)}),m&&Nm(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lk(t,e,n){const i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Ye(oe.comparator);l=l.insert(o,jt.newNoDocument(o,me.min()));const h=Se().add(o),d=new Lh(me.min(),new Map,new Ye(Le),l,h);await ME(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Om(i)}else await tp(i.localStore,e,!1).then(()=>ip(i,e,n)).catch(Ul)}async function uk(t,e){const n=ge(t),i=e.batch.batchId;try{const s=await EA(n.localStore,e);VE(n,i,null),DE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zl(n,s)}catch(s){await Ul(s)}}async function ck(t,e,n){const i=ge(t);try{const s=await function(l,h){const d=ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(E=>(Me(E!==null),v=E.keys(),d.mutationQueue.removeMutationBatch(m,E))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,e);VE(i,e,n),DE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zl(i,s)}catch(s){await Ul(s)}}function DE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VE(t,e,n){const i=ge(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||zE(t,i)})}function zE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Om(t))}function xv(t,e,n){for(const i of n)i instanceof bE?(t.La.addReference(i.key,e),hk(t,i)):i instanceof NE?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||zE(t,i.key)):he()}function hk(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(i),Om(t))}function Om(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Be.fromString(e)),i=t.qa.next();t.Na.set(i,new ek(n)),t.Oa=t.Oa.insert(n,i),IE(t.remoteStore,new hr(ei(Ph(n.path)),i,"TargetPurposeLimboResolution",pm.oe))}}async function Zl(t,e,n){const i=ge(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const E=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Pm.Wi(d.targetId,m);o.push(E)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,m){const v=ge(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>G.forEach(m,T=>G.forEach(T.$i,N=>v.persistence.referenceDelegate.addReference(E,T.targetId,N)).next(()=>G.forEach(T.Ui,N=>v.persistence.referenceDelegate.removeReference(E,T.targetId,N)))))}catch(E){if(!Wl(E))throw E;ie("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const T=E.targetId;if(!E.fromCache){const N=v.os.get(T),D=N.snapshotVersion,z=N.withLastLimboFreeSnapshotVersion(D);v.os=v.os.insert(T,z)}}}(i.localStore,o))}async function dk(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await yE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new te(q.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zl(n,i.hs)}}function fk(t,e){const n=ge(t),i=n.Na.get(e);if(i&&i.va)return Se().add(i.key);{let s=Se();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function FE(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ME.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lk.bind(null,e),e.Ca.d_=QA.bind(null,e.eventManager),e.Ca.$a=YA.bind(null,e.eventManager),e}function pk(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,e),e}class th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wA(this.persistence,new vA,e.initialUser,this.serializer)}Ga(e){return new mA(Sm.Zr,this.serializer)}Wa(e){return new CA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}th.provider={build:()=>new th};class rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await ZA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KA}()}createDatastore(e){const n=bh(e.databaseInfo.databaseId),i=function(o){return new LA(o)}(e.databaseInfo);return function(o,l,h,d){return new OA(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new DA(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Iv(this.syncEngine,n,0),function(){return vv.D()?new vv:new AA}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const E=new tk(s,o,l,h,d,m);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ge(s);ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ql(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rp.provider={build:()=>new rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=Fw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=bm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Dd(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await yE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gk(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>yv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>yv(e.remoteStore,s)),t._onlineComponents=e}async function gk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Dd(t,new th)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Dd(t,new th);return t._offlineComponents}async function BE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await Sv(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await Sv(t,new rp))),t._onlineComponents}function _k(t){return BE(t).then(e=>e.syncEngine)}async function sp(t){const e=await BE(t),n=e.eventManager;return n.onListen=nk.bind(null,e.syncEngine),n.onUnlisten=sk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ik.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ok.bind(null,e.syncEngine),n}function vk(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new jE({next:T=>{v.Za(),l.enqueueAndForget(()=>RE(o,E));const N=T.docs.has(h);!N&&T.fromCache?m.reject(new te(q.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&d&&d.source==="server"?m.reject(new te(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),E=new LE(Ph(h.path),v,{includeMetadataChanges:!0,_a:!0});return kE(o,E)}(await sp(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e,n){if(!n)throw new te(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yk(t,e,n,i){if(e===!0&&i===!0)throw new te(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cv(t){if(!oe.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Av(t){if(oe.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(t);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VP;switch(i.type){case"firstParty":return new BP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Pv.get(n);i&&(ie("ComponentProvider","Removing Datastore"),Pv.delete(n),i.terminate())}(this),Promise.resolve()}}function wk(t,e,n,i={}){var s;const o=(t=zn(t,Dh))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=zt.MOCK_USER;else{h=hS(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new zt(m)}t._authCredentials=new zP(new zw(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class Bt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class xr extends ys{constructor(e,n,i){super(e,n,Ph(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new oe(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function Vh(t,e,...n){if(t=Tt(t),WE("collection","path",e),t instanceof Dh){const i=Be.fromString(e,...n);return Av(i),new xr(t,null,i)}{if(!(t instanceof Bt||t instanceof xr))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Av(i),new xr(t.firestore,null,i)}}function jo(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Fw.newId()),WE("doc","path",e),t instanceof Dh){const i=Be.fromString(e,...n);return Cv(i),new Bt(t,null,new oe(i))}{if(!(t instanceof Bt||t instanceof xr))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Cv(i),new Bt(t.firestore,t instanceof xr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new EE(this,"async_queue_retry"),this.Vu=()=>{const i=Md();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wl(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Mi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Lm.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Lv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class fs extends Dh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Rv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rv(e),this._firestoreClient=void 0,await e}}}function Ek(t,e){const n=typeof t=="object"?t:kw(),i=typeof t=="string"?t:e||"(default)",s=dm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=uS("firestore");o&&wk(s,...o)}return s}function Mm(t){if(t._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Tk(t),t._firestoreClient}function Tk(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new eC(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,UE(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new mk(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Lt.fromBase64String(e))}catch(n){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=/^__.*__$/;class xk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $l(e,this.data,n,this.fieldTransforms)}}class $E{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class zm{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HE(this.Cu)&&Ik.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Sk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bh(e)}Qu(e,n,i,s=!1){return new zm({Cu:e,methodName:n,qu:i,path:Ct.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jh(t){const e=t._freezeSettings(),n=bh(t._databaseId);return new Sk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qE(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);jm("Data must be an object, but it was:",l,i);const h=ZE(i,l);let d,m;if(o.merge)d=new ln(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const E of o.mergeFields){const T=op(e,E,n);if(!l.contains(T))throw new te(q.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KE(v,T)||v.push(T)}d=new ln(v),m=l.fieldTransforms.filter(E=>d.covers(E.field))}else d=null,m=l.fieldTransforms;return new xk(new Yt(h),d,m)}class Bh extends Fh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class Fm extends Fh{_toFieldTransform(e){return new SC(e.path,new Rl)}isEqual(e){return e instanceof Fm}}function Pk(t,e,n,i){const s=t.Qu(1,e,n);jm("Data must be an object, but it was:",s,i);const o=[],l=Yt.empty();_s(i,(d,m)=>{const v=Bm(e,d,n);m=Tt(m);const E=s.Nu(v);if(m instanceof Bh)o.push(v);else{const T=Gl(m,E);T!=null&&(o.push(v),l.set(v,T))}});const h=new ln(o);return new $E(l,h,s.fieldTransforms)}function Ck(t,e,n,i,s,o){const l=t.Qu(1,e,n),h=[op(e,i,n)],d=[s];if(o.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(op(e,o[T])),d.push(o[T+1]);const m=[],v=Yt.empty();for(let T=h.length-1;T>=0;--T)if(!KE(m,h[T])){const N=h[T];let D=d[T];D=Tt(D);const z=l.Nu(N);if(D instanceof Bh)m.push(N);else{const $=Gl(D,z);$!=null&&(m.push(N),v.set(N,$))}}const E=new ln(m);return new $E(v,E,l.fieldTransforms)}function Ak(t,e,n,i=!1){return Gl(n,t.Qu(i?4:3,e))}function Gl(t,e){if(GE(t=Tt(t)))return jm("Unsupported field value:",e,t),ZE(t,e);if(t instanceof Fh)return function(i,s){if(!HE(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=Gl(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=mt.fromDate(i);return{timestampValue:Jc(s.serializer,o)}}if(i instanceof mt){const o=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jc(s.serializer,o)}}if(i instanceof Dm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ro)return{bytesValue:dE(s.serializer,i._byteString)};if(i instanceof Bt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Im(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Vm)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return wm(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Mh(i)}`)}(t,e)}function ZE(t,e){const n={};return jw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,(i,s)=>{const o=Gl(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function GE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Dm||t instanceof Ro||t instanceof Bt||t instanceof Fh||t instanceof Vm)}function jm(t,e,n){if(!GE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Mh(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function op(t,e,n){if((e=Tt(e))instanceof zh)return e._internalPath;if(typeof e=="string")return Bm(t,e);throw nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const kk=new RegExp("[~\\*/\\[\\]]");function Bm(t,e,n){if(e.search(kk)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zh(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new te(q.INVALID_ARGUMENT,h+t+d)}function KE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rk extends QE{data(){return super.data()}}function Uh(t,e){return typeof e=="string"?Bm(t,e):e instanceof zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Um{}class YE extends Um{}function XE(t,e,...n){let i=[];e instanceof Um&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Wm).length,h=o.filter(d=>d instanceof Wh).length;if(l>1||l>0&&h>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Wh extends YE{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Wh(e,n,i)}_apply(e){const n=this._parse(e);return eT(e._query,n),new ys(e.firestore,e.converter,Kf(e._query,n))}_parse(e){const n=jh(e.firestore);return function(o,l,h,d,m,v,E){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Nv(E,v);const N=[];for(const D of E)N.push(bv(d,o,D));T={arrayValue:{values:N}}}else T=bv(d,o,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Nv(E,v),T=Ak(h,l,E,v==="in"||v==="not-in");return ut.create(m,v,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ap(t,e,n){const i=e,s=Uh("where",t);return Wh._create(s,i,n)}class Wm extends Um{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wm(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)eT(l,d),l=Kf(l,d)}(e._query,n),new ys(e.firestore,e.converter,Kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends YE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $m(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kl(o,l)}(e._query,this._field,this._direction);return new ys(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Vo(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function JE(t,e="asc"){const n=e,i=Uh("orderBy",t);return $m._create(i,n)}function bv(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kw(e)&&n.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!oe.isDocumentKey(i))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return J_(t,new oe(i))}if(n instanceof Bt)return J_(t,n._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function Nv(t,e){if(!Array.isArray(t)||t.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eT(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bk{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return _s(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new Vm(o)}convertGeoPoint(e){return new Dm(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Me(vE(i));const s=new Cl(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return s.isEqual(n)||Mi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nT extends QE{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Uh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vc extends nT{data(e={}){return super.data(e)}}class Nk{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ha(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vc(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new vc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ha(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new vc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ha(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:Ok(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ok(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){t=zn(t,Bt);const e=zn(t.firestore,fs);return vk(Mm(e),t._key).then(n=>oT(e,t,n))}class iT extends bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function rT(t,e,n){t=zn(t,Bt);const i=zn(t.firestore,fs),s=tT(t.converter,e,n);return qm(i,[qE(jh(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Vn.none())])}function sT(t,e,n,...i){t=zn(t,Bt);const s=zn(t.firestore,fs),o=jh(s);let l;return l=typeof(e=Tt(e))=="string"||e instanceof zh?Ck(o,"updateDoc",t._key,e,n,i):Pk(o,"updateDoc",t._key,e),qm(s,[l.toMutation(t._key,Vn.exists(!0))])}function Dk(t,e){const n=zn(t.firestore,fs),i=jo(t),s=tT(t.converter,e);return qm(n,[qE(jh(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Vn.exists(!1))]).then(()=>i)}function Hm(t,...e){var n,i,s;t=Tt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Lv(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Lv(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,m,v;if(t instanceof Bt)m=zn(t.firestore,fs),v=Ph(t._key.path),d={next:E=>{e[l]&&e[l](oT(m,t,E))},error:e[l+1],complete:e[l+2]};else{const E=zn(t,ys);m=zn(E.firestore,fs),v=E._query;const T=new iT(m);d={next:N=>{e[l]&&e[l](new Nk(m,T,E,N))},error:e[l+1],complete:e[l+2]},Lk(t._query)}return function(T,N,D,z){const $=new jE(z),b=new LE(N,$,D);return T.asyncQueue.enqueueAndForget(async()=>kE(await sp(T),b)),()=>{$.Za(),T.asyncQueue.enqueueAndForget(async()=>RE(await sp(T),b))}}(Mm(m),v,h,d)}function qm(t,e){return function(i,s){const o=new Ir;return i.asyncQueue.enqueueAndForget(async()=>ak(await _k(i),s,o)),o.promise}(Mm(t),e)}function oT(t,e,n){const i=n.docs.get(e._key),s=new iT(t);return new nT(t,s,e._key,i,new Ha(n.hasPendingWrites,n.fromCache),e.converter)}function aT(){return new Fm("serverTimestamp")}(function(e,n=!0){(function(s){Do=s})(Mo),Io(new us("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new fs(new FP(i.getProvider("auth-internal")),new WP(i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Tr(G_,"4.7.3",e),Tr(G_,"4.7.3","esm2017")})();function Zm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function lT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vk=lT,uT=new jl("auth","Firebase",lT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new cm("@firebase/auth");function zk(t,...e){ih.logLevel<=Ce.WARN&&ih.warn(`Auth (${Mo}): ${t}`,...e)}function yc(t,...e){ih.logLevel<=Ce.ERROR&&ih.error(`Auth (${Mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,...e){throw Km(t,...e)}function Fn(t,...e){return Km(t,...e)}function Gm(t,e,n){const i=Object.assign(Object.assign({},Vk()),{[e]:n});return new jl("auth","Firebase",i).create(e,{appName:t.name})}function is(t){return Gm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fk(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ri(t,"argument-error"),Gm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Km(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uT.create(t,...e)}function ce(t,e,...n){if(!t)throw Km(e,...n)}function Pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function Vi(t,e){t||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jk(){return Ov()==="http:"||Ov()==="https:"}function Ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jk()||mS()||"connection"in navigator)?navigator.onLine:!0}function Uk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=dS()||gS()}get(){return Bk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e){Vi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Kl(3e4,6e4);function Ym(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bo(t,e,n,i,s={}){return hT(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Bl(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return pS()||(m.referrerPolicy="no-referrer"),cT.fetch()(dT(t,t.config.apiHost,n,h),m)})}async function hT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Wk),e);try{const s=new qk(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ec(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ec(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ec(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw ec(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Gm(t,v,m);ri(t,v)}}catch(s){if(s instanceof ji)throw s;ri(t,"network-request-failed",{message:String(s)})}}async function Hk(t,e,n,i,s={}){const o=await Bo(t,e,n,i,s);return"mfaPendingCredential"in o&&ri(t,"multi-factor-auth-required",{_serverResponse:o}),o}function dT(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Qm(t.config,s):`${t.config.apiScheme}://${s}`}class qk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),$k.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ec(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Fn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(t,e){return Bo(t,"POST","/v1/accounts:delete",e)}async function fT(t,e){return Bo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gk(t,e=!1){const n=Tt(t),i=await n.getIdToken(e),s=Xm(i);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:sl(Vd(s.auth_time)),issuedAtTime:sl(Vd(s.iat)),expirationTime:sl(Vd(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vd(t){return Number(t)*1e3}function Xm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Tw(n);return s?JSON.parse(s):(yc("Failed to decode base64 JWT payload"),null)}catch(s){return yc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Mv(t){const e=Xm(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ji&&Kk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Kk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Nl(t,fT(n,{idToken:i}));ce(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?pT(o.providerUserInfo):[],h=Xk(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new up(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function Yk(t){const e=Tt(t);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xk(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function pT(t){return t.map(e=>{var{providerId:n}=e,i=Zm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e){const n=await hT(t,{},async()=>{const i=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=dT(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",cT.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eR(t,e){return Bo(t,"POST","/v2/accounts:revokeToken",Ym(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=Mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Jk(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new fo;return i&&(ce(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ce(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ci{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Zm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new up(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gk(this,e)}reload(){return Yk(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Nl(this,Zk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,N=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,z=(h=n.tenantId)!==null&&h!==void 0?h:void 0,$=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,b=(m=n.createdAt)!==null&&m!==void 0?m:void 0,S=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:O,emailVerified:H,isAnonymous:Y,providerData:Q,stsTokenManager:C}=n;ce(O&&C,e,"internal-error");const I=fo.fromJSON(this.name,C);ce(typeof O=="string",e,"internal-error"),tr(E,e.name),tr(T,e.name),ce(typeof H=="boolean",e,"internal-error"),ce(typeof Y=="boolean",e,"internal-error"),tr(N,e.name),tr(D,e.name),tr(z,e.name),tr($,e.name),tr(b,e.name),tr(S,e.name);const P=new Ci({uid:O,auth:e,email:T,emailVerified:H,displayName:E,isAnonymous:Y,photoURL:D,phoneNumber:N,tenantId:z,stsTokenManager:I,createdAt:b,lastLoginAt:S});return Q&&Array.isArray(Q)&&(P.providerData=Q.map(A=>Object.assign({},A))),$&&(P._redirectEventId=$),P}static async _fromIdTokenResponse(e,n,i=!1){const s=new fo;s.updateFromServerResponse(n);const o=new Ci({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await rh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?pT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new fo;h.updateFromIdToken(i);const d=new Ci({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new up(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;function Ai(t){Vi(t instanceof Function,"Expected a class definition");let e=Dv.get(t);return e?(Vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mT.type="NONE";const Vv=mT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=wc(this.userKey,s.apiKey,o),this.fullPersistenceKey=wc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new po(Ai(Vv),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Ai(Vv);const l=wc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){const E=Ci._fromJSON(e,v);m!==o&&(h=E),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new po(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new po(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ET(e))return"Blackberry";if(TT(e))return"Webos";if(_T(e))return"Safari";if((e.includes("chrome/")||vT(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gT(t=Wt()){return/firefox\//i.test(t)}function _T(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vT(t=Wt()){return/crios\//i.test(t)}function yT(t=Wt()){return/iemobile/i.test(t)}function wT(t=Wt()){return/android/i.test(t)}function ET(t=Wt()){return/blackberry/i.test(t)}function TT(t=Wt()){return/webos/i.test(t)}function Jm(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tR(t=Wt()){var e;return Jm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nR(){return _S()&&document.documentMode===10}function IT(t=Wt()){return Jm(t)||wT(t)||TT(t)||ET(t)||/windows phone/i.test(t)||yT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e=[]){let n;switch(t){case"Browser":n=zv(Wt());break;case"Worker":n=`${zv(Wt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e={}){return Bo(t,"GET","/v2/passwordPolicy",Ym(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=6;class oR{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:sR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fv(this),this.idTokenSubscription=new Fv(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fT(this,{idToken:e}),i=await Ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(is(this));const n=e?Tt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rR(this),n=new oR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await eR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $h(t){return Tt(t)}class Fv{constructor(e){this.auth=e,this.observer=null,this.addObserver=SS(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lR(t){eg=t}function uR(t){return eg.loadJS(t)}function cR(){return eg.gapiScript}function hR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e){const n=dm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Gc(o,e??{}))return s;ri(s,"already-initialized")}return n.initialize({options:e})}function fR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function pR(t,e,n){const i=$h(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=ST(e),{host:l,port:h}=mR(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||gR()}function ST(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mR(t){const e=ST(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:jv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:jv(l)}}}function jv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,n){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return Hk(t,"POST","/v1/accounts:signInWithIdp",Ym(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="http://localhost";class ps extends PT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Zm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new ps(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,mo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:_R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends tg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Ql{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Ql{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Ql{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Ci._fromIdTokenResponse(e,i,s),l=Bv(i);return new Lo({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Bv(i);return new Lo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Bv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends ji{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new sh(e,n,i,s)}}function CT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(t,o,e,i):o})}async function vR(t,e,n=!1){const i=await Nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(is(i));const s="reauthenticate";try{const o=await Nl(t,CT(i,s,e,t),n);ce(o.idToken,i,"internal-error");const l=Xm(o.idToken);ce(l,i,"internal-error");const{sub:h}=l;return ce(t.uid===h,i,"user-mismatch"),Lo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ri(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e,n=!1){if(Si(t.app))return Promise.reject(is(t));const i="signIn",s=await CT(t,i,e),o=await Lo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function ER(t,e,n,i){return Tt(t).onIdTokenChanged(e,n,i)}function TR(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function IR(t,e,n,i){return Tt(t).onAuthStateChanged(e,n,i)}function xR(t){return Tt(t).signOut()}const oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1e3,PR=10;class kT extends AT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);nR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PR):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kT.type="LOCAL";const CR=kT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends AT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RT.type="SESSION";const LT=RT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Hh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await AR(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=ng("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function RR(t){ni().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function LR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NR(){return bT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebaseLocalStorageDb",OR=1,ah="firebaseLocalStorage",OT="fbase_key";class Yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qh(t,e){return t.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function MR(){const t=indexedDB.deleteDatabase(NT);return new Yl(t).toPromise()}function cp(){const t=indexedDB.open(NT,OR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ah,{keyPath:OT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ah)?e(i):(i.close(),await MR(),e(await cp()))})})}async function Uv(t,e,n){const i=qh(t,!0).put({[OT]:e,value:n});return new Yl(i).toPromise()}async function DR(t,e){const n=qh(t,!1).get(e),i=await new Yl(n).toPromise();return i===void 0?null:i.value}function Wv(t,e){const n=qh(t,!0).delete(e);return new Yl(n).toPromise()}const VR=800,zR=3;class MT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>zR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(NR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LR(),!this.activeServiceWorker)return;this.sender=new kR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await Uv(e,oh,"1"),await Wv(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Uv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>DR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=qh(s,!1).getAll();return new Yl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MT.type="LOCAL";const FR=MT;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){return e?Ai(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends PT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jR(t){return wR(t.auth,new ig(t),t.bypassAuthState)}function BR(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),yR(n,new ig(t),t.bypassAuthState)}async function UR(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),vR(n,new ig(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return UR;case"reauthViaPopup":case"reauthViaRedirect":return BR;default:ri(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new Kl(2e3,1e4);async function $R(t,e,n){if(Si(t.app))return Promise.reject(Fn(t,"operation-not-supported-in-this-environment"));const i=$h(t);Fk(t,e,tg);const s=DT(i,n);return new Jr(i,"signInViaPopup",e,s).executeNotNull()}class Jr extends VT{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WR.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="pendingRedirect",Ec=new Map;class qR extends VT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ec.get(this.auth._key());if(!e){try{const i=await ZR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ec.set(this.auth._key(),e)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZR(t,e){const n=QR(e),i=KR(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function GR(t,e){Ec.set(t._key(),e)}function KR(t){return Ai(t._redirectPersistence)}function QR(t){return wc(HR,t.config.apiKey,t.name)}async function YR(t,e,n=!1){if(Si(t.app))return Promise.reject(is(t));const i=$h(t),s=DT(i,e),l=await new qR(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=10*60*1e3;class JR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!zT(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XR&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e={}){return Bo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iL=/^https?/;async function rL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tL(t);for(const n of e)try{if(sL(n))return}catch{}ri(t,"unauthorized-domain")}function sL(t){const e=lp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!iL.test(n))return!1;if(nL.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=new Kl(3e4,6e4);function Hv(){const t=ni().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aL(t){return new Promise((e,n)=>{var i,s,o;function l(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(Fn(t,"network-request-failed"))},timeout:oL.get()})}if(!((s=(i=ni().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ni().gapi)===null||o===void 0)&&o.load)l();else{const h=hR("iframefcb");return ni()[h]=()=>{gapi.load?l():n(Fn(t,"network-request-failed"))},uR(`${cR()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function lL(t){return Tc=Tc||aL(t),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Kl(5e3,15e3),cL="__/auth/iframe",hL="emulator/auth/iframe",dL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pL(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qm(e,hL):`https://${t.config.authDomain}/${cL}`,i={apiKey:e.apiKey,appName:t.name,v:Mo},s=fL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Bl(i).slice(1)}`}async function mL(t){const e=await lL(t),n=ni().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:pL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Fn(t,"network-request-failed"),h=ni().setTimeout(()=>{o(l)},uL.get());function d(){ni().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_L=500,vL=600,yL="_blank",wL="http://localhost";class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EL(t,e,n,i=_L,s=vL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},gL),{width:i.toString(),height:s.toString(),top:o,left:l}),m=Wt().toLowerCase();n&&(h=vT(m)?yL:n),gT(m)&&(e=e||wL,d.scrollbars="yes");const v=Object.entries(d).reduce((T,[N,D])=>`${T}${N}=${D},`,"");if(tR(m)&&h!=="_self")return TL(e||"",h),new qv(null);const E=window.open(e||"",h,v);ce(E,t,"popup-blocked");try{E.focus()}catch{}return new qv(E)}function TL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="__/auth/handler",xL="emulator/auth/handler",SL=encodeURIComponent("fac");async function Zv(t,e,n,i,s,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mo,eventId:s};if(e instanceof tg){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",xS(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries(o||{}))l[v]=E}if(e instanceof Ql){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${SL}=${encodeURIComponent(d)}`:"";return`${PL(t)}?${Bl(h).slice(1)}${m}`}function PL({config:t}){return t.emulator?Qm(t,xL):`https://${t.authDomain}/${IL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class CL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=YR,this._overrideRedirectResult=GR}async _openPopup(e,n,i,s){var o;Vi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Zv(e,n,i,lp(),s);return EL(e,l,ng())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Zv(e,n,i,lp(),s);return RR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Vi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mL(e),i=new JR(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[zd];l!==void 0&&n(!!l),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IT()||_T()||Jm()}}const AL=CL;var Gv="@firebase/auth",Kv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LL(t){Io(new us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ce(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(t)},m=new aR(i,s,o,d);return fR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Io(new us("auth-internal",e=>{const n=$h(e.getProvider("auth").getImmediate());return(i=>new kL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(Gv,Kv,RL(t)),Tr(Gv,Kv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=5*60,NL=Sw("authIdTokenMaxAge")||bL;let Qv=null;const OL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>NL)return;const s=n==null?void 0:n.token;Qv!==s&&(Qv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ML(t=kw()){const e=dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dR(t,{popupRedirectResolver:AL,persistence:[FR,CR,LT]}),i=Sw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=OL(o.toString());TR(n,l,()=>l(n.currentUser)),ER(n,h=>l(h))}}const s=Iw("auth");return s&&pR(n,`http://${s}`),n}function DL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Fn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",DL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LL("Browser");const VL={apiKey:"AIzaSyCeyki8uKDyTDzn2QLKR1EUROwxGDn2FG4",authDomain:"e-rickshaw-finder.firebaseapp.com",projectId:"e-rickshaw-finder",storageBucket:"e-rickshaw-finder.firebasestorage.app",messagingSenderId:"330393348990",appId:"1:330393348990:web:3a7d8e73a6a45f86f3e12f"},FT=Aw(VL),zi=Ek(FT),rg=ML(FT),zL=new Ti,FL=async()=>{try{return(await $R(rg,zL)).user}catch(t){throw console.error("Login failed:",t),t}},jL=()=>xR(rg);var BL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WL=(t,e)=>{const n=re.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:h,...d},m)=>re.createElement("svg",{ref:m,...BL,width:s,height:s,stroke:i,strokeWidth:l?Number(o)*24/Number(s):o,className:`lucide lucide-${UL(t)}`,...d},[...e.map(([v,E])=>re.createElement(v,E)),...(Array.isArray(h)?h:[h])||[]]));return n.displayName=`${t}`,n};var nn=WL;const $L=nn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Fd=nn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Yv=nn("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Xv=nn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),HL=nn("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),Jv=nn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qL=nn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ey=nn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),jd=nn("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ZL=nn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),GL=nn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Bd=nn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),qs=nn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),KL=nn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function QL({onLogin:t}){const e=async()=>{try{const n=await FL();t(n)}catch{alert("Login failed. Please try again.")}};return x.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100dvh",background:"linear-gradient(135deg, #eff6ff, #dbeafe)",padding:"24px",textAlign:"center"},children:x.jsxs("div",{style:{background:"white",padding:"32px 24px",borderRadius:"24px",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",width:"100%",maxWidth:"360px"},children:[x.jsx("div",{style:{background:"#eff6ff",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:x.jsx(KL,{size:40,color:"#2563eb",fill:"#2563eb"})}),x.jsx("h1",{style:{fontSize:"24px",marginBottom:"8px",color:"#1e293b"},children:"Ride Fast"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Find E-Rickshaws nearby instantly."}),x.jsxs("button",{onClick:e,style:{background:"#1e293b",color:"white",border:"none",padding:"16px",borderRadius:"12px",width:"100%",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},children:[x.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"",width:"20",height:"20"}),"Continue with Google"]})]})})}const Ud=async t=>{try{const e=jo(zi,"users",t),n=await Mk(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},YL=async(t,e)=>{try{await rT(jo(zi,"users",t),{...e,id:t,createdAt:new Date().toISOString()},{merge:!0})}catch(n){throw console.error("Error creating user profile:",n),n}},XL=async(t,e)=>{try{const n=jo(zi,"users",t);await sT(n,e)}catch(n){throw console.error("Error updating user profile:",n),n}};function JL({user:t,onComplete:e}){const[n,i]=re.useState("customer"),[s,o]=re.useState({name:t.displayName||"",phone1:"",phone2:"",vehicleType:"E-Rickshaw",vehicleImage:""}),[l,h]=re.useState(!1),d=async m=>{m.preventDefault(),h(!0);try{await YL(t.uid,{...s,role:n,email:t.email,avatar:t.photoURL}),e()}catch(v){alert("Error saving profile: "+v.message),h(!1)}};return x.jsxs("div",{style:{padding:"24px",height:"100dvh",overflowY:"auto",background:"#f8fafc"},children:[x.jsxs("h2",{style:{fontSize:"24px",marginBottom:"8px"},children:["Welcome, ",t.displayName,"!"]}),x.jsx("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Let's set up your profile to get started."}),x.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"32px"},children:[x.jsxs("div",{onClick:()=>i("customer"),style:{flex:1,padding:"16px",borderRadius:"16px",cursor:"pointer",border:n==="customer"?"2px solid #2563eb":"2px solid #e2e8f0",background:n==="customer"?"#eff6ff":"white"},children:[x.jsx("div",{style:{background:"#bfdbfe",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:x.jsx(qs,{size:20,color:"#2563eb"})}),x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"Customer"}),x.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"#64748b"},children:"I want to book rides"})]}),x.jsxs("div",{onClick:()=>i("driver"),style:{flex:1,padding:"16px",borderRadius:"16px",cursor:"pointer",border:n==="driver"?"2px solid #2563eb":"2px solid #e2e8f0",background:n==="driver"?"#eff6ff":"white"},children:[x.jsx("div",{style:{background:"#bfdbfe",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:x.jsx(HL,{size:20,color:"#2563eb"})}),x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"Ride Share"}),x.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"#64748b"},children:"I want to drive"})]})]}),x.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Full Name"}),x.jsx("input",{type:"text",value:s.name,onChange:m=>o({...s,name:m.target.value}),className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Contact Number 1"}),x.jsx("input",{type:"tel",value:s.phone1,onChange:m=>o({...s,phone1:m.target.value}),placeholder:"+91 00000 00000",className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Contact Number 2 (Optional)"}),x.jsx("input",{type:"tel",value:s.phone2,onChange:m=>o({...s,phone2:m.target.value}),placeholder:"Emergency contact",className:"search-input",style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),n==="driver"&&x.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #dcfce7"},children:[x.jsx("h4",{style:{margin:"0 0 16px",color:"#166534"},children:"Vehicle Details"}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Vehicle Type"}),x.jsxs("select",{value:s.vehicleType,onChange:m=>o({...s,vehicleType:m.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #bbf7d0",outline:"none"},children:[x.jsx("option",{value:"E-Rickshaw",children:"E-Rickshaw"}),x.jsx("option",{value:"Car",children:"Car"}),x.jsx("option",{value:"Bike",children:"Bike"})]})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},children:"Vehicle Image URL (Optional)"}),x.jsx("input",{type:"text",value:s.vehicleImage,onChange:m=>o({...s,vehicleImage:m.target.value}),placeholder:"https://...",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #bbf7d0",outline:"none"}})]})]}),x.jsx("button",{type:"submit",disabled:l,className:"btn",style:{marginTop:"16px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:l?"Saving...":"Complete Setup"})]})]})}function e2({user:t,userProfile:e,onComplete:n,onCancel:i}){const[s,o]=re.useState({name:(e==null?void 0:e.name)||t.displayName||"",phone1:(e==null?void 0:e.phone1)||"",phone2:(e==null?void 0:e.phone2)||"",role:(e==null?void 0:e.role)||"customer",vehicleType:(e==null?void 0:e.vehicleType)||"E-Rickshaw",vehicleImage:(e==null?void 0:e.vehicleImage)||"",avatar:(e==null?void 0:e.avatar)||t.photoURL||""}),[l,h]=re.useState(!1),d=re.useRef(null),m=re.useRef(null),v=(T,N)=>{const D=T.target.files[0];if(D){if(D.size>1024*1024){alert("File size too large. Please upload an image smaller than 1MB.");return}const z=new FileReader;z.onloadend=()=>{o($=>({...$,[N]:z.result}))},z.readAsDataURL(D)}},E=async T=>{T.preventDefault(),h(!0);try{await XL(t.uid,s),alert("Profile updated successfully!"),n()}catch(N){alert("Error updating profile: "+N.message)}finally{h(!1)}};return x.jsxs("div",{style:{padding:"24px",height:"100dvh",overflowY:"auto",background:"#f8fafc",position:"absolute",top:0,left:0,width:"100%",zIndex:50},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[x.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",padding:"8px"},children:x.jsx($L,{size:24,color:"#1e293b"})}),x.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Edit Profile"})]}),x.jsxs("form",{onSubmit:E,style:{display:"flex",flexDirection:"column",gap:"24px"},children:[x.jsxs("div",{style:{textAlign:"center",position:"relative",width:"fit-content",margin:"0 auto"},children:[x.jsx("img",{src:s.avatar||"https://i.pravatar.cc/150?u=user",alt:"Profile",style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"4px solid white",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),x.jsx("button",{type:"button",onClick:()=>d.current.click(),style:{position:"absolute",bottom:0,right:0,background:"#2563eb",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:x.jsx(Xv,{size:16})}),x.jsx("input",{type:"file",ref:d,style:{display:"none"},accept:"image/*",onChange:T=>v(T,"avatar")})]}),x.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[x.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#64748b"},children:"Personal Details"}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Full Name"}),x.jsx("input",{type:"text",value:s.name,onChange:T=>o({...s,name:T.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Phone Number"}),x.jsx("input",{type:"tel",value:s.phone1,onChange:T=>o({...s,phone1:T.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Emergency Contact"}),x.jsx("input",{type:"tel",value:s.phone2,onChange:T=>o({...s,phone2:T.target.value}),className:"search-input",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"}})]})]}),x.jsxs("div",{className:"card",style:{padding:"16px"},children:[x.jsx("h3",{style:{margin:"0 0 16px",fontSize:"16px",color:"#64748b"},children:"Account Role"}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{type:"button",onClick:()=>o({...s,role:"customer"}),style:{flex:1,padding:"12px",borderRadius:"8px",border:"1px solid",borderColor:s.role==="customer"?"#2563eb":"#e2e8f0",background:s.role==="customer"?"#eff6ff":"white",color:s.role==="customer"?"#2563eb":"#64748b",fontWeight:"600"},children:"Customer"}),x.jsx("button",{type:"button",onClick:()=>o({...s,role:"driver"}),style:{flex:1,padding:"12px",borderRadius:"8px",border:"1px solid",borderColor:s.role==="driver"?"#2563eb":"#e2e8f0",background:s.role==="driver"?"#eff6ff":"white",color:s.role==="driver"?"#2563eb":"#64748b",fontWeight:"600"},children:"Ride Share"})]})]}),s.role==="driver"&&x.jsxs("div",{className:"card",style:{padding:"16px",background:"#f0fdf4",border:"1px solid #dcfce7"},children:[x.jsx("h3",{style:{margin:"0 0 16px",fontSize:"16px",color:"#166534"},children:"Vehicle Information"}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Vehicle Type"}),x.jsxs("select",{value:s.vehicleType,onChange:T=>o({...s,vehicleType:T.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsx("option",{value:"E-Rickshaw",children:"E-Rickshaw"}),x.jsx("option",{value:"Car",children:"Car"}),x.jsx("option",{value:"Bike",children:"Bike"})]})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Vehicle Photo"}),s.vehicleImage?x.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[x.jsx("img",{src:s.vehicleImage,alt:"Vehicle",style:{width:"100%",borderRadius:"8px",height:"150px",objectFit:"cover"}}),x.jsx("button",{type:"button",onClick:()=>o({...s,vehicleImage:""}),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px"},children:"Change"})]}):x.jsxs("div",{onClick:()=>m.current.click(),style:{border:"2px dashed #cbd5e1",borderRadius:"8px",padding:"24px",textAlign:"center",cursor:"pointer",background:"white"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px"},children:x.jsx(Xv,{size:20,color:"#94a3b8"})}),x.jsx("p",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Tap to upload vehicle photo"})]}),x.jsx("input",{type:"file",ref:m,style:{display:"none"},accept:"image/*",onChange:T=>v(T,"vehicleImage")})]})]}),x.jsxs("button",{type:"submit",disabled:l,className:"btn",style:{height:"56px",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"32px"},children:[x.jsx(GL,{size:20}),l?"Saving Changes...":"Save Profile"]})]})]})}const t2=[28.6139,77.209];function n2(t){const[e,n]=re.useState(t2),[i,s]=re.useState([]),[o,l]=re.useState(!0),[h,d]=re.useState(!1);re.useEffect(()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser."),l(!1);return}const T=z=>{const{latitude:$,longitude:b}=z.coords,S=[$,b];console.log("Got Location (initial):",S),n(S),l(!1)},N=z=>{console.warn("Geolocation error:",z),z.code===1&&alert("Location permission denied. Please enable GPS."),l(!1)};navigator.geolocation.getCurrentPosition(T,N,{enableHighAccuracy:!0,timeout:15e3,maximumAge:0});const D=navigator.geolocation.watchPosition(z=>{const{latitude:$,longitude:b}=z.coords,S=[$,b];console.log("Got Location (watch):",S),n(S),h&&t&&m(S,t)},z=>console.warn("Watch Position Error:",z),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3});return()=>navigator.geolocation.clearWatch(D)},[h,t]);const m=async(T,N)=>{if(!N||!T||T.length!==2)return;const D=N.uid;try{await rT(jo(zi,"drivers",D),{id:D,name:"E-Rickshaw",driver:N.displayName||"Unknown Driver",lat:T[0],lng:T[1],heading:0,status:"available",lastUpdated:aT(),phone:N.email||"+91 00000 00000",avatar:N.photoURL||`https://i.pravatar.cc/150?u=${D}`,rating:"5.0"},{merge:!0})}catch(z){console.error("Error publishing location:",z)}},v=(T,N,D,z)=>{const b=(D-T)*Math.PI/180,S=(z-N)*Math.PI/180,O=Math.sin(b/2)*Math.sin(b/2)+Math.cos(T*Math.PI/180)*Math.cos(D*Math.PI/180)*Math.sin(S/2)*Math.sin(S/2);return 6371*(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)))};return re.useEffect(()=>{const T=Hm(Vh(zi,"drivers"),N=>{const z=N.docs.map($=>({id:$.id,...$.data()})).filter($=>$.id!==(t==null?void 0:t.uid)).map($=>{const b=v(e[0],e[1],$.lat,$.lng);return{...$,distance:b}}).filter($=>$.distance<50).sort(($,b)=>$.distance-b.distance);s(z)});return()=>T()},[t,e]),{vehicles:i,userLocation:e,isLocating:o,isDriver:h,toggleDriverMode:()=>{d(T=>!T)}}}const i2=async(t,e,n,i,s)=>{try{return(await Dk(Vh(zi,"bookings"),{driverId:t,riderId:e,riderName:n,from:{lat:i[0],lng:i[1]},destination:s||"Not specified",status:"pending",timestamp:aT()})).id}catch(o){throw console.error("Error requesting ride:",o),o}},tc=async(t,e)=>{try{const n=jo(zi,"bookings",t);await sT(n,{status:e})}catch(n){console.error("Error updating ride status:",n)}},r2=(t,e)=>{const n=XE(Vh(zi,"bookings"),ap("riderId","==",t),JE("timestamp","desc"));return Hm(n,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})},s2=(t,e)=>{const n=XE(Vh(zi,"bookings"),ap("driverId","==",t),ap("status","==","pending"),JE("timestamp","desc"));return Hm(n,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})};function o2(){const[t,e]=re.useState(null),[n,i]=re.useState(null),[s,o]=re.useState(!0),[l,h]=re.useState("home"),[d,m]=re.useState(!1),[v,E]=re.useState(null),[T,N]=re.useState(""),[D,z]=re.useState(""),[$,b]=re.useState([]),[S,O]=re.useState([]),[H,Y]=re.useState(!1),{vehicles:Q,userLocation:C,isDriver:I,toggleDriverMode:P}=n2(t);re.useEffect(()=>{const ye=IR(rg,async B=>{try{if(B){const ae=await Ud(B.uid);i(ae)}else i(null);e(B)}catch(ae){console.error("Error fetching profile:",ae),e(B)}finally{o(!1)}});return()=>ye()},[]),re.useEffect(()=>{if(!t)return;const ye=r2(t.uid,B=>{b(B)});return()=>ye()},[t]),re.useEffect(()=>{if(!t||!n||n.role!=="driver"||!I)return;const ye=s2(t.uid,B=>{O(B),B.length>0&&"vibrate"in navigator&&navigator.vibrate([200,100,200])});return()=>ye()},[t,n,I]),re.useEffect(()=>{I&&h("map")},[I]);const A=async()=>{if(t){const ye=await Ud(t.uid);i(ye)}},M=async()=>{if(v)try{await i2(v.id,t.uid,t.displayName||"Rider",C,T),alert("Ride Requested! Creating booking..."),h("book"),E(null)}catch(ye){alert("Error booking ride: "+ye.message)}},V=ye=>{E(ye),h("map")},R=async()=>{try{await jL(),Y(!1)}catch(ye){console.error("Logout failed:",ye)}};if(s)return x.jsx("div",{style:{height:"100dvh",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."});if(!t)return x.jsx(QL,{onLogin:e});if(!n)return x.jsx(JL,{user:t,onComplete:A});if(d)return x.jsx(e2,{user:t,userProfile:n,onComplete:async()=>{const ye=await Ud(t.uid);i(ye),m(!1)},onCancel:()=>m(!1)});const We=()=>{switch(l){case"home":return x.jsxs("div",{className:"view-container section-padding",style:{overflowY:"auto"},children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Dashboard"}),x.jsxs("div",{className:"card",style:{padding:"24px",textAlign:"center",marginBottom:"24px",borderTop:I?"4px solid #166534":"4px solid #94a3b8"},children:[x.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",background:I?"#dcfce7":"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsx(jd,{size:40,color:I?"#166534":"#64748b"})}),x.jsx("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:I?"You are Online":"You are Offline"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"24px"},children:I?"Riders can see your location and request rides.":"Go online to start receiving ride requests."}),x.jsx("button",{onClick:P,className:"btn",style:{background:I?"#ef4444":"#166534",width:"100%",maxWidth:"200px",margin:"0 auto"},children:I?"Go Offline":"Go Online"})]}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[x.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[x.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",color:"#64748b"},children:"Pending Requests"}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2563eb"},children:S.length})]}),x.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[x.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",color:"#64748b"},children:"Today's Earnings"}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:"0"})]})]}),x.jsxs("div",{className:"card",style:{marginTop:"24px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},children:[x.jsx("img",{src:(n==null?void 0:n.avatar)||"https://i.pravatar.cc/150?u=driver",alt:"",className:"avatar"}),x.jsxs("div",{children:[x.jsx("h4",{style:{margin:0},children:n==null?void 0:n.name}),x.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#64748b"},children:[n==null?void 0:n.vehicleType,"  ",n==null?void 0:n.phone1]})]}),x.jsx("div",{style:{marginLeft:"auto"},children:x.jsx(Jv,{size:20,color:"#cbd5e1",onClick:()=>h("profile"),style:{cursor:"pointer"}})})]})]});case"map":return x.jsxs("div",{style:{width:"100%",height:"calc(100% - 64px)",position:"relative"},children:[x.jsx(V_,{center:C,vehicles:[...Q,{...n,lat:C[0],lng:C[1],id:t.uid,avatar:n==null?void 0:n.avatar}],selectedVehicle:null,onVehicleSelect:()=>{}}),I&&x.jsx("div",{className:"ui-overlay",style:{top:"auto",bottom:"24px"},children:x.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"You are Live"}),x.jsx("p",{style:{margin:0,fontSize:"12px",color:"#166534"},children:"Broadcasting to riders..."})]}),x.jsx("div",{className:"status-badge status-active",style:{fontSize:"12px"},children:"Online"})]})})]});case"book":return x.jsxs("div",{className:"view-container section-padding",children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Ride Requests"}),S.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f0fdf4",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:x.jsx(Fd,{size:40,color:"#166534"})}),x.jsx("h3",{children:"No new requests"}),x.jsx("p",{style:{fontSize:"14px",maxWidth:"240px",margin:"8px auto 24px"},children:"Waiting for nearby riders..."})]}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:S.map(ye=>x.jsxs("div",{className:"card",style:{padding:"16px",borderLeft:"4px solid #2563eb"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[x.jsx("span",{style:{fontWeight:"bold",fontSize:"16px"},children:ye.riderName}),x.jsx("span",{style:{fontSize:"12px",color:"#64748b"},children:"Now"})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[x.jsx(ey,{size:16,color:"#64748b"}),x.jsx("span",{style:{fontSize:"14px"},children:ye.destination})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:()=>tc(ye.id,"rejected"),children:"Decline"}),x.jsx("button",{className:"btn",style:{flex:1},onClick:()=>tc(ye.id,"accepted"),children:"Accept Ride"})]})]},ye.id))})]});case"profile":return Xe();default:return null}},xn=()=>{switch(l){case"home":const ye=Q.filter(B=>B.driver.toLowerCase().includes(D.toLowerCase())||B.name&&B.name.toLowerCase().includes(D.toLowerCase()));return x.jsxs("div",{className:"view-container section-padding",children:[x.jsxs("div",{style:{marginBottom:"24px"},children:[x.jsx("h2",{style:{margin:"0 0 16px"},children:"Find a Ride"}),x.jsxs("div",{className:"card search-bar",children:[x.jsx(Bd,{size:20,color:"#64748b"}),x.jsx("input",{type:"text",placeholder:"Search drivers by name...",className:"search-input",value:D,onChange:B=>z(B.target.value)})]})]}),x.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:x.jsxs("h3",{style:{margin:0,fontSize:"16px",color:"#64748b"},children:["Nearby (",ye.length,")"]})}),ye.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(Bd,{size:30,color:"#94a3b8"})}),x.jsx("p",{children:D?"No drivers found matching your search.":"No drivers nearby."})]}):ye.map(B=>x.jsxs("div",{className:"card vehicle-card",onClick:()=>V(B),style:{cursor:"pointer",marginBottom:"16px"},children:[x.jsx("img",{src:B.avatar,alt:B.driver,className:"avatar"}),x.jsxs("div",{className:"vehicle-details",style:{flex:1},children:[x.jsx("h4",{style:{fontSize:"16px",marginBottom:"2px"},children:B.driver}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[x.jsx("p",{style:{margin:0,opacity:.8,fontSize:"13px"},children:B.vehicleType||"E-Rickshaw"}),B.distance&&x.jsxs("span",{style:{fontSize:"12px",color:"#166534",fontWeight:"500"},children:[B.distance.toFixed(1)," km away"]})]})]}),x.jsx("div",{style:{textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:x.jsx("button",{className:"btn",style:{padding:"6px 12px",fontSize:"12px",height:"auto"},children:"View"})})]},B.id))]});case"map":return x.jsxs("div",{style:{width:"100%",height:"calc(100% - 64px)",position:"relative"},children:[x.jsx(V_,{center:C,vehicles:Q,selectedVehicle:v,onVehicleSelect:E}),x.jsx("div",{className:"ui-overlay",style:{height:"auto"},children:x.jsxs("div",{className:"interactive-element card search-bar",children:[x.jsx(Bd,{size:20,color:"#64748b"}),x.jsx("input",{type:"text",placeholder:"Where to?",className:"search-input",value:T,onChange:B=>N(B.target.value)})]})}),v&&x.jsx("div",{className:"ui-overlay",style:{justifyContent:"flex-end",pointerEvents:"none",paddingBottom:"24px"},children:x.jsxs("div",{className:"interactive-element card",style:{padding:"20px",width:"100%",maxWidth:"480px",margin:"0 auto",pointerEvents:"auto"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[x.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[x.jsx("img",{src:v.avatar,alt:v.driver,className:"avatar"}),x.jsxs("div",{children:[x.jsx("h3",{style:{margin:0,fontSize:"18px"},children:v.driver}),x.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#64748b"},children:v.name})]})]}),x.jsx("div",{className:"status-badge status-active",children:"Online"})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsxs("button",{className:"btn",onClick:M,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[x.jsx(jd,{size:18})," Book Ride"]}),x.jsx("button",{className:"card",style:{padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e2e8f0"},children:x.jsx(ZL,{size:20,color:"#2563eb"})})]})]})})]});case"book":return x.jsxs("div",{className:"view-container section-padding",children:[x.jsx("h2",{style:{marginBottom:"24px"},children:"Your Bookings"}),$.length===0?x.jsxs("div",{className:"card",style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[x.jsx("div",{style:{background:"#f1f5f9",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:x.jsx(Yv,{size:40,color:"#94a3b8"})}),x.jsx("h3",{children:"No active rides"}),x.jsx("p",{style:{fontSize:"14px",maxWidth:"240px",margin:"8px auto 24px"},children:"You haven't booked any E-Rickshaws yet. Start your journey today!"}),x.jsx("button",{className:"btn",onClick:()=>h("home"),children:"Find Nearby Rides"})]}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:$.map(B=>x.jsxs("div",{className:"card",style:{padding:"16px"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[x.jsxs("span",{style:{fontWeight:"bold"},children:["To: ",B.destination]}),x.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"12px",background:B.status==="pending"?"#fef9c3":"#dcfce7",color:B.status==="pending"?"#854d0e":"#166534"},children:B.status.toUpperCase()})]}),x.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:["Driver ID: ",B.driverId]})]},B.id))})]});case"profile":return Xe();default:return null}},Xe=()=>x.jsxs("div",{className:"view-container section-padding",children:[x.jsxs("div",{className:"profile-header",children:[x.jsxs("div",{style:{position:"relative",width:"100px",margin:"0 auto 16px"},children:[x.jsx("img",{src:(n==null?void 0:n.avatar)||t.photoURL||"https://i.pravatar.cc/150?u=user",alt:"User",className:"avatar",style:{width:"100px",height:"100px"}}),x.jsx("div",{style:{position:"absolute",bottom:0,right:0,background:"#2563eb",padding:"6px",borderRadius:"50%",color:"white",border:"2px solid white"},children:x.jsx(qs,{size:14})})]}),x.jsx("h2",{style:{margin:0},children:(n==null?void 0:n.name)||t.displayName}),x.jsx("p",{style:{color:"#64748b",fontSize:"14px"},children:(n==null?void 0:n.phone1)||t.email}),x.jsx("div",{style:{marginTop:"8px"},children:x.jsx("span",{style:{background:"#e2e8f0",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",textTransform:"uppercase"},children:n==null?void 0:n.role})})]}),(n==null?void 0:n.role)==="driver"&&x.jsxs(x.Fragment,{children:[x.jsx("h4",{style:{color:"#64748b",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px",marginBottom:"12px"},children:"Driver Controls"}),x.jsx("div",{className:"settings-list",style:{marginBottom:"24px"},children:x.jsxs("div",{className:"settings-item",onClick:P,style:{cursor:"pointer"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(jd,{size:18,color:I?"#166534":"#64748b"}),x.jsx("span",{style:{fontWeight:I?"bold":"normal",color:I?"#166534":"inherit"},children:I?"Driver Mode Active":"Switch to Driver Mode"})]}),x.jsx("div",{style:{width:"40px",height:"24px",background:I?"#22c55e":"#e2e8f0",borderRadius:"99px",position:"relative",transition:"background 0.3s"},children:x.jsx("div",{style:{width:"20px",height:"20px",background:"white",borderRadius:"50%",position:"absolute",top:"2px",left:I?"18px":"2px",transition:"left 0.3s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"}})})]})})]}),x.jsx("h4",{style:{color:"#64748b",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px",marginBottom:"12px"},children:"Account Settings"}),x.jsxs("div",{className:"settings-list",children:[x.jsxs("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>m(!0),children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(qs,{size:18,color:"#64748b"}),x.jsx("span",{children:"Edit Profile"})]}),x.jsx(Jv,{size:18,color:"#cbd5e1"})]}),x.jsx("div",{className:"settings-item",style:{color:"#ef4444",cursor:"pointer"},onClick:()=>Y(!0),children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx(qs,{size:18}),x.jsx("span",{children:"Logout"})]})})]})]});return x.jsxs("div",{className:"app-container",style:{width:"100%",height:"100dvh",position:"relative",overflow:"hidden"},children:[(n==null?void 0:n.role)==="driver"?We():xn(),S.length>0&&x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:x.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"320px",padding:"24px",textAlign:"center"},children:[x.jsx("div",{style:{background:"#dcfce7",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(Fd,{size:32,color:"#166534"})}),x.jsx("h3",{children:"New Ride Request!"}),x.jsxs("p",{style:{color:"#64748b",marginBottom:"24px"},children:[S[0].riderName," wants to go to:",x.jsx("br",{}),x.jsx("strong",{children:S[0].destination})]}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:()=>tc(S[0].id,"rejected"),children:"Decline"}),x.jsx("button",{className:"btn",style:{flex:1},onClick:()=>tc(S[0].id,"accepted"),children:"Accept"})]})]})}),H&&x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:x.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"320px",padding:"24px",textAlign:"center"},children:[x.jsx("div",{style:{background:"#fee2e2",width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:x.jsx(qs,{size:32,color:"#ef4444"})}),x.jsx("h3",{children:"Log Out?"}),x.jsx("p",{style:{color:"#64748b",marginBottom:"24px"},children:"Are you sure you want to log out?"}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx("button",{className:"btn",style:{flex:1,background:"#e2e8f0",color:"#1e293b"},onClick:()=>Y(!1),children:"Cancel"}),x.jsx("button",{className:"btn",style:{flex:1,background:"#ef4444"},onClick:R,children:"Log Out"})]})]})}),x.jsxs("nav",{className:"bottom-nav",children:[x.jsxs("button",{className:`nav-item ${l==="home"?"active":""}`,onClick:()=>h("home"),children:[x.jsx(qL,{size:24}),x.jsx("span",{children:"Home"})]}),x.jsxs("button",{className:`nav-item ${l==="map"?"active":""}`,onClick:()=>h("map"),children:[x.jsx(ey,{size:24}),x.jsx("span",{children:"Map"})]}),x.jsxs("button",{className:`nav-item ${l==="book"?"active":""}`,onClick:()=>h("book"),children:[(n==null?void 0:n.role)==="driver"?x.jsx(Fd,{size:24}):x.jsx(Yv,{size:24}),x.jsx("span",{children:(n==null?void 0:n.role)==="driver"?"Requests":"Book"})]}),x.jsxs("button",{className:`nav-item ${l==="profile"?"active":""}`,onClick:()=>h("profile"),children:[x.jsx(qs,{size:24}),x.jsx("span",{children:"Profile"})]})]})]})}class a2 extends ol.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error",e,n)}render(){var e;return this.state.hasError?x.jsxs("div",{style:{padding:"24px",color:"#ef4444"},children:[x.jsx("h1",{children:"Something went wrong."}),x.jsx("pre",{style:{background:"#fef2f2",padding:"12px",borderRadius:"8px",overflow:"auto"},children:(e=this.state.error)==null?void 0:e.toString()}),x.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px"},children:"Reload App"})]}):this.props.children}}Wd.createRoot(document.getElementById("root")).render(x.jsx(ol.StrictMode,{children:x.jsx(a2,{children:x.jsx(o2,{})})}));
